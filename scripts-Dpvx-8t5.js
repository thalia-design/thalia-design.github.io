var Ms=Object.defineProperty,Ns=Object.defineProperties;var Hs=Object.getOwnPropertyDescriptors;var Kt=Object.getOwnPropertySymbols;var si=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable;var ke=(t,e,i)=>e in t?Ms(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Nt=(t,e)=>{for(var i in e||(e={}))si.call(e,i)&&ke(t,i,e[i]);if(Kt)for(var i of Kt(e))ri.call(e,i)&&ke(t,i,e[i]);return t},Qt=(t,e)=>Ns(t,Hs(e));var ni=(t,e)=>{var i={};for(var s in t)si.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&Kt)for(var s of Kt(t))e.indexOf(s)<0&&ri.call(t,s)&&(i[s]=t[s]);return i};var T=(t,e,i)=>ke(t,typeof e!="symbol"?e+"":e,i);var Z=(t,e,i)=>new Promise((s,r)=>{var n=l=>{try{a(i.next(l))}catch(h){r(h)}},o=l=>{try{a(i.throw(l))}catch(h){r(h)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,o);a((i=i.apply(t,e)).next())});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var Fs="vh";function zs(t){var e,i="--"+Fs;function s(){var r=t.clientHeight;r!==e&&requestAnimationFrame(function(){t.style.setProperty(i,r*.01+"px"),e=r})}return s(),s}window.addEventListener("resize",zs(document.documentElement));const De=new WeakMap;function Re(t,e,i,s){var a,l;if(!t&&!De.has(e))return!1;const r=(a=De.get(e))!=null?a:new WeakMap;De.set(e,r);const n=(l=r.get(i))!=null?l:new Set;r.set(i,n);const o=n.has(s);return t?n.add(s):n.delete(s),o&&t}function Ys(t,e){let i=t.target;if(i instanceof Text&&(i=i.parentElement),i instanceof Element&&t.currentTarget instanceof Element){const s=i.closest(e);if(s&&t.currentTarget.contains(s))return s}}function qs(t,e,i,s={}){const{signal:r,base:n=document}=s;if(r!=null&&r.aborted)return;const g=s,{once:o}=g,a=ni(g,["once"]),l=n instanceof Document?n.documentElement:n,h=!!(typeof s=="object"?s.capture:s),c=E=>{const d=Ys(E,String(t));if(d){const u=Object.assign(E,{delegateTarget:d});i.call(l,u),o&&(l.removeEventListener(e,c,a),Re(!1,l,i,f))}},f=JSON.stringify({selector:t,type:e,capture:h});Re(!0,l,i,f)||l.addEventListener(e,c,a),r==null||r.addEventListener("abort",()=>{Re(!1,l,i,f)})}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},q.apply(null,arguments)}const Fi=(t,e)=>String(t).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||e||"",zt=({hash:t}={})=>window.location.pathname+window.location.search+(t?window.location.hash:""),Xs=(t,e={})=>{const i=q({url:t=t||zt({hash:!0}),random:Math.random(),source:"swup"},e);window.history.pushState(i,"",t)},Ht=(t=null,e={})=>{t=t||zt({hash:!0});const i=q({},window.history.state||{},{url:t,random:Math.random(),source:"swup"},e);window.history.replaceState(i,"",t)},Vs=(t,e,i,s)=>{const r=new AbortController;return s=q({},s,{signal:r.signal}),qs(t,e,i,s),{destroy:()=>r.abort()}};let nt=class oe extends URL{constructor(e,i=document.baseURI){super(e.toString(),i),Object.setPrototypeOf(this,oe.prototype)}get url(){return this.pathname+this.search}static fromElement(e){const i=e.getAttribute("href")||e.getAttribute("xlink:href")||"";return new oe(i)}static fromUrl(e){return new oe(e)}},Jt=class extends Error{constructor(e,i){super(e),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=i.url,this.status=i.status,this.aborted=i.aborted||!1,this.timedOut=i.timedOut||!1}};function Bs(i){return Z(this,arguments,function*(t,e={}){var s;t=nt.fromUrl(t).url;const{visit:r=this.visit}=e,n=q({},this.options.requestHeaders,e.headers),o=(s=e.timeout)!=null?s:this.options.timeout,a=new AbortController,{signal:l}=a;e=q({},e,{headers:n,signal:l});let h,c=!1,f=null;o&&o>0&&(f=setTimeout(()=>{c=!0,a.abort("timeout")},o));try{h=yield this.hooks.call("fetch:request",r,{url:t,options:e},(v,{url:_,options:w})=>fetch(_,w)),f&&clearTimeout(f)}catch(v){throw c?(this.hooks.call("fetch:timeout",r,{url:t}),new Jt(`Request timed out: ${t}`,{url:t,timedOut:c})):(v==null?void 0:v.name)==="AbortError"||l.aborted?new Jt(`Request aborted: ${t}`,{url:t,aborted:!0}):v}const{status:y,url:g}=h,E=yield h.text();if(y===500)throw this.hooks.call("fetch:error",r,{status:y,response:h,url:g}),new Jt(`Server error: ${g}`,{status:y,url:g});if(!E)throw new Jt(`Empty response: ${g}`,{status:y,url:g});const{url:d}=nt.fromUrl(g),u={url:d,html:E};return!r.cache.write||e.method&&e.method!=="GET"||t!==d||this.cache.set(u.url,u),u})}class Ws{constructor(e){this.swup=void 0,this.pages=new Map,this.swup=e}get size(){return this.pages.size}get all(){const e=new Map;return this.pages.forEach((i,s)=>{e.set(s,q({},i))}),e}has(e){return this.pages.has(this.resolve(e))}get(e){const i=this.pages.get(this.resolve(e));return i&&q({},i)}set(e,i){i=q({},i,{url:e=this.resolve(e)}),this.pages.set(e,i),this.swup.hooks.callSync("cache:set",void 0,{page:i})}update(e,i){e=this.resolve(e);const s=q({},this.get(e),i,{url:e});this.pages.set(e,s)}delete(e){this.pages.delete(this.resolve(e))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(e){this.pages.forEach((i,s)=>{e(s,i)&&this.delete(s)})}resolve(e){const{url:i}=nt.fromUrl(e);return this.swup.resolveUrl(i)}}const Fe=(t,e=document)=>e.querySelector(t),We=(t,e=document)=>Array.from(e.querySelectorAll(t)),zi=()=>new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})});function Yi(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function $s(t,e=[]){return new Promise((i,s)=>{const r=t(...e);Yi(r)?r.then(i,s):i(r)})}function oi(t,e){const i=t==null?void 0:t.closest(`[${e}]`);return i!=null&&i.hasAttribute(e)?(i==null?void 0:i.getAttribute(e))||!0:void 0}class Us{constructor(e){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=e}get selectors(){const{scope:e}=this.swup.visit.animation;return e==="containers"?this.swup.visit.containers:e==="html"?["html"]:Array.isArray(e)?e:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?We(this.selector):[]}add(...e){this.targets.forEach(i=>i.classList.add(...e))}remove(...e){this.targets.forEach(i=>i.classList.remove(...e))}clear(){this.targets.forEach(e=>{const i=e.className.split(" ").filter(s=>this.isSwupClass(s));e.classList.remove(...i)})}isSwupClass(e){return this.swupClasses.some(i=>e.startsWith(i))}}class qi{constructor(e,i){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0,this.meta=void 0;const{to:s,from:r,hash:n,el:o,event:a}=i;this.id=Math.random(),this.state=1,this.from={url:r!=null?r:e.location.url,hash:e.location.hash},this.to={url:s,hash:n},this.containers=e.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:e.options.native,scope:e.options.animationScope,selector:e.options.animationSelector},this.trigger={el:o,event:a},this.cache={read:e.options.cache,write:e.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0},this.meta={}}advance(e){this.state<e&&(this.state=e)}abort(){this.state=8}get done(){return this.state>=7}}function Gs(t){return new qi(this,t)}class js{constructor(e){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=e,this.init()}init(){this.hooks.forEach(e=>this.create(e))}create(e){this.registry.has(e)||this.registry.set(e,new Map)}exists(e){return this.registry.has(e)}get(e){const i=this.registry.get(e);if(i)return i;console.error(`Unknown hook '${e}'`)}clear(){this.registry.forEach(e=>e.clear())}on(e,i,s={}){const r=this.get(e);if(!r)return console.warn(`Hook '${e}' not found.`),()=>{};const n=q({},s,{id:r.size+1,hook:e,handler:i});return r.set(i,n),()=>this.off(e,i)}before(e,i,s={}){return this.on(e,i,q({},s,{before:!0}))}replace(e,i,s={}){return this.on(e,i,q({},s,{replace:!0}))}once(e,i,s={}){return this.on(e,i,q({},s,{once:!0}))}off(e,i){const s=this.get(e);s&&i?s.delete(i)||console.warn(`Handler for hook '${e}' not found.`):s&&s.clear()}call(e,i,s,r){return Z(this,null,function*(){const[n,o,a]=this.parseCallArgs(e,i,s,r),{before:l,handler:h,after:c}=this.getHandlers(e,a);yield this.run(l,n,o);const[f]=yield this.run(h,n,o,!0);return yield this.run(c,n,o),this.dispatchDomEvent(e,n,o),f})}callSync(e,i,s,r){const[n,o,a]=this.parseCallArgs(e,i,s,r),{before:l,handler:h,after:c}=this.getHandlers(e,a);this.runSync(l,n,o);const[f]=this.runSync(h,n,o,!0);return this.runSync(c,n,o),this.dispatchDomEvent(e,n,o),f}parseCallArgs(e,i,s,r){return i instanceof qi||typeof i!="object"&&typeof s!="function"?[i,s,r]:[void 0,i,s]}run(n){return Z(this,arguments,function*(e,i=this.swup.visit,s,r=!1){const o=[];for(const{hook:a,handler:l,defaultHandler:h,once:c}of e)if(i==null||!i.done){c&&this.off(a,l);try{const f=yield $s(l,[i,s,h]);o.push(f)}catch(f){if(r)throw f;console.error(`Error in hook '${a}':`,f)}}return o})}runSync(e,i=this.swup.visit,s,r=!1){const n=[];for(const{hook:o,handler:a,defaultHandler:l,once:h}of e)if(i==null||!i.done){h&&this.off(o,a);try{const c=a(i,s,l);n.push(c),Yi(c)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${o}'.`)}catch(c){if(r)throw c;console.error(`Error in hook '${o}':`,c)}}return n}getHandlers(e,i){const s=this.get(e);if(!s)return{found:!1,before:[],handler:[],after:[],replaced:!1};const r=Array.from(s.values()),n=this.sortRegistrations,o=r.filter(({before:f,replace:y})=>f&&!y).sort(n),a=r.filter(({replace:f})=>f).filter(f=>!0).sort(n),l=r.filter(({before:f,replace:y})=>!f&&!y).sort(n),h=a.length>0;let c=[];if(i&&(c=[{id:0,hook:e,handler:i}],h)){const f=a.length-1,{handler:y,once:g}=a[f],E=d=>{const u=a[d-1];return u?(v,_)=>u.handler(v,_,E(d-1)):i};c=[{id:0,hook:e,once:g,handler:y,defaultHandler:E(f)}]}return{found:!0,before:o,handler:c,after:l,replaced:h}}sortRegistrations(e,i){var s,r;return((s=e.priority)!=null?s:0)-((r=i.priority)!=null?r:0)||e.id-i.id||0}dispatchDomEvent(e,i,s){if(i!=null&&i.done)return;const r={hook:e,args:s,visit:i||this.swup.visit};document.dispatchEvent(new CustomEvent("swup:any",{detail:r,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${e}`,{detail:r,bubbles:!0}))}parseName(e){const[i,...s]=e.split(".");return[i,s.reduce((r,n)=>q({},r,{[n]:!0}),{})]}}const Zs=t=>{if(t&&t.charAt(0)==="#"&&(t=t.substring(1)),!t)return null;const e=decodeURIComponent(t);let i=document.getElementById(t)||document.getElementById(e)||Fe(`a[name='${CSS.escape(t)}']`)||Fe(`a[name='${CSS.escape(e)}']`);return i||t!=="top"||(i=document.body),i},te="transition",Le="animation";function Ks(i){return Z(this,arguments,function*({selector:t,elements:e}){if(t===!1&&!e)return;let s=[];if(e)s=Array.from(e);else if(t&&(s=We(t,document.body),!s.length))return void console.warn(`[swup] No elements found matching animationSelector \`${t}\``);const r=s.map(n=>function(o){const{type:a,timeout:l,propCount:h}=function(c){const f=window.getComputedStyle(c),y=ee(f,`${te}Delay`),g=ee(f,`${te}Duration`),E=ai(y,g),d=ee(f,`${Le}Delay`),u=ee(f,`${Le}Duration`),v=ai(d,u),_=Math.max(E,v),w=_>0?E>v?te:Le:null;return{type:w,timeout:_,propCount:w?w===te?g.length:u.length:0}}(o);return!(!a||!l)&&new Promise(c=>{const f=`${a}end`,y=performance.now();let g=0;const E=()=>{o.removeEventListener(f,d),c()},d=u=>{u.target===o&&((performance.now()-y)/1e3<u.elapsedTime||++g>=h&&E())};setTimeout(()=>{g<h&&E()},l+1),o.addEventListener(f,d)})}(n));r.filter(Boolean).length>0?yield Promise.all(r):t&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${t}\``)})}function ee(t,e){return(t[e]||"").split(", ")}function ai(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,s)=>li(i)+li(t[s])))}function li(t){return 1e3*parseFloat(t)}function Qs(t,e={},i={}){if(typeof t!="string")throw new Error("swup.navigate() requires a URL parameter");if(this.shouldIgnoreVisit(t,{el:i.el,event:i.event}))return void window.location.assign(t);const{url:s,hash:r}=nt.fromUrl(t),n=this.createVisit(q({},i,{to:s,hash:r}));this.performNavigation(n,e)}function Js(i){return Z(this,arguments,function*(t,e={}){if(this.navigating){if(this.visit.state>=6)return t.state=2,void(this.onVisitEnd=()=>this.performNavigation(t,e));yield this.hooks.call("visit:abort",this.visit,void 0),delete this.visit.to.document,this.visit.state=8}this.navigating=!0,this.visit=t;const{el:s}=t.trigger;e.referrer=e.referrer||this.location.url,e.animate===!1&&(t.animation.animate=!1),t.animation.animate||this.classes.clear();const r=e.history||oi(s,"data-swup-history");typeof r=="string"&&["push","replace"].includes(r)&&(t.history.action=r);const n=e.animation||oi(s,"data-swup-animation");var o,a;typeof n=="string"&&(t.animation.name=n),t.meta=e.meta||{},typeof e.cache=="object"?(t.cache.read=(o=e.cache.read)!=null?o:t.cache.read,t.cache.write=(a=e.cache.write)!=null?a:t.cache.write):e.cache!==void 0&&(t.cache={read:!!e.cache,write:!!e.cache}),delete e.cache;try{yield this.hooks.call("visit:start",t,void 0),t.state=3;const l=this.hooks.call("page:load",t,{options:e},(c,f)=>Z(this,null,function*(){let y;return c.cache.read&&(y=this.cache.get(c.to.url)),f.page=y||(yield this.fetchPage(c.to.url,f.options)),f.cache=!!y,f.page}));l.then(({html:c})=>{t.advance(5),t.to.html=c,t.to.document=new DOMParser().parseFromString(c,"text/html")});const h=t.to.url+t.to.hash;if(t.history.popstate||(t.history.action==="replace"||t.to.url===this.location.url?Ht(h):(this.currentHistoryIndex++,Xs(h,{index:this.currentHistoryIndex}))),this.location=nt.fromUrl(h),t.history.popstate&&this.classes.add("is-popstate"),t.animation.name&&this.classes.add(`to-${Fi(t.animation.name)}`),t.animation.wait&&(yield l),t.done||(yield this.hooks.call("visit:transition",t,void 0,()=>Z(this,null,function*(){if(!t.animation.animate)return yield this.hooks.call("animation:skip",void 0),void(yield this.renderPage(t,yield l));t.advance(4),yield this.animatePageOut(t),t.animation.native&&document.startViewTransition?yield document.startViewTransition(()=>Z(this,null,function*(){return yield this.renderPage(t,yield l)})).finished:yield this.renderPage(t,yield l),yield this.animatePageIn(t)})),t.done))return;yield this.hooks.call("visit:end",t,void 0,()=>this.classes.clear()),t.state=7,this.navigating=!1,this.onVisitEnd&&(this.onVisitEnd(),this.onVisitEnd=void 0)}catch(l){if(!l||l!=null&&l.aborted)return void(t.state=8);t.state=9,console.error(l),this.options.skipPopStateHandling=()=>(window.location.assign(t.to.url+t.to.hash),!0),window.history.back()}finally{delete t.to.document}})}const tr=function(t){return Z(this,null,function*(){yield this.hooks.call("animation:out:start",t,void 0,()=>{this.classes.add("is-changing","is-animating","is-leaving")}),yield this.hooks.call("animation:out:await",t,{skip:!1},(e,{skip:i})=>{if(!i)return this.awaitAnimations({selector:e.animation.selector})}),yield this.hooks.call("animation:out:end",t,void 0)})},er=function(t){var e;const i=t.to.document;if(!i)return!1;const s=((e=i.querySelector("title"))==null?void 0:e.innerText)||"";document.title=s;const r=We('[data-swup-persist]:not([data-swup-persist=""])'),n=t.containers.map(o=>{const a=document.querySelector(o),l=i.querySelector(o);return a&&l?(a.replaceWith(l.cloneNode(!0)),!0):(a||console.warn(`[swup] Container missing in current document: ${o}`),l||console.warn(`[swup] Container missing in incoming document: ${o}`),!1)}).filter(Boolean);return r.forEach(o=>{const a=o.getAttribute("data-swup-persist"),l=Fe(`[data-swup-persist="${a}"]`);l&&l!==o&&l.replaceWith(o)}),n.length===t.containers.length},ir=function(t){const e={behavior:"auto"},{target:i,reset:s}=t.scroll,r=i!=null?i:t.to.hash;let n=!1;return r&&(n=this.hooks.callSync("scroll:anchor",t,{hash:r,options:e},(o,{hash:a,options:l})=>{const h=this.getAnchorElement(a);return h&&h.scrollIntoView(l),!!h})),s&&!n&&(n=this.hooks.callSync("scroll:top",t,{options:e},(o,{options:a})=>(window.scrollTo(q({top:0,left:0},a)),!0))),n},sr=function(t){return Z(this,null,function*(){if(t.done)return;const e=this.hooks.call("animation:in:await",t,{skip:!1},(i,{skip:s})=>{if(!s)return this.awaitAnimations({selector:i.animation.selector})});yield zi(),yield this.hooks.call("animation:in:start",t,void 0,()=>{this.classes.remove("is-animating")}),yield e,yield this.hooks.call("animation:in:end",t,void 0)})},rr=function(t,e){return Z(this,null,function*(){if(t.done)return;t.advance(6);const{url:i}=e;this.isSameResolvedUrl(zt(),i)||(Ht(i),this.location=nt.fromUrl(i),t.to.url=this.location.url,t.to.hash=this.location.hash),yield this.hooks.call("content:replace",t,{page:e},(s,{})=>{if(this.classes.remove("is-leaving"),s.animation.animate&&this.classes.add("is-rendering"),!this.replaceContent(s))throw new Error("[swup] Container mismatch, aborting");s.animation.animate&&(this.classes.add("is-changing","is-animating","is-rendering"),s.animation.name&&this.classes.add(`to-${Fi(s.animation.name)}`))}),yield this.hooks.call("content:scroll",t,void 0,()=>this.scrollToContent(t)),yield this.hooks.call("page:view",t,{url:this.location.url,title:document.title})})},nr=function(t){var e;if(e=t,!!(e!=null&&e.isSwupPlugin)){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error("Not a swup plugin instance",t)};function or(t){const e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter(i=>i!==e),this.plugins;console.error("No such plugin",e)}function ar(t){return this.plugins.find(e=>e===t||e.name===t||e.name===`Swup${String(t)}`)}function lr(t){if(typeof this.options.resolveUrl!="function")return console.warn("[swup] options.resolveUrl expects a callback function."),t;const e=this.options.resolveUrl(t);return e&&typeof e=="string"?e.startsWith("//")||e.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),t):e:(console.warn("[swup] options.resolveUrl needs to return a url"),t)}function hr(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}const cr={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["#swup"],hooks:{},ignoreVisit:(t,{el:e}={})=>!(e==null||!e.closest("[data-no-swup]")),linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:t=>t,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling:t=>{var e;return((e=t.state)==null?void 0:e.source)!=="swup"},timeout:0};class ur{get currentPageUrl(){return this.location.url}constructor(e={}){var i,s;this.version="4.8.1",this.options=void 0,this.defaults=cr,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=nt.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=nr,this.unuse=or,this.findPlugin=ar,this.log=()=>{},this.navigate=Qs,this.performNavigation=Js,this.createVisit=Gs,this.delegateEvent=Vs,this.fetchPage=Bs,this.awaitAnimations=Ks,this.renderPage=rr,this.replaceContent=er,this.animatePageIn=sr,this.animatePageOut=tr,this.scrollToContent=ir,this.getAnchorElement=Zs,this.getCurrentUrl=zt,this.resolveUrl=lr,this.isSameResolvedUrl=hr,this.options=q({},this.defaults,e),this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new Ws(this),this.classes=new Us(this),this.hooks=new js(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=(i=(s=window.history.state)==null?void 0:s.index)!=null?i:1,this.enable()}enable(){return Z(this,null,function*(){var e;const{linkSelector:i}=this.options;this.clickDelegate=this.delegateEvent(i,"click",this.handleLinkClick),window.addEventListener("popstate",this.handlePopState),this.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.options.native=this.options.native&&!!document.startViewTransition,this.options.plugins.forEach(s=>this.use(s));for(const[s,r]of Object.entries(this.options.hooks)){const[n,o]=this.hooks.parseName(s);this.hooks.on(n,r,o)}((e=window.history.state)==null?void 0:e.source)!=="swup"&&Ht(null,{index:this.currentHistoryIndex}),yield zi(),yield this.hooks.call("enable",void 0,void 0,()=>{const s=document.documentElement;s.classList.add("swup-enabled"),s.classList.toggle("swup-native",this.options.native)})})}destroy(){return Z(this,null,function*(){this.clickDelegate.destroy(),window.removeEventListener("popstate",this.handlePopState),this.cache.clear(),this.options.plugins.forEach(e=>this.unuse(e)),yield this.hooks.call("disable",void 0,void 0,()=>{const e=document.documentElement;e.classList.remove("swup-enabled"),e.classList.remove("swup-native")}),this.hooks.clear()})}shouldIgnoreVisit(e,{el:i,event:s}={}){const{origin:r,url:n,hash:o}=nt.fromUrl(e);return r!==window.location.origin||!(!i||!this.triggerWillOpenNewWindow(i))||!!this.options.ignoreVisit(n+o,{el:i,event:s})}handleLinkClick(e){const i=e.delegateTarget,{href:s,url:r,hash:n}=nt.fromElement(i);if(this.shouldIgnoreVisit(s,{el:i,event:e}))return;if(this.navigating&&r===this.visit.to.url)return void e.preventDefault();const o=this.createVisit({to:r,hash:n,el:i,event:e});e.metaKey||e.ctrlKey||e.shiftKey||e.altKey?this.hooks.callSync("link:newtab",o,{href:s}):e.button===0&&this.hooks.callSync("link:click",o,{el:i,event:e},()=>{var a;const l=(a=o.from.url)!=null?a:"";e.preventDefault(),r&&r!==l?this.isSameResolvedUrl(r,l)||this.performNavigation(o):n?this.hooks.callSync("link:anchor",o,{hash:n},()=>{Ht(r+n),this.scrollToContent(o)}):this.hooks.callSync("link:self",o,void 0,()=>{this.options.linkToSelf==="navigate"?this.performNavigation(o):(Ht(r),this.scrollToContent(o))})})}handlePopState(e){var i,s,r,n;const o=(i=(s=e.state)==null?void 0:s.url)!=null?i:window.location.href;if(this.options.skipPopStateHandling(e)||this.isSameResolvedUrl(zt(),this.location.url))return;const{url:a,hash:l}=nt.fromUrl(o),h=this.createVisit({to:a,hash:l,event:e});h.history.popstate=!0;const c=(r=(n=e.state)==null?void 0:n.index)!=null?r:0;c&&c!==this.currentHistoryIndex&&(h.history.direction=c-this.currentHistoryIndex>0?"forwards":"backwards",this.currentHistoryIndex=c),h.animation.animate=!1,h.scroll.reset=!1,h.scroll.target=!1,this.options.animateHistoryBrowsing&&(h.animation.animate=!0,h.scroll.reset=!0),this.hooks.callSync("history:popstate",h,{event:e},()=>{this.performNavigation(h)})}triggerWillOpenNewWindow(e){return!!e.matches('[download], [target="_blank"]')}}var dr="1.1.20";function Xi(t,e,i){return Math.max(t,Math.min(e,i))}function fr(t,e,i){return(1-i)*t+i*e}function _r(t,e,i,s){return fr(t,e,1-Math.exp(-i*s))}function pr(t,e){return(t%e+e)%e}var mr=class{constructor(){T(this,"isRunning",!1);T(this,"value",0);T(this,"from",0);T(this,"to",0);T(this,"currentTime",0);T(this,"lerp");T(this,"duration");T(this,"easing");T(this,"onUpdate")}advance(t){var i;if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=t;const s=Xi(0,this.currentTime/this.duration,1);e=s>=1;const r=e?1:this.easing(s);this.value=this.from+(this.to-this.from)*r}else this.lerp?(this.value=_r(this.value,this.to,this.lerp*60,t),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),(i=this.onUpdate)==null||i.call(this,this.value,e)}stop(){this.isRunning=!1}fromTo(t,e,{lerp:i,duration:s,easing:r,onStart:n,onUpdate:o}){this.from=this.value=t,this.to=e,this.lerp=i,this.duration=s,this.easing=r,this.currentTime=0,this.isRunning=!0,n==null||n(),this.onUpdate=o}};function vr(t,e){let i;return function(...s){let r=this;clearTimeout(i),i=setTimeout(()=>{i=void 0,t.apply(r,s)},e)}}var gr=class{constructor(t,e,{autoResize:i=!0,debounce:s=250}={}){T(this,"width",0);T(this,"height",0);T(this,"scrollHeight",0);T(this,"scrollWidth",0);T(this,"debouncedResize");T(this,"wrapperResizeObserver");T(this,"contentResizeObserver");T(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});T(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});T(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=t,this.content=e,i&&(this.debouncedResize=vr(this.resize,s),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var t,e;(t=this.wrapperResizeObserver)==null||t.disconnect(),(e=this.contentResizeObserver)==null||e.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},Vi=class{constructor(){T(this,"events",{})}emit(e,...i){var r;let s=this.events[e]||[];for(let n=0,o=s.length;n<o;n++)(r=s[n])==null||r.call(s,...i)}on(e,i){var s;return(s=this.events[e])!=null&&s.push(i)||(this.events[e]=[i]),()=>{var r;this.events[e]=(r=this.events[e])==null?void 0:r.filter(n=>i!==n)}}off(e,i){var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(r=>i!==r)}destroy(){this.events={}}},hi=100/6,_t={passive:!1},yr=class{constructor(t,e={wheelMultiplier:1,touchMultiplier:1}){T(this,"touchStart",{x:0,y:0});T(this,"lastDelta",{x:0,y:0});T(this,"window",{width:0,height:0});T(this,"emitter",new Vi);T(this,"onTouchStart",t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:t})});T(this,"onTouchMove",t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t,s=-(e-this.touchStart.x)*this.options.touchMultiplier,r=-(i-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:s,y:r},this.emitter.emit("scroll",{deltaX:s,deltaY:r,event:t})});T(this,"onTouchEnd",t=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:t})});T(this,"onWheel",t=>{let{deltaX:e,deltaY:i,deltaMode:s}=t;const r=s===1?hi:s===2?this.window.width:1,n=s===1?hi:s===2?this.window.height:1;e*=r,i*=n,e*=this.options.wheelMultiplier,i*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:i,event:t})});T(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=t,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,_t),this.element.addEventListener("touchstart",this.onTouchStart,_t),this.element.addEventListener("touchmove",this.onTouchMove,_t),this.element.addEventListener("touchend",this.onTouchEnd,_t)}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,_t),this.element.removeEventListener("touchstart",this.onTouchStart,_t),this.element.removeEventListener("touchmove",this.onTouchMove,_t),this.element.removeEventListener("touchend",this.onTouchEnd,_t)}},Sr=class{constructor({wrapper:t=window,content:e=document.documentElement,eventsTarget:i=t,smoothWheel:s=!0,syncTouch:r=!1,syncTouchLerp:n=.075,touchInertiaMultiplier:o=35,duration:a,easing:l=L=>Math.min(1,1.001-Math.pow(2,-10*L)),lerp:h=.1,infinite:c=!1,orientation:f="vertical",gestureOrientation:y="vertical",touchMultiplier:g=1,wheelMultiplier:E=1,autoResize:d=!0,prevent:u,virtualScroll:v,overscroll:_=!0,autoRaf:w=!1,anchors:S=!1,__experimental__naiveDimensions:I=!1}={}){T(this,"_isScrolling",!1);T(this,"_isStopped",!1);T(this,"_isLocked",!1);T(this,"_preventNextNativeScrollEvent",!1);T(this,"_resetVelocityTimeout",null);T(this,"__rafID",null);T(this,"isTouching");T(this,"time",0);T(this,"userData",{});T(this,"lastVelocity",0);T(this,"velocity",0);T(this,"direction",0);T(this,"options");T(this,"targetScroll");T(this,"animatedScroll");T(this,"animate",new mr);T(this,"emitter",new Vi);T(this,"dimensions");T(this,"virtualScroll");T(this,"onScrollEnd",t=>{t instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&t.stopPropagation()});T(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});T(this,"onClick",t=>{const i=t.composedPath().find(s=>{var r;return s instanceof HTMLAnchorElement&&((r=s.getAttribute("href"))==null?void 0:r.startsWith("#"))});if(i){const s=i.getAttribute("href");if(s){const r=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0;this.scrollTo(s,r)}}});T(this,"onPointerDown",t=>{t.button===1&&this.reset()});T(this,"onVirtualScroll",t=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(t)===!1)return;const{deltaX:e,deltaY:i,event:s}=t;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:i,event:s}),s.ctrlKey||s.lenisStopPropagation)return;const r=s.type.includes("touch"),n=s.type.includes("wheel");this.isTouching=s.type==="touchstart"||s.type==="touchmove";const o=e===0&&i===0;if(this.options.syncTouch&&r&&s.type==="touchstart"&&o&&!this.isStopped&&!this.isLocked){this.reset();return}const l=this.options.gestureOrientation==="vertical"&&i===0||this.options.gestureOrientation==="horizontal"&&e===0;if(o||l)return;let h=s.composedPath();h=h.slice(0,h.indexOf(this.rootElement));const c=this.options.prevent;if(h.find(u=>{var v,_,w;return u instanceof HTMLElement&&(typeof c=="function"&&(c==null?void 0:c(u))||((v=u.hasAttribute)==null?void 0:v.call(u,"data-lenis-prevent"))||r&&((_=u.hasAttribute)==null?void 0:_.call(u,"data-lenis-prevent-touch"))||n&&((w=u.hasAttribute)==null?void 0:w.call(u,"data-lenis-prevent-wheel")))}))return;if(this.isStopped||this.isLocked){s.preventDefault();return}if(!(this.options.syncTouch&&r||this.options.smoothWheel&&n)){this.isScrolling="native",this.animate.stop(),s.lenisStopPropagation=!0;return}let y=i;this.options.gestureOrientation==="both"?y=Math.abs(i)>Math.abs(e)?i:e:this.options.gestureOrientation==="horizontal"&&(y=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&i>0||this.animatedScroll===this.limit&&i<0))&&(s.lenisStopPropagation=!0),s.preventDefault();const g=r&&this.options.syncTouch,d=r&&s.type==="touchend"&&Math.abs(y)>5;d&&(y=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+y,Nt({programmatic:!1},g?{lerp:d?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))});T(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const t=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-t,this.direction=Math.sign(this.animatedScroll-t),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});T(this,"raf",t=>{const e=t-(this.time||t);this.time=t,this.animate.advance(e*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=dr,(!t||t===document.documentElement)&&(t=window),this.options={wrapper:t,content:e,eventsTarget:i,smoothWheel:s,syncTouch:r,syncTouchLerp:n,touchInertiaMultiplier:o,duration:a,easing:l,lerp:h,infinite:c,gestureOrientation:y,orientation:f,touchMultiplier:g,wheelMultiplier:E,autoResize:d,prevent:u,virtualScroll:v,overscroll:_,autoRaf:w,anchors:S,__experimental__naiveDimensions:I},this.dimensions=new gr(t,e,{autoResize:d}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new yr(i,{touchMultiplier:g,wheelMultiplier:E}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.off(t,e)}setScroll(t){this.isHorizontal?this.options.wrapper.scrollTo({left:t,behavior:"instant"}):this.options.wrapper.scrollTo({top:t,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.reset(),this.isStopped=!1)}stop(){this.isStopped||(this.reset(),this.isStopped=!0)}scrollTo(t,{offset:e=0,immediate:i=!1,lock:s=!1,duration:r=this.options.duration,easing:n=this.options.easing,lerp:o=this.options.lerp,onStart:a,onComplete:l,force:h=!1,programmatic:c=!0,userData:f}={}){if(!((this.isStopped||this.isLocked)&&!h)){if(typeof t=="string"&&["top","left","start"].includes(t))t=0;else if(typeof t=="string"&&["bottom","right","end"].includes(t))t=this.limit;else{let y;if(typeof t=="string"?y=document.querySelector(t):t instanceof HTMLElement&&(t!=null&&t.nodeType)&&(y=t),y){if(this.options.wrapper!==window){const E=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?E.left:E.top}const g=y.getBoundingClientRect();t=(this.isHorizontal?g.left:g.top)+this.animatedScroll}}if(typeof t=="number"){if(t+=e,t=Math.round(t),this.options.infinite?c&&(this.targetScroll=this.animatedScroll=this.scroll):t=Xi(0,t,this.limit),t===this.targetScroll){a==null||a(this),l==null||l(this);return}if(this.userData=f!=null?f:{},i){this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}c||(this.targetScroll=t),this.animate.fromTo(this.animatedScroll,t,{duration:r,easing:n,lerp:o,onStart:()=>{s&&(this.isLocked=!0),this.isScrolling="smooth",a==null||a(this)},onUpdate:(y,g)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=y-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=y,this.setScroll(this.scroll),c&&(this.targetScroll=y),g||this.emit(),g&&(this.reset(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){var e,i;const t=this.options.wrapper;return this.isHorizontal?(e=t.scrollX)!=null?e:t.scrollLeft:(i=t.scrollY)!=null?i:t.scrollTop}get scroll(){return this.options.infinite?pr(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(t){this._isScrolling!==t&&(this._isScrolling=t,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(t){this._isStopped!==t&&(this._isStopped=t,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(t){this._isLocked!==t&&(this._isLocked=t,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let t="lenis";return this.isStopped&&(t+=" lenis-stopped"),this.isLocked&&(t+=" lenis-locked"),this.isScrolling&&(t+=" lenis-scrolling"),this.isScrolling==="smooth"&&(t+=" lenis-smooth"),t}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ze.apply(null,arguments)}class ci{constructor({scrollElements:e,rootMargin:i="-1px -1px -1px -1px",IORaf:s}){this.scrollElements=void 0,this.rootMargin=void 0,this.IORaf=void 0,this.observer=void 0,this.scrollElements=e,this.rootMargin=i,this.IORaf=s,this._init()}_init(){this.observer=new IntersectionObserver(e=>{e.forEach(i=>{const s=this.scrollElements.find(r=>r.$el===i.target);i.isIntersecting?(s&&(s.isAlreadyIntersected=!0),this._setInview(i)):s&&s.isAlreadyIntersected&&this._setOutOfView(i)})},{rootMargin:this.rootMargin});for(const e of this.scrollElements)this.observe(e.$el)}destroy(){this.observer.disconnect()}observe(e){e&&this.observer.observe(e)}unobserve(e){e&&this.observer.unobserve(e)}_setInview(e){const i=this.scrollElements.find(s=>s.$el===e.target);this.IORaf&&(i==null||i.setInteractivityOn()),!this.IORaf&&(i==null||i.setInview())}_setOutOfView(e){const i=this.scrollElements.find(s=>s.$el===e.target);this.IORaf&&(i==null||i.setInteractivityOff()),!this.IORaf&&(i==null||i.setOutOfView()),i!=null&&i.attributes.scrollRepeat||this.IORaf||this.unobserve(e.target)}}function ui(t,e,i,s,r){return i+((r-t)/(e-t)*(s-i)||0)}function di(t,e){return t.reduce((i,s)=>Math.abs(s-e)<Math.abs(i-e)?s:i)}class wr{constructor({$el:e,id:i,modularInstance:s,subscribeElementUpdateFn:r,unsubscribeElementUpdateFn:n,needRaf:o,scrollOrientation:a}){var l,h,c,f,y,g;this.$el=void 0,this.id=void 0,this.needRaf=void 0,this.attributes=void 0,this.scrollOrientation=void 0,this.isAlreadyIntersected=void 0,this.intersection=void 0,this.metrics=void 0,this.currentScroll=void 0,this.translateValue=void 0,this.progress=void 0,this.lastProgress=void 0,this.modularInstance=void 0,this.progressModularModules=void 0,this.isInview=void 0,this.isInteractive=void 0,this.isInFold=void 0,this.isFirstResize=void 0,this.subscribeElementUpdateFn=void 0,this.unsubscribeElementUpdateFn=void 0,this.$el=e,this.id=i,this.needRaf=o,this.scrollOrientation=a,this.modularInstance=s,this.subscribeElementUpdateFn=r,this.unsubscribeElementUpdateFn=n,this.attributes={scrollClass:(l=this.$el.dataset.scrollClass)!=null?l:"is-inview",scrollOffset:(h=this.$el.dataset.scrollOffset)!=null?h:"0,0",scrollPosition:(c=this.$el.dataset.scrollPosition)!=null?c:"start,end",scrollModuleProgress:this.$el.dataset.scrollModuleProgress!=null,scrollCssProgress:this.$el.dataset.scrollCssProgress!=null,scrollEventProgress:(f=this.$el.dataset.scrollEventProgress)!=null?f:null,scrollSpeed:this.$el.dataset.scrollSpeed!=null?parseFloat(this.$el.dataset.scrollSpeed):null,scrollParallaxSideways:this.$el.dataset.scrollParallaxSideways!=null,scrollParallaxClamp:(y=this.$el.dataset.scrollParallaxClamp)!=null?y:null,scrollRepeat:this.$el.dataset.scrollRepeat!=null,scrollCall:(g=this.$el.dataset.scrollCall)!=null?g:null,scrollCallSelf:this.$el.dataset.scrollCallSelf!=null,scrollIgnoreFold:this.$el.dataset.scrollIgnoreFold!=null,scrollEnableTouchSpeed:this.$el.dataset.scrollEnableTouchSpeed!=null},this.intersection={start:0,end:0},this.metrics={offsetStart:0,offsetEnd:0,bcr:{}},this.currentScroll=this.scrollOrientation==="vertical"?window.scrollY:window.scrollX,this.translateValue=0,this.progress=0,this.lastProgress=null,this.progressModularModules=[],this.isInview=!1,this.isInteractive=!1,this.isAlreadyIntersected=!1,this.isInFold=!1,this.isFirstResize=!0,this._init()}_init(){this.needRaf&&(this.modularInstance&&this.attributes.scrollModuleProgress&&this._getProgressModularModules(),this._resize())}onResize({currentScroll:e}){this.currentScroll=e,this._resize()}onRender({currentScroll:e,smooth:i}){const s=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth;if(this.currentScroll=e,this._computeProgress(),this.attributes.scrollSpeed&&!isNaN(this.attributes.scrollSpeed))if(this.attributes.scrollEnableTouchSpeed||i){if(this.isInFold){const r=Math.max(0,this.progress);this.translateValue=r*s*this.attributes.scrollSpeed*-1}else{let r=ui(0,1,-1,1,this.progress);switch(this.attributes.scrollParallaxClamp){case"+":r=Math.max(r,0);break;case"-":r=Math.min(r,0)}this.translateValue=r*s*this.attributes.scrollSpeed*-1}this.$el.style.transform=`translate3d(${this.scrollOrientation==="vertical"?this.attributes.scrollParallaxSideways?`${this.translateValue}px, 0`:`0, ${this.translateValue}px`:this.attributes.scrollParallaxSideways?`0, ${this.translateValue}px`:`${this.translateValue}px, 0`}, 0)`}else this.translateValue&&(this.$el.style.transform="translate3d(0, 0, 0)"),this.translateValue=0}setInview(){if(this.isInview)return;this.isInview=!0,this.$el.classList.add(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("enter",e)}setOutOfView(){if(!this.isInview||!this.attributes.scrollRepeat)return;this.isInview=!1,this.$el.classList.remove(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("leave",e)}setInteractivityOn(){this.isInteractive||(this.isInteractive=!0,this.subscribeElementUpdateFn(this))}setInteractivityOff(){this.isInteractive&&(this.isInteractive=!1,this.unsubscribeElementUpdateFn(this),this.lastProgress!=null&&this._computeProgress(di([0,1],this.lastProgress)))}_resize(){this.metrics.bcr=this.$el.getBoundingClientRect(),this._computeMetrics(),this._computeIntersection(),this.isFirstResize&&(this.isFirstResize=!1,this.isInFold&&this.setInview())}_computeMetrics(){const{top:e,left:i,height:s,width:r}=this.metrics.bcr,n=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,o=this.scrollOrientation==="vertical"?s:r;this.metrics.offsetStart=this.currentScroll+(this.scrollOrientation==="vertical"?e:i)-this.translateValue,this.metrics.offsetEnd=this.metrics.offsetStart+o,this.isInFold=this.metrics.offsetStart<n&&!this.attributes.scrollIgnoreFold}_computeIntersection(){const e=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,i=this.scrollOrientation==="vertical"?this.metrics.bcr.height:this.metrics.bcr.width,s=this.attributes.scrollOffset.split(","),r=s[0]!=null?s[0].trim():"0",n=s[1]!=null?s[1].trim():"0",o=this.attributes.scrollPosition.split(",");let a=o[0]!=null?o[0].trim():"start";const l=o[1]!=null?o[1].trim():"end",h=r.includes("%")?e*parseInt(r.replace("%","").trim())*.01:parseInt(r),c=n.includes("%")?e*parseInt(n.replace("%","").trim())*.01:parseInt(n);switch(this.isInFold&&(a="fold"),a){case"start":default:this.intersection.start=this.metrics.offsetStart-e+h;break;case"middle":this.intersection.start=this.metrics.offsetStart-e+h+.5*i;break;case"end":this.intersection.start=this.metrics.offsetStart-e+h+i;break;case"fold":this.intersection.start=0}switch(l){case"start":this.intersection.end=this.metrics.offsetStart-c;break;case"middle":this.intersection.end=this.metrics.offsetStart-c+.5*i;break;default:this.intersection.end=this.metrics.offsetStart-c+i}if(this.intersection.end<=this.intersection.start)switch(l){case"start":default:this.intersection.end=this.intersection.start+1;break;case"middle":this.intersection.end=this.intersection.start+.5*i;break;case"end":this.intersection.end=this.intersection.start+i}}_computeProgress(e){const i=e!=null?e:(s=ui(this.intersection.start,this.intersection.end,0,1,this.currentScroll))<0?0:s>1?1:s;var s;if(this.progress=i,i!=this.lastProgress){if(this.lastProgress=i,this.attributes.scrollCssProgress&&this._setCssProgress(i),this.attributes.scrollEventProgress&&this._setCustomEventProgress(i),this.attributes.scrollModuleProgress)for(const r of this.progressModularModules)this.modularInstance&&this.modularInstance.call("onScrollProgress",i,r.moduleName,r.moduleId);i>0&&i<1&&this.setInview(),i===0&&this.setOutOfView(),i===1&&this.setOutOfView()}}_setCssProgress(e=0){this.$el.style.setProperty("--progress",e.toString())}_setCustomEventProgress(e=0){const i=this.attributes.scrollEventProgress;if(!i)return;const s=new CustomEvent(i,{detail:{target:this.$el,progress:e}});window.dispatchEvent(s)}_getProgressModularModules(){if(!this.modularInstance)return;const e=Object.keys(this.$el.dataset).filter(s=>s.includes("module")),i=Object.entries(this.modularInstance.modules);if(e.length)for(const s of e){const r=this.$el.dataset[s];if(!r)return;for(const n of i){const[o,a]=n;r in a&&this.progressModularModules.push({moduleName:o,moduleId:r})}}}_getScrollCallFrom(){const e=di([this.intersection.start,this.intersection.end],this.currentScroll);return this.intersection.start===e?"start":"end"}_dispatchCall(e,i){var s,r;const n=(s=this.attributes.scrollCall)==null?void 0:s.split(","),o=(r=this.attributes)==null?void 0:r.scrollCallSelf;if(n&&n.length>1){var a;const[l,h,c]=n;let f;f=o?this.$el.dataset[`module${h.trim()}`]:c,this.modularInstance&&this.modularInstance.call(l.trim(),{target:this.$el,way:e,from:i},h.trim(),(a=f)==null?void 0:a.trim())}else if(n){const[l]=n,h=new CustomEvent(l,{detail:{target:this.$el,way:e,from:i}});window.dispatchEvent(h)}}}const Er=["scrollOffset","scrollPosition","scrollModuleProgress","scrollCssProgress","scrollEventProgress","scrollSpeed"];class br{constructor({$el:e,modularInstance:i,triggerRootMargin:s,rafRootMargin:r,scrollOrientation:n}){this.$scrollContainer=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.scrollElements=void 0,this.triggeredScrollElements=void 0,this.RAFScrollElements=void 0,this.scrollElementsToUpdate=void 0,this.IOTriggerInstance=void 0,this.IORafInstance=void 0,this.scrollOrientation=void 0,e?(this.$scrollContainer=e,this.modularInstance=i,this.scrollOrientation=n,this.triggerRootMargin=s!=null?s:"-1px -1px -1px -1px",this.rafRootMargin=r!=null?r:"100% 100% 100% 100%",this.scrollElements=[],this.triggeredScrollElements=[],this.RAFScrollElements=[],this.scrollElementsToUpdate=[],this._init()):console.error("Please provide a DOM Element as scrollContainer")}_init(){const e=this.$scrollContainer.querySelectorAll("[data-scroll]"),i=Array.from(e);this._subscribeScrollElements(i),this.IOTriggerInstance=new ci({scrollElements:[...this.triggeredScrollElements],rootMargin:this.triggerRootMargin,IORaf:!1}),this.IORafInstance=new ci({scrollElements:[...this.RAFScrollElements],rootMargin:this.rafRootMargin,IORaf:!0})}destroy(){this.IOTriggerInstance.destroy(),this.IORafInstance.destroy(),this._unsubscribeAllScrollElements()}onResize({currentScroll:e}){for(const i of this.RAFScrollElements)i.onResize({currentScroll:e})}onRender({currentScroll:e,smooth:i}){for(const s of this.scrollElementsToUpdate)s.onRender({currentScroll:e,smooth:i})}removeScrollElements(e){const i=e.querySelectorAll("[data-scroll]");if(i.length){for(let s=0;s<this.triggeredScrollElements.length;s++){const r=this.triggeredScrollElements[s];Array.from(i).indexOf(r.$el)>-1&&(this.IOTriggerInstance.unobserve(r.$el),this.triggeredScrollElements.splice(s,1))}for(let s=0;s<this.RAFScrollElements.length;s++){const r=this.RAFScrollElements[s];Array.from(i).indexOf(r.$el)>-1&&(this.IORafInstance.unobserve(r.$el),this.RAFScrollElements.splice(s,1))}i.forEach(s=>{const r=this.scrollElementsToUpdate.find(o=>o.$el===s),n=this.scrollElements.find(o=>o.$el===s);r&&this._unsubscribeElementUpdate(r),n&&(this.scrollElements=this.scrollElements.filter(o=>o.id!=n.id))})}}addScrollElements(e){const i=e.querySelectorAll("[data-scroll]"),s=[];this.scrollElements.forEach(o=>{s.push(o.id)});const r=Math.max(...s,0)+1,n=Array.from(i);this._subscribeScrollElements(n,r,!0)}_subscribeScrollElements(e,i=0,s=!1){for(let r=0;r<e.length;r++){const n=e[r],o=this._checkRafNeeded(n),a=new wr({$el:n,id:i+r,scrollOrientation:this.scrollOrientation,modularInstance:this.modularInstance,subscribeElementUpdateFn:this._subscribeElementUpdate.bind(this),unsubscribeElementUpdateFn:this._unsubscribeElementUpdate.bind(this),needRaf:o});this.scrollElements.push(a),o?(this.RAFScrollElements.push(a),s&&(this.IORafInstance.scrollElements.push(a),this.IORafInstance.observe(a.$el))):(this.triggeredScrollElements.push(a),s&&(this.IOTriggerInstance.scrollElements.push(a),this.IOTriggerInstance.observe(a.$el)))}}_unsubscribeAllScrollElements(){this.scrollElements=[],this.RAFScrollElements=[],this.triggeredScrollElements=[],this.scrollElementsToUpdate=[]}_subscribeElementUpdate(e){this.scrollElementsToUpdate.push(e)}_unsubscribeElementUpdate(e){this.scrollElementsToUpdate=this.scrollElementsToUpdate.filter(i=>i.id!=e.id)}_checkRafNeeded(e){let i=[...Er];const s=r=>{i=i.filter(n=>n!=r)};if(e.dataset.scrollOffset){if(e.dataset.scrollOffset.split(",").map(r=>r.replace("%","").trim()).join(",")!="0,0")return!0;s("scrollOffset")}else s("scrollOffset");if(e.dataset.scrollPosition){if(e.dataset.scrollPosition.trim()!="top,bottom")return!0;s("scrollPosition")}else s("scrollPosition");if(e.dataset.scrollSpeed&&!isNaN(parseFloat(e.dataset.scrollSpeed)))return!0;s("scrollSpeed");for(const r of i)if(r in e.dataset)return!0;return!1}}class Tr{constructor({resizeElements:e,resizeCallback:i=()=>{}}){this.$resizeElements=void 0,this.isFirstObserve=void 0,this.observer=void 0,this.resizeCallback=void 0,this.$resizeElements=e,this.resizeCallback=i,this.isFirstObserve=!0,this._init()}_init(){this.observer=new ResizeObserver(e=>{var i;!this.isFirstObserve&&((i=this.resizeCallback)==null||i.call(this)),this.isFirstObserve=!1});for(const e of this.$resizeElements)this.observer.observe(e)}destroy(){this.observer.disconnect()}}class Ir{constructor({lenisOptions:e={},modularInstance:i,triggerRootMargin:s,rafRootMargin:r,autoResize:n=!0,autoStart:o=!0,scrollCallback:a=()=>{},initCustomTicker:l,destroyCustomTicker:h}={}){this.rafPlaying=void 0,this.lenisInstance=void 0,this.coreInstance=void 0,this.lenisOptions=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.rafInstance=void 0,this.autoResize=void 0,this.autoStart=void 0,this.ROInstance=void 0,this.initCustomTicker=void 0,this.destroyCustomTicker=void 0,this._onRenderBind=void 0,this._onResizeBind=void 0,this._onScrollToBind=void 0;for(const[c]of Object.entries(e))["wrapper","content","infinite"].includes(c)&&console.warn(`Warning: Key "${c}" is not possible to edit in Locomotive Scroll.`);Object.assign(this,{lenisOptions:e,modularInstance:i,triggerRootMargin:s,rafRootMargin:r,autoResize:n,autoStart:o,scrollCallback:a,initCustomTicker:l,destroyCustomTicker:h}),this._onRenderBind=this._onRender.bind(this),this._onScrollToBind=this._onScrollTo.bind(this),this._onResizeBind=this._onResize.bind(this),this.rafPlaying=!1,this._init()}_init(){var e;this.lenisInstance=new Sr(ze({},this.lenisOptions,{wrapper:window,content:document.documentElement,infinite:!1})),(e=this.lenisInstance)==null||e.on("scroll",this.scrollCallback),document.documentElement.setAttribute("data-scroll-orientation",this.lenisInstance.options.orientation),requestAnimationFrame(()=>{this.coreInstance=new br({$el:this.lenisInstance.rootElement,modularInstance:this.modularInstance,triggerRootMargin:this.triggerRootMargin,rafRootMargin:this.rafRootMargin,scrollOrientation:this.lenisInstance.options.orientation}),this._bindEvents(),this.initCustomTicker&&!this.destroyCustomTicker?console.warn("initCustomTicker callback is declared, but destroyCustomTicker is not. Please pay attention. It could cause trouble."):!this.initCustomTicker&&this.destroyCustomTicker&&console.warn("destroyCustomTicker callback is declared, but initCustomTicker is not. Please pay attention. It could cause trouble."),this.autoStart&&this.start()})}destroy(){var e;this.stop(),this._unbindEvents(),this.lenisInstance.destroy(),(e=this.coreInstance)==null||e.destroy(),requestAnimationFrame(()=>{var i;(i=this.coreInstance)==null||i.destroy()})}_bindEvents(){this._bindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance=new Tr({resizeElements:[document.body],resizeCallback:this._onResizeBind}):window.addEventListener("resize",this._onResizeBind))}_unbindEvents(){this._unbindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance&&this.ROInstance.destroy():window.removeEventListener("resize",this._onResizeBind))}_bindScrollToEvents(e){const i=e||this.lenisInstance.rootElement,s=i==null?void 0:i.querySelectorAll("[data-scroll-to]");s!=null&&s.length&&s.forEach(r=>{r.addEventListener("click",this._onScrollToBind,!1)})}_unbindScrollToEvents(e){const i=e||this.lenisInstance.rootElement,s=i==null?void 0:i.querySelectorAll("[data-scroll-to]");s!=null&&s.length&&s.forEach(r=>{r.removeEventListener("click",this._onScrollToBind,!1)})}_onResize(){requestAnimationFrame(()=>{var e;(e=this.coreInstance)==null||e.onResize({currentScroll:this.lenisInstance.scroll})})}_onRender(){var e,i;(e=this.lenisInstance)==null||e.raf(Date.now()),(i=this.coreInstance)==null||i.onRender({currentScroll:this.lenisInstance.scroll,smooth:this.lenisInstance.options.smoothWheel})}_onScrollTo(e){var i;e.preventDefault();const s=(i=e.currentTarget)!=null?i:null;if(!s)return;const r=s.getAttribute("data-scroll-to-href")||s.getAttribute("href"),n=s.getAttribute("data-scroll-to-offset")||0,o=s.getAttribute("data-scroll-to-duration")||this.lenisInstance.options.duration;r&&this.scrollTo(r,{offset:typeof n=="string"?parseInt(n):n,duration:typeof o=="string"?parseInt(o):o})}start(){var e;this.rafPlaying||((e=this.lenisInstance)==null||e.start(),this.rafPlaying=!0,this.initCustomTicker?this.initCustomTicker(this._onRenderBind):this._raf())}stop(){var e;this.rafPlaying&&((e=this.lenisInstance)==null||e.stop(),this.rafPlaying=!1,this.destroyCustomTicker?this.destroyCustomTicker(this._onRenderBind):this.rafInstance&&cancelAnimationFrame(this.rafInstance))}removeScrollElements(e){var i;e?(this._unbindScrollToEvents(e),(i=this.coreInstance)==null||i.removeScrollElements(e)):console.error("Please provide a DOM Element as $oldContainer")}addScrollElements(e){var i;e?((i=this.coreInstance)==null||i.addScrollElements(e),requestAnimationFrame(()=>{this._bindScrollToEvents(e)})):console.error("Please provide a DOM Element as $newContainer")}resize(){this._onResizeBind()}scrollTo(e,i){var s;(s=this.lenisInstance)==null||s.scrollTo(e,{offset:i==null?void 0:i.offset,lerp:i==null?void 0:i.lerp,duration:i==null?void 0:i.duration,immediate:i==null?void 0:i.immediate,lock:i==null?void 0:i.lock,force:i==null?void 0:i.force,easing:i==null?void 0:i.easing,onComplete:i==null?void 0:i.onComplete})}_raf(){this._onRenderBind(),this.rafInstance=requestAnimationFrame(()=>this._raf())}}/**
* Muuri v0.9.5
* https://muuri.dev/
* Copyright (c) 2015-present, Haltu Oy
* Released under the MIT license
* https://github.com/haltu/muuri/blob/master/LICENSE.md
* @license MIT
*
* Muuri Packer
* Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri Ticker / Muuri Emitter / Muuri Dragger
* Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri AutoScroller
* Copyright (c) 2019-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*/var ve={},Tt=typeof Map=="function"?new Map:null,ot="swap",It="move",Ar="synchronize",vt="layoutStart",fi="layoutEnd",_i="layoutAbort",pi="add",mi="remove",kr="showStart",Dr="showEnd",Yt="hideStart",Rr="hideEnd",vi="filter",gi="sort",le="move",he="send",gt="beforeSend",ce="receive",ue="beforeReceive",Lr="dragInit",Cr="dragStart",Pr="dragMove",xr="dragScroll",Or="dragEnd",Mr="dragReleaseStart",qt="dragReleaseEnd",Nr="destroy",Bi="ontouchstart"in window,$e=!!window.PointerEvent,Ue=!!window.navigator.msPointerEnabled,Hr=16777216;function tt(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}tt.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this};tt.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];if(!i||!i.length)return this;for(var s;(s=i.indexOf(e))!==-1;)i.splice(s,1);return this};tt.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this};tt.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i=this._queue,s=i.length,r=arguments.length-1,n;r>3&&(n=[],n.push.apply(n,arguments),n.shift()),i.push.apply(i,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var o=s,a=i.length;o<a;o++)if(r===0?i[o]():r===1?i[o](arguments[1]):r===2?i[o](arguments[1],arguments[2]):r===3?i[o](arguments[1],arguments[2],arguments[3]):i[o].apply(null,n),!this._events)return this;return--this._counter,this._counter||(i.length=0),this};tt.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this};tt.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0};tt.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var ge=$e?"pointerout":Ue?"MSPointerOut":"",Fr=100;function St(t){ge&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}St.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(ge,this._onOut))};St.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(ge,this._onOut),this._resetData(),this._isActive=!1)};St.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null};St.prototype._onStart=function(t){t.pointerType!=="mouse"&&this._addBehaviour()};St.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,Fr))};St.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)};St.prototype.destroy=function(){ge&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var Ce=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],yi={};function ye(t,e){var i=yi[e]||"";if(i)return i;for(var s=e[0].toUpperCase()+e.slice(1),r=0;r<Ce.length;){if(i=Ce[r]?Ce[r]+s:e,i in t)return yi[e]=i,i;++r}return""}function Wi(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(i){}return t}var Se=window.navigator.userAgent.toLowerCase(),zr=Se.indexOf("edge")>-1,Yr=Se.indexOf("trident")>-1,qr=Se.indexOf("firefox")>-1,Xr=Se.indexOf("android")>-1,pt=Wi()?{passive:!0}:!1,$i="touchAction",ie=ye(document.documentElement.style,$i),Vr="auto";function m(t,e){this._element=t,this._emitter=new tt,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(zr||Yr)&&($e||Ue)&&(this._edgeHack=new St(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(Vr),t.addEventListener("dragstart",m._preventDefault,!1),t.addEventListener(m._inputEvents.start,this._onStart,pt)}m._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"};m._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"};m._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"};m._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"};m._inputEvents=function(){return Bi?m._touchEvents:$e?m._pointerEvents:Ue?m._msPointerEvents:m._mouseEvents}();m._emitter=new tt;m._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"};m._activeInstances=[];m._preventDefault=function(t){t.preventDefault&&t.cancelable!==!1&&t.preventDefault()};m._activateInstance=function(t){var e=m._activeInstances.indexOf(t);e>-1||(m._activeInstances.push(t),m._emitter.on(m._emitterEvents.move,t._onMove),m._emitter.on(m._emitterEvents.cancel,t._onCancel),m._emitter.on(m._emitterEvents.end,t._onEnd),m._activeInstances.length===1&&m._bindListeners())};m._deactivateInstance=function(t){var e=m._activeInstances.indexOf(t);e!==-1&&(m._activeInstances.splice(e,1),m._emitter.off(m._emitterEvents.move,t._onMove),m._emitter.off(m._emitterEvents.cancel,t._onCancel),m._emitter.off(m._emitterEvents.end,t._onEnd),m._activeInstances.length||m._unbindListeners())};m._bindListeners=function(){window.addEventListener(m._inputEvents.move,m._onMove,pt),window.addEventListener(m._inputEvents.end,m._onEnd,pt),m._inputEvents.cancel&&window.addEventListener(m._inputEvents.cancel,m._onCancel,pt)};m._unbindListeners=function(){window.removeEventListener(m._inputEvents.move,m._onMove,pt),window.removeEventListener(m._inputEvents.end,m._onEnd,pt),m._inputEvents.cancel&&window.removeEventListener(m._inputEvents.cancel,m._onCancel,pt)};m._getEventPointerId=function(t){return typeof t.pointerId=="number"?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1};m._getTouchById=function(t,e){if(typeof t.pointerId=="number")return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t};m._onMove=function(t){m._emitter.emit(m._emitterEvents.move,t)};m._onCancel=function(t){m._emitter.emit(m._emitterEvents.cancel,t)};m._onEnd=function(t){m._emitter.emit(m._emitterEvents.end,t)};m.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,m._deactivateInstance(this)};m.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===m._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===m._emitterEvents.start,isFinal:t===m._emitterEvents.end||t===m._emitterEvents.cancel,pointerType:e.pointerType||(e.touches?"touch":"mouse"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}};m.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))};m.prototype._getTrackedTouch=function(t){return this._pointerId===null?null:m._getTouchById(t,this._pointerId)};m.prototype._onStart=function(t){if(!this._isDestroyed&&this._pointerId===null&&(this._pointerId=m._getEventPointerId(t),this._pointerId!==null)){var e=this._getTrackedTouch(t);this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(m._emitterEvents.start,t),this._isActive&&m._activateInstance(this)}};m.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(m._emitterEvents.move,t))};m.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(m._emitterEvents.cancel,t),this._reset())};m.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(m._emitterEvents.end,t),this._reset())};m.prototype.isActive=function(){return this._isActive};m.prototype.setTouchAction=function(t){this._touchAction=t,ie&&(this._cssProps[ie]="",this._element.style[ie]=t),Bi&&(this._element.removeEventListener(m._touchEvents.start,m._preventDefault,!0),(this._element.style[ie]!==t||qr&&Xr)&&this._element.addEventListener(m._touchEvents.start,m._preventDefault,!0))};m.prototype.setCssProps=function(t){if(t){var e=this._cssProps,i=this._element,s,r;for(s in e)i.style[s]=e[s],delete e[s];for(s in t)if(t[s]){if(s===$i){this.setTouchAction(t[s]);continue}r=ye(i.style,s),r&&(e[r]="",i.style[r]=t[s])}}};m.prototype.getDeltaX=function(){return this._currentX-this._startX};m.prototype.getDeltaY=function(){return this._currentY-this._startY};m.prototype.getDistance=function(){var t=this.getDeltaX(),e=this.getDeltaY();return Math.sqrt(t*t+e*e)};m.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0};m.prototype.on=function(t,e){this._emitter.on(t,e)};m.prototype.off=function(t,e){this._emitter.off(t,e)};m.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(m._inputEvents.start,this._onStart,pt),t.removeEventListener("dragstart",m._preventDefault,!1),t.removeEventListener(m._touchEvents.start,m._preventDefault,!0);for(var e in this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var Br=1e3/60,Wr=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return this.setTimeout(function(){t(Date.now())},Br)}).bind(window);function we(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new Ge)}we.prototype._step=function(t){var e=this._lanes,i=this._stepQueue,s=this._stepCallbacks,r,n,o,a,l,h;for(this._nextStep=null,r=0;r<e.length;r++){for(a=e[r].queue,l=e[r].callbacks,h=e[r].indices,n=0;n<a.length;n++)o=a[n],o&&(i.push(o),s[o]=l[o],delete l[o],delete h[o]);a.length=0}for(r=0;r<i.length;r++)o=i[r],s[o]&&s[o](t),delete s[o];i.length=0};we.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nextStep=Wr(this._step))};we.prototype.remove=function(t,e){this._lanes[t].remove(e)};function Ge(){this.queue=[],this.indices={},this.callbacks={}}Ge.prototype.add=function(t,e){var i=this.indices[t];i!==void 0&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1};Ge.prototype.remove=function(t){var e=this.indices[t];e!==void 0&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var Ui="layoutRead",Gi="layoutWrite",ji="visibilityRead",Zi="visibilityWrite",Ki="dragStartRead",Qi="dragStartWrite",Ji="dragMoveRead",ts="dragMoveWrite",es="dragScrollRead",is="dragScrollWrite",ss="dragSortRead",rs="placeholderLayoutRead",ns="placeholderLayoutWrite",os="placeholderResizeWrite",as="autoScrollRead",ls="autoScrollWrite",hs="debounceRead",U=0,cs=1,G=2,C=new we(3);function $r(t,e,i){C.add(U,Ui+t,e),C.add(G,Gi+t,i)}function us(t){C.remove(U,Ui+t),C.remove(G,Gi+t)}function Ur(t,e,i){C.add(U,ji+t,e),C.add(G,Zi+t,i)}function ds(t){C.remove(U,ji+t),C.remove(G,Zi+t)}function Gr(t,e,i){C.add(U,Ki+t,e),C.add(G,Qi+t,i)}function fs(t){C.remove(U,Ki+t),C.remove(G,Qi+t)}function jr(t,e,i){C.add(U,Ji+t,e),C.add(G,ts+t,i)}function _s(t){C.remove(U,Ji+t),C.remove(G,ts+t)}function Zr(t,e,i){C.add(U,es+t,e),C.add(G,is+t,i)}function ps(t){C.remove(U,es+t),C.remove(G,is+t)}function Ee(t,e){C.add(cs,ss+t,e)}function Kr(t){C.remove(cs,ss+t)}function Qr(t,e,i){C.add(U,rs+t,e),C.add(G,ns+t,i)}function ms(t){C.remove(U,rs+t),C.remove(G,ns+t)}function Jr(t,e){C.add(G,os+t,e)}function tn(t){C.remove(G,os+t)}function vs(t,e){C.add(U,as,t),C.add(G,ls,e)}function en(){C.remove(U,as),C.remove(G,ls)}function sn(t,e){C.add(U,hs+t,e)}function rn(t){C.remove(U,hs+t)}var H=1,X=2,Ot=4,je=8,Xt=H|je,Vt=H|Ot,Bt=X|je,de=X|Ot,nn="function";function R(t){return typeof t===nn}var se=typeof WeakMap=="function"?new WeakMap:null;function K(t,e){var i=se&&se.get(t);return i||(i=window.getComputedStyle(t,null),se&&se.set(t,i)),i.getPropertyValue(e)}function J(t,e){return parseFloat(K(t,e))||0}var At=document.documentElement,on=document.body,re={value:0,offset:0};function gs(t){return t===window||t===At||t===on?window:t}function Wt(t){return t===window?t.pageXOffset:t.scrollLeft}function $t(t){return t===window?t.pageYOffset:t.scrollTop}function ys(t){return t===window?At.scrollWidth-At.clientWidth:t.scrollWidth-t.clientWidth}function Ss(t){return t===window?At.scrollHeight-At.clientHeight:t.scrollHeight-t.clientHeight}function ws(t,e){if(e=e||{},t===window)e.width=At.clientWidth,e.height=At.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),s=t.clientLeft||J(t,"border-left-width"),r=t.clientTop||J(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+s,e.right=e.left+e.width,e.top=i.top+r,e.bottom=e.top+e.height}return e}function Gt(t){return t._drag._getGrid()._settings.dragAutoScroll}function an(t){t._drag&&t._drag._prepareScroll()}function ln(t){if(!(!t._drag||!t._isActive)){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._left,e._top)}}function Ye(t,e,i,s){return re.value=Math.min(s/2,t),re.offset=Math.max(0,i+re.value*2+s*e-s)/2,re}function ut(){this.reset()}ut.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null};ut.prototype.hasReachedEnd=function(){return Ot&this.direction?this.value>=this.maxValue:this.value<=0};ut.prototype.computeCurrentScrollValue=function(){return this.value===null?H&this.direction?Wt(this.element):$t(this.element):Math.max(0,Math.min(this.value,this.maxValue))};ut.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=Ot&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))};ut.prototype.computeSpeed=function(){var t={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1};return function(e){var i=this.item,s=Gt(i).speed;return R(s)?(t.direction=this.direction,t.threshold=this.threshold,t.distance=this.distance,t.value=this.value,t.maxValue=this.maxValue,t.duration=this.duration,t.speed=this.speed,t.deltaTime=e,t.isEnding=this.isEnding,s(i,this.element,t)):s}}();ut.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value};ut.prototype.onStart=function(){var t=this.item,e=Gt(t).onStart;R(e)&&e(t,this.element,this.direction)};ut.prototype.onStop=function(){var t=this.item,e=Gt(t).onStop;R(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()};function Mt(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}Mt.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0};Mt.prototype.addRequest=function(t){H&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this};Mt.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))};Mt.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:Wt(this.element),this.scrollTop=this.requestY?this.requestY.value:$t(this.element)};Mt.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scrollTop=this.scrollTop))};function Ut(t,e){this.pool=[],this.createItem=t,this.releaseItem=e}Ut.prototype.pick=function(){return this.pool.pop()||this.createItem()};Ut.prototype.release=function(t){this.releaseItem(t),this.pool.indexOf(t)===-1&&this.pool.push(t)};Ut.prototype.reset=function(){this.pool.length=0};function hn(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function cn(t,e){if(!hn(t,e))return 0;var i=Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left),s=Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top);return i*s}function fe(t,e){var i=cn(t,e);if(!i)return 0;var s=Math.min(t.width,e.width)*Math.min(t.height,e.height);return i/s*100}var Es={width:0,height:0,left:0,right:0,top:0,bottom:0},bs={width:0,height:0,left:0,right:0,top:0,bottom:0};function P(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[H]={},this._requests[X]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Ut(function(){return new ut},function(t){t.reset()}),this._actionPool=new Ut(function(){return new Mt},function(t){t.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}P.AXIS_X=H;P.AXIS_Y=X;P.FORWARD=Ot;P.BACKWARD=je;P.LEFT=Xt;P.RIGHT=Vt;P.UP=Bt;P.DOWN=de;P.smoothSpeed=function(t,e,i){return function(s,r,n){var o=0;if(!n.isEnding)if(n.threshold>0){var a=n.threshold-Math.max(0,n.distance);o=t/n.threshold*a}else o=t;var l=n.speed,h=o;return l===o?h:l<o?(h=l+e*(n.deltaTime/1e3),Math.min(o,h)):(h=l-i*(n.deltaTime/1e3),Math.max(o,h))}};P.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(s,r,n,o,a,l,h){return e.left=l-i*.5,e.top=h-i*.5,e.width=i,e.height=i,e}};P.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))};P.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),vs(this._readTick,this._writeTick))};P.prototype._startTicking=function(){this._isTicking=!0,vs(this._readTick,this._writeTick)};P.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,en()};P.prototype._getItemHandleRect=function(t,e,i){var s=t._drag;if(e){var r=s._dragMoveEvent||s._dragStartEvent,n=e(t,s._clientX,s._clientY,t._width,t._height,r.clientX,r.clientY);i.left=n.left,i.top=n.top,i.width=n.width,i.height=n.height}else i.left=s._clientX,i.top=s._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i};P.prototype._requestItemScroll=function(t,e,i,s,r,n,o){var a=this._requests[e],l=a[t._id];l?(l.element!==i||l.direction!==s)&&l.reset():l=this._requestPool.pick(),l.item=t,l.element=i,l.direction=s,l.threshold=r,l.distance=n,l.maxValue=o,a[t._id]=l};P.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],s=i[t._id];s&&(s.action&&s.action.removeRequest(s),this._requestPool.release(s),delete i[t._id])};P.prototype._checkItemOverlap=function(t,e,i){var s=Gt(t),r=R(s.targets)?s.targets(t):s.targets,n=s.threshold,o=s.safeZone;if(!r||!r.length){e&&this._cancelItemScroll(t,H),i&&this._cancelItemScroll(t,X);return}var a=this._dragDirections[t._id],l=a[0],h=a[1];if(!l&&!h){e&&this._cancelItemScroll(t,H),i&&this._cancelItemScroll(t,X);return}for(var c=this._getItemHandleRect(t,s.handle,Es),f=bs,y=null,g=null,E=!0,d=!0,u=0,v=0,_=null,w=null,S=0,I=0,L=0,M=null,O=-1/0,D=0,et=0,F=null,V=0,it=0,B=null,Zt=-1/0,Qe=0,Je=0,ti=null,ei=0,ii=0,Ae=0;Ae<r.length;Ae++)y=r[Ae],E=e&&l&&y.axis!==X,d=i&&h&&y.axis!==H,v=y.priority||0,!((!E||v<O)&&(!d||v<Zt))&&(g=gs(y.element||y),I=E?ys(g):-1,L=d?Ss(g):-1,!(!I&&!L)&&(f=ws(g,f),u=fe(c,f),!(u<=0)&&(E&&v>=O&&I>0&&(v>O||u>et)&&(w=null,_=Ye(typeof y.threshold=="number"?y.threshold:n,o,c.width,f.width),l===Vt?(S=f.right+_.offset-c.right,S<=_.value&&Wt(g)<I&&(w=Vt)):l===Xt&&(S=c.left-(f.left-_.offset),S<=_.value&&Wt(g)>0&&(w=Xt)),w!==null&&(M=g,O=v,D=_.value,et=u,F=w,V=S,it=I)),d&&v>=Zt&&L>0&&(v>Zt||u>Je)&&(w=null,_=Ye(typeof y.threshold=="number"?y.threshold:n,o,c.height,f.height),h===de?(S=f.bottom+_.offset-c.bottom,S<=_.value&&$t(g)<L&&(w=de)):h===Bt&&(S=c.top-(f.top-_.offset),S<=_.value&&$t(g)>0&&(w=Bt)),w!==null&&(B=g,Zt=v,Qe=_.value,Je=u,ti=w,ei=S,ii=L)))));e&&(M?this._requestItemScroll(t,H,M,F,D,V,it):this._cancelItemScroll(t,H)),i&&(B?this._requestItemScroll(t,X,B,ti,Qe,ei,ii):this._cancelItemScroll(t,X))};P.prototype._updateScrollRequest=function(t){for(var e=t.item,i=Gt(e),s=R(i.targets)?i.targets(e):i.targets,r=s&&s.length||0,n=i.threshold,o=i.safeZone,a=this._getItemHandleRect(e,i.handle,Es),l=bs,h=null,c=null,f=!1,y=null,g=null,E=null,d=null,u=null,v=null,_=0;_<r;_++)if(h=s[_],c=gs(h.element||h),c===t.element){if(f=!!(H&t.direction),f){if(h.axis===X)continue}else if(h.axis===H)continue;if(u=f?ys(c):Ss(c),u<=0||(l=ws(c,l),y=fe(a,l),y<=0)||(g=Ye(typeof h.threshold=="number"?h.threshold:n,o,f?a.width:a.height,f?l.width:l.height),t.direction===Xt?E=a.left-(l.left-g.offset):t.direction===Vt?E=l.right+g.offset-a.right:t.direction===Bt?E=a.top-(l.top-g.offset):E=l.bottom+g.offset-a.bottom,E>g.value)||(d=f?Wt(c):$t(c),v=Ot&t.direction?d>=u:d<=0,v))break;return t.maxValue=u,t.threshold=g.value,t.distance=E,t.isEnding=!1,!0}return i.smoothStop===!0&&t.speed>0?(v===null&&(v=t.hasReachedEnd()),t.isEnding=!v):t.isEnding=!1,t.isEnding};P.prototype._updateRequests=function(){for(var t=this._items,e=this._requests[H],i=this._requests[X],s,r,n,o,a,l,h,c=0;c<t.length;c++)s=t[c],o=this._requestOverlapCheck[s._id],a=o>0&&this._tickTime-o>this._overlapCheckInterval,l=!0,r=e[s._id],r&&r.isActive&&(l=!this._updateScrollRequest(r),l&&(a=!0,this._cancelItemScroll(s,H))),h=!0,n=i[s._id],n&&n.isActive&&(h=!this._updateScrollRequest(n),h&&(a=!0,this._cancelItemScroll(s,X))),a&&(this._requestOverlapCheck[s._id]=0,this._checkItemOverlap(s,l,h))};P.prototype._requestAction=function(t,e){for(var i=this._actions,s=e===H,r=null,n=0;n<i.length;n++){if(r=i[n],t.element!==r.element){r=null;continue}if(s?r.requestX:r.requestY){this._cancelItemScroll(t.item,e);return}break}r||(r=this._actionPool.pick()),r.element=t.element,r.addRequest(t),t.tick(this._tickDeltaTime),i.push(r)};P.prototype._updateActions=function(){var t=this._items,e=this._requests,i=this._actions,s,r,n,o;for(o=0;o<t.length;o++)s=t[o]._id,r=e[H][s],n=e[X][s],r&&this._requestAction(r,H),n&&this._requestAction(n,X);for(o=0;o<i.length;o++)i[o].computeScrollValues()};P.prototype._applyActions=function(){var t=this._actions,e=this._items,i;if(t.length){for(i=0;i<t.length;i++)t[i].scroll(),this._actionPool.release(t[i]);for(t.length=0,i=0;i<e.length;i++)an(e[i]);for(i=0;i<e.length;i++)ln(e[i])}};P.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],s=t._drag._left,r=t._drag._top;if(e.length){var n=e[0],o=e[1];i[0]=s>n?Vt:s<n?Xt:i[0]||0,i[1]=r>o?de:r<o?Bt:i[1]||0}e[0]=s,e[1]=r};P.prototype.addItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);e===-1&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())}};P.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))};P.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(e!==-1){var i=t._id,s=this._requests[H][i];s&&(this._cancelItemScroll(t,H),delete this._requests[H][i]);var r=this._requests[X][i];r&&(this._cancelItemScroll(t,X),delete this._requests[X][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}};P.prototype.isItemScrollingX=function(t){var e=this._requests[H][t._id];return!!(e&&e.isActive)};P.prototype.isItemScrollingY=function(t){var e=this._requests[X][t._id];return!!(e&&e.isActive)};P.prototype.isItemScrolling=function(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)};P.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var kt=window.Element.prototype,un=kt.matches||kt.matchesSelector||kt.webkitMatchesSelector||kt.mozMatchesSelector||kt.msMatchesSelector||kt.oMatchesSelector||function(){return!1};function be(t,e){return un.call(t,e)}function Q(t,e){e&&(t.classList?t.classList.add(e):be(t,"."+e)||(t.className+=" "+e))}var Si=[],dn="number";function Ze(t,e,i){var s=typeof i===dn?i:-1;s<0&&(s=t.length-s+1),t.splice.apply(t,Si.concat(s,0,e)),Si.length=0}function Lt(t,e,i){var s=Math.max(0,t.length-1+(i||0));return e>s?s:e<0?Math.max(s+e+1,0):e}function Ts(t,e,i){if(!(t.length<2)){var s=Lt(t,e),r=Lt(t,i);s!==r&&t.splice(r,0,t.splice(s,1)[0])}}function Is(t,e,i){if(!(t.length<2)){var s=Lt(t,e),r=Lt(t,i),n;s!==r&&(n=t[s],t[s]=t[r],t[r]=n)}}var at=ye(document.documentElement.style,"transform")||"transform",fn=/([A-Z])/g,_n=/^(webkit-|moz-|ms-|o-)/,pn=/^(-m-s-)/;function qe(t){var e=t.replace(fn,"-$1").toLowerCase();return e=e.replace(_n,"-$1"),e=e.replace(pn,"-ms-"),e}var As=qe(at),mn="none",vn="inline",gn="none",yn="display";function Sn(t){var e=K(t,As);if(!e||e===mn)return!1;var i=K(t,yn);return!(i===vn||i===gn)}function Xe(t){for(var e=document,i=t||e;i&&i!==e&&K(i,"position")==="static"&&!Sn(i);)i=i.parentElement||e;return i}var Pe={},xe={},Et={};function wi(t,e){var i=e||{},s;return i.left=0,i.top=0,t===document||(i.left=window.pageXOffset||0,i.top=window.pageYOffset||0,t.self===window.self)||(s=t.getBoundingClientRect(),i.left+=s.left,i.top+=s.top,i.left+=J(t,"border-left-width"),i.top+=J(t,"border-top-width")),i}function Ct(t,e,i){return Et.left=0,Et.top=0,t===e||i&&(t=Xe(t),e=Xe(e),t===e)||(wi(t,Pe),wi(e,xe),Et.left=xe.left-Pe.left,Et.top=xe.top-Pe.top),Et}function Oe(t){return t==="auto"||t==="scroll"||t==="overlay"}function wn(t){return Oe(K(t,"overflow"))||Oe(K(t,"overflow-x"))||Oe(K(t,"overflow-y"))}function Ei(t,e){for(e=e||[];t&&t!==document;){if(t.getRootNode&&t instanceof DocumentFragment){t=t.getRootNode().host;continue}wn(t)&&e.push(t),t=t.parentNode}return e.push(window),e}var Dt={},En="none",bn=/^matrix3d/,Tn=/([^,]*,){4}/,In=/([^,]*,){12}/,An=/[^,]*,/;function ct(t){Dt.x=0,Dt.y=0;var e=K(t,As);if(!e||e===En)return Dt;var i=bn.test(e),s=e.replace(i?In:Tn,""),r=s.replace(An,"");return Dt.x=parseFloat(s)||0,Dt.y=parseFloat(r)||0,Dt}function $(t,e){e&&(t.classList?t.classList.remove(e):be(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()))}var kn=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,_e=0,Ve=1,pe=2,ks=Wi()?{passive:!0}:!1;function A(t){var e=t._element,i=t.getGrid(),s=i._settings;this._item=t,this._gridId=i._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=R(s.dragStartPredicate)?s.dragStartPredicate:A.defaultStartPredicate,this._startPredicateState=_e,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=s.dragHandle&&e.querySelector(s.dragHandle)||e,this._dragger=new m(this._handle,s.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}A.autoScroller=new P;A.defaultStartPredicate=function(t,e,i){var s=t._drag;if(e.isFirst&&e.srcEvent.button||!kn&&e.isFirst&&e.srcEvent.isTrusted===!0&&e.srcEvent.defaultPrevented===!1&&e.srcEvent.cancelable===!1)return!1;if(e.isFinal){s._finishStartPredicate(e);return}var r=s._startPredicateData;if(!r){var n=i||s._getGrid()._settings.dragStartPredicate||{};s._startPredicateData=r={distance:Math.max(n.distance,0)||0,delay:Math.max(n.delay,0)||0}}return r.delay&&(r.event=e,r.delayTimer||(r.delayTimer=window.setTimeout(function(){r.delay=0,s._resolveStartPredicate(r.event)&&(s._forceResolveStartPredicate(r.event),s._resetStartPredicate())},r.delay))),s._resolveStartPredicate(e)};A.defaultSortPredicate=function(){var t={},e={},i={},s=[],r=1,n=100;function o(a,l,h){var c=null,f=l._settings.dragSort,y=-1,g,E,d,u,v,_,w,S,I,L;if(f===!0?(s[0]=l,E=s):R(f)&&(E=f.call(l,a)),!E||!Array.isArray(E)||!E.length)return c;for(L=0;L<E.length;L++)if(d=E[L],!d._isDestroyed){for(d._updateBoundingRect(),_=Math.max(0,d._left),w=Math.max(0,d._top),S=Math.min(window.innerWidth,d._right),I=Math.min(window.innerHeight,d._bottom),u=d._element.parentNode;u&&u!==document&&u!==document.documentElement&&u!==document.body;){if(u.getRootNode&&u instanceof DocumentFragment){u=u.getRootNode().host;continue}if(K(u,"overflow")!=="visible"&&(v=u.getBoundingClientRect(),_=Math.max(_,v.left),w=Math.max(w,v.top),S=Math.min(S,v.right),I=Math.min(I,v.bottom)),K(u,"position")==="fixed")break;u=u.parentNode}_>=S||w>=I||(e.left=_,e.top=w,e.width=S-_,e.height=I-w,g=fe(t,e),g>h&&g>y&&(y=g,c=d))}return s.length=0,c}return function(a,l){var h=a._drag,c=h._getGrid(),f=l&&typeof l.threshold=="number"?l.threshold:50,y=l&&l.action===ot?ot:It,g=l&&l.migrateAction===ot?ot:It;f=Math.min(Math.max(f,r),n),t.width=a._width,t.height=a._height,t.left=h._clientX,t.top=h._clientY;var E=o(a,c,f);if(!E)return null;var d=a.getGrid()!==E,u=0,v=0,_=0,w=-1,S=!1,I,L,M;for(E===c?(t.left=h._gridX+a._marginLeft,t.top=h._gridY+a._marginTop):(E._updateBorders(1,0,1,0),u=E._left+E._borderLeft,v=E._top+E._borderTop),M=0;M<E._items.length;M++)I=E._items[M],!(!I._isActive||I===a)&&(S=!0,e.width=I._width,e.height=I._height,e.left=I._left+I._marginLeft+u,e.top=I._top+I._marginTop+v,L=fe(t,e),L>_&&(w=M,_=L));return d&&_<f&&(w=S?w:0,_=f),_>=f?(i.grid=E,i.index=w,i.action=d?g:y,i):null}}();A.prototype.stop=function(){if(this._isActive){if(this._isMigrating){this._finishMigration();return}var t=this._item,e=t._id;if(A.autoScroller.removeItem(t),fs(e),_s(e),ps(e),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var i=t._element,s=this._getGrid(),r=s._settings.itemDraggingClass;i.parentNode!==s._element&&(s._element.appendChild(i),t._setTranslate(this._gridX,this._gridY),r&&i.clientWidth),$(i,r)}this._reset()}};A.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(t===!0?this._handleSort():Ee(e._id,this._handleSort))};A.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),A.autoScroller.removeItem(this._item),this._isDestroyed=!0)};A.prototype._getGrid=function(){return ve[this._gridId]||null};A.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0};A.prototype._bindScrollListeners=function(){var t=this._getGrid()._element,e=this._container,i=this._scrollers,s,r;if(i.length=0,Ei(this._item._element.parentNode,i),e!==t)for(s=[],Ei(t,s),r=0;r<s.length;r++)i.indexOf(s[r])<0&&i.push(s[r]);for(r=0;r<i.length;r++)i[r].addEventListener("scroll",this._onScroll,ks)};A.prototype._unbindScrollListeners=function(){var t=this._scrollers,e;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,ks);t.length=0};A.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0};A.prototype._forceResolveStartPredicate=function(t){!this._isDestroyed&&this._startPredicateState===Ve&&(this._startPredicateState=pe,this._onStart(t))};A.prototype._finishStartPredicate=function(t){var e=this._item._element,i=Math.abs(t.deltaX)<2&&Math.abs(t.deltaY)<2&&t.deltaTime<200;this._resetStartPredicate(),i&&Dn(e)};A.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e};A.prototype._checkHeuristics=function(t,e){var i=this._getGrid()._settings.dragSortHeuristics,s=i.minDragDistance;if(s<=0)return this._blockedSortIndex=null,!0;var r=t-this._sortX2,n=e-this._sortY2,o=s>3&&i.minBounceBackAngle>0;if(o||(this._blockedSortIndex=null),Math.abs(r)>s||Math.abs(n)>s){if(o){var a=Math.atan2(r,n),l=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),h=Math.atan2(Math.sin(a-l),Math.cos(a-l));Math.abs(h)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1};A.prototype._resetStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)};A.prototype._handleSort=function(){if(this._isActive){var t=this._getGrid()._settings;if(!t.dragSort||!t.dragAutoScroll.sortDuringScroll&&A.autoScroller.isItemScrolling(this._item)){this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer));return}var e=this._checkHeuristics(this._gridX,this._gridY);if(!(!this._isSortNeeded&&!e)){var i=t.dragSortHeuristics.sortInterval;i<=0||this._isSortNeeded?(this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):this._sortTimer===void 0&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,i))}}};A.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,Ee(this._item._id,this._handleSort)};A.prototype._cancelSort=function(){this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),Kr(this._item._id)};A.prototype._finishSort=function(){var t=this._getGrid()._settings.dragSort,e=t&&(this._isSortNeeded||this._sortTimer!==void 0);this._cancelSort(),e&&this._checkOverlap()};A.prototype._checkOverlap=function(){if(this._isActive){var t=this._item,e=this._getGrid()._settings,i,s,r,n,o,a,l,h;R(e.dragSortPredicate)?i=e.dragSortPredicate(t,this._dragMoveEvent):i=A.defaultSortPredicate(t,e.dragSortPredicate),!(!i||typeof i.index!="number")&&(l=i.action===ot?ot:It,s=t.getGrid(),n=i.grid||s,h=s!==n,r=s._items.indexOf(t),o=Lt(n._items,i.index,h&&l===It?1:0),!(!h&&o===this._blockedSortIndex)&&(h?(this._blockedSortIndex=null,a=n._items[o],s._hasListeners(gt)&&s._emit(gt,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),n._hasListeners(ue)&&n._emit(ue,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),t._gridId=n._id,this._isMigrating=t._gridId!==this._gridId,s._items.splice(r,1),Ze(n._items,t,o),t._sortData=null,s._hasListeners(he)&&s._emit(he,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),n._hasListeners(ce)&&n._emit(ce,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),l===ot&&a&&a.isActive()&&n._items.indexOf(a)>-1&&n.send(a,s,r,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),s.layout(),n.layout()):r!==o&&(this._blockedSortIndex=r,(l===ot?Is:Ts)(s._items,r,o),s._hasListeners(le)&&s._emit(le,{item:t,fromIndex:r,toIndex:o,action:l}),s.layout())))}};A.prototype._finishMigration=function(){var t=this._item,e=t._dragRelease,i=t._element,s=t._isActive,r=t.getGrid(),n=r._element,o=r._settings,a=o.dragContainer||n,l=this._getGrid()._settings,h=i.parentNode,c=s?l.itemVisibleClass:l.itemHiddenClass,f=s?o.itemVisibleClass:o.itemHiddenClass,y,g;this._isMigrating=!1,this.destroy(),l.itemClass!==o.itemClass&&($(i,l.itemClass),Q(i,o.itemClass)),c!==f&&($(i,c),Q(i,f)),a!==h&&(a.appendChild(i),g=Ct(h,a,!0),y=ct(i),y.x-=g.left,y.y-=g.top),t._refreshDimensions(),g=Ct(a,n,!0),e._containerDiffX=g.left,e._containerDiffY=g.top,t._drag=o.dragEnabled?new A(t):null,a!==h&&t._setTranslate(y.x,y.y),t._visibility.setStyles(s?o.visibleStyles:o.hiddenStyles),e.start()};A.prototype._preStartCheck=function(t){this._startPredicateState===_e&&(this._startPredicateState=Ve),this._startPredicateState===Ve?(this._startPredicateResult=this._startPredicate(this._item,t),this._startPredicateResult===!0?(this._startPredicateState=pe,this._onStart(t)):this._startPredicateResult===!1&&(this._resetStartPredicate(t),this._dragger._reset(),this._startPredicateState=_e)):this._startPredicateState===pe&&this._isActive&&this._onMove(t)};A.prototype._preEndCheck=function(t){var e=this._startPredicateState===pe;this._startPredicate(this._item,t),this._startPredicateState=_e,!(!e||!this._isActive)&&(this._isStarted?this._onEnd(t):this.stop())};A.prototype._onStart=function(t){var e=this._item;e._isActive&&(this._isActive=!0,this._dragStartEvent=t,A.autoScroller.addItem(e),Gr(e._id,this._prepareStart,this._applyStart))};A.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._settings,r=i._element,n=s.dragContainer||r,o=Xe(n),a=ct(e),l=e.getBoundingClientRect(),h=n!==r;if(this._container=n,this._containingBlock=o,this._clientX=l.left,this._clientY=l.top,this._left=this._gridX=a.x,this._top=this._gridY=a.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),h){var c=Ct(o,r);this._containerDiffX=c.left,this._containerDiffY=c.top}}}};A.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid(),i=t._element,s=t._dragRelease,r=t._migrate,n=this._container!==e._element;t.isPositioning()&&t._layout.stop(!0,this._left,this._top),r._isActive&&(this._left-=r._containerDiffX,this._top-=r._containerDiffY,this._gridX-=r._containerDiffX,this._gridY-=r._containerDiffY,r.stop(!0,this._left,this._top)),t.isReleasing()&&s._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit(Lr,t,this._dragStartEvent),n&&(i.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._left,this._top))),Q(i,e._settings.itemDraggingClass),this._bindScrollListeners(),e._emit(Cr,t,this._dragStartEvent)}}};A.prototype._onMove=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._dragMoveEvent=t,jr(e._id,this._prepareMove,this._applyMove),Ee(e._id,this._handleSort)};A.prototype._prepareMove=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid()._settings,i=e.dragAxis,s=this._dragMoveEvent,r=this._dragPrevMoveEvent||this._dragStartEvent||s;if(i!=="y"){var n=s.clientX-r.clientX;this._left=this._left-this._moveDiffX+n,this._gridX=this._gridX-this._moveDiffX+n,this._clientX=this._clientX-this._moveDiffX+n,this._moveDiffX=n}if(i!=="x"){var o=s.clientY-r.clientY;this._top=this._top-this._moveDiffY+o,this._gridY=this._gridY-this._moveDiffY+o,this._clientY=this._clientY-this._moveDiffY+o,this._moveDiffY=o}this._dragPrevMoveEvent=s}}};A.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(Pr,t,this._dragMoveEvent),A.autoScroller.updateItem(t))}};A.prototype._onScroll=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._scrollEvent=t,Zr(e._id,this._prepareScroll,this._applyScroll),Ee(e._id,this._handleSort)};A.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._element,r=e.getBoundingClientRect();if(this._container!==s){var n=Ct(this._containingBlock,s);this._containerDiffX=n.left,this._containerDiffY=n.top}var o=this._clientX-this._moveDiffX-r.left;this._left=this._left-this._scrollDiffX+o,this._scrollDiffX=o;var a=this._clientY-this._moveDiffY-r.top;this._top=this._top-this._scrollDiffY+a,this._scrollDiffY=a,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}};A.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(xr,t,this._scrollEvent))}};A.prototype._onEnd=function(t){var e=this._item,i=e._element,s=this._getGrid(),r=s._settings,n=e._dragRelease;if(!e._isActive){this.stop();return}fs(e._id),_s(e._id),ps(e._id),this._finishSort(),this._unbindScrollListeners(),n._containerDiffX=this._containerDiffX,n._containerDiffY=this._containerDiffY,this._reset(),$(i,r.itemDraggingClass),A.autoScroller.removeItem(e),s._emit(Or,e,t),this._isMigrating?this._finishMigration():n.start()};function Dn(t){if(t.tagName.toLowerCase()==="a"){var e=t.getAttribute("href");if(e){var i=t.getAttribute("target");i&&i!=="_self"?window.open(e,i):window.location.href=e}}}function Ds(t,e){var i={},s,r;if(Array.isArray(e))for(r=0;r<e.length;r++)s=e[r],i[s]=K(t,qe(s));else for(s in e)i[s]=K(t,qe(s));return i}var Rn=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,bi={};function Ln(t){var e=bi[t];return e||(e=t.replace(Rn,""),e!==t&&(e=e[0].toLowerCase()+e.slice(1)),bi[t]=e,e)}var Cn="[native code]";function Pn(t){var e=window.Symbol;return!!(t&&R(e)&&R(e.toString)&&e(t).toString().indexOf(Cn)>-1)}function Pt(t,e){for(var i in e)t.style[i]=e[i]}var xn=!!(Element&&R(Element.prototype.animate)),Ti=!!(Element&&Pn(Element.prototype.animate));function lt(t){this._element=t,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}lt.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._element,r=i||{};if(!xn){Pt(s,e),this._callback=R(r.onFinish)?r.onFinish:null,this._onFinish();return}var n=this._animation,o=this._props,a=this._values,l=r.duration||300,h=r.easing||"ease",c=!1,f,y,g;if(n&&(y=0,(l!==this._duration||h!==this._easing)&&(c=!0),!c)){for(f in e)if(++y,g=o.indexOf(f),g===-1||e[f]!==a[g]){c=!0;break}y!==o.length&&(c=!0)}if(c&&n.cancel(),this._callback=R(r.onFinish)?r.onFinish:null,!(n&&!c)){o.length=a.length=0;for(f in e)o.push(f),a.push(e[f]);this._duration=l,this._easing=h,this._animation=s.animate([Ii(t,Ti),Ii(e,Ti)],{duration:l,easing:h}),this._animation.onfinish=this._onFinish,Pt(s,e)}}};lt.prototype.stop=function(){this._isDestroyed||!this._animation||(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)};lt.prototype.getCurrentStyles=function(){return Ds(element,currentProps)};lt.prototype.isAnimating=function(){return!!this._animation};lt.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)};lt.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,t&&t()};function Ii(t,e){var i={};for(var s in t)i[e?s:Ln(s)]=t[s];return i}function mt(t,e){return"translateX("+t+"px) translateY("+e+"px)"}function j(t){this._item=t,this._animation=new lt,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}j.prototype._updateDimensions=function(){this.isActive()&&Pt(this._element,{width:this._item._width+"px",height:this._item._height+"px"})};j.prototype._onLayoutStart=function(t,e){var i=this._item;if(t.indexOf(i)===-1){this.reset();return}var s=i._left,r=i._top,n=this._left,o=this._top;if(this._left=s,this._top=r,!(!e&&!this._didMigrate&&n===s&&o===r)){var a=s+i._marginLeft,l=r+i._marginTop,h=i.getGrid(),c=!e&&h._settings.layoutDuration>0;if(!c||this._didMigrate){ms(i._id),this._element.style[at]=mt(a,l),this._animation.stop(),this._didMigrate&&(h.getElement().appendChild(this._element),this._didMigrate=!1);return}this._nextTransX=a,this._nextTransY=l,Qr(i._id,this._setupAnimation,this._startAnimation)}};j.prototype._setupAnimation=function(){if(this.isActive()){var t=ct(this._element);this._transX=t.x,this._transY=t.y}};j.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,s=this._nextTransX,r=this._nextTransY;if(e===s&&i===r){t.isAnimating()&&(this._element.style[at]=mt(s,r),t.stop());return}var n=this._item.getGrid()._settings,o={},a={};o[at]=mt(e,i),a[at]=mt(s,r),t.start(o,a,{duration:n.layoutDuration,easing:n.layoutEasing,onFinish:this._onLayoutEnd})}};j.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()};j.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating()){this.reset();return}this._resetAfterLayout=!0}};j.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(qt,this._onReleaseEnd),e.off(vt,this._onLayoutStart),e.off(gt,this._onMigrate),e.off(Yt,this._onHide),i.on(qt,this._onReleaseEnd),i.on(vt,this._onLayoutStart),i.on(gt,this._onMigrate),i.on(Yt,this._onHide),this._didMigrate=!0}};j.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()};j.prototype.create=function(){if(this.isActive()){this._resetAfterLayout=!1;return}var t=this._item,e=t.getGrid(),i=e._settings,s=this._animation;this._left=t._left,this._top=t._top;var r;R(i.dragPlaceholder.createElement)?r=i.dragPlaceholder.createElement(t):r=document.createElement("div"),this._element=r,s._element=r,this._className=i.itemPlaceholderClass||"",this._className&&Q(r,this._className),Pt(r,{position:"absolute",left:"0px",top:"0px",width:t._width+"px",height:t._height+"px"}),r.style[at]=mt(t._left+t._marginLeft,t._top+t._marginTop),e.on(vt,this._onLayoutStart),e.on(qt,this._onReleaseEnd),e.on(gt,this._onMigrate),e.on(Yt,this._onHide),R(i.dragPlaceholder.onCreate)&&i.dragPlaceholder.onCreate(t,r),e.getElement().appendChild(r)};j.prototype.reset=function(){if(this.isActive()){var t=this._element,e=this._item,i=e.getGrid(),s=i._settings,r=this._animation;this._resetAfterLayout=!1,ms(e._id),tn(e._id),r.stop(),r._element=null,i.off(qt,this._onReleaseEnd),i.off(vt,this._onLayoutStart),i.off(gt,this._onMigrate),i.off(Yt,this._onHide),this._className&&($(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,R(s.dragPlaceholder.onRemove)&&s.dragPlaceholder.onRemove(e,t)}};j.prototype.isActive=function(){return!!this._element};j.prototype.getElement=function(){return this._element};j.prototype.updateDimensions=function(){this.isActive()&&Jr(this._item._id,this._updateDimensions)};j.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null};function wt(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}wt.prototype.start=function(){if(!(this._isDestroyed||this._isActive)){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,Q(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer||this._placeToGrid(),e._emit(Mr,t),e._nextLayoutData||t._layout.start(!1)}};wt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item,r=s.getGrid();!t&&(e===void 0||i===void 0)&&(e=s._left,i=s._top);var n=this._placeToGrid(e,i);this._reset(n),t||r._emit(qt,s)}};wt.prototype.isJustReleased=function(){return this._isActive&&this._isPositioningStarted===!1};wt.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};wt.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=i.getGrid()._element,n=!1;if(s.parentNode!==r){if(t===void 0||e===void 0){var o=ct(s);t=o.x-this._containerDiffX,e=o.y-this._containerDiffY}r.appendChild(s),i._setTranslate(t,e),n=!0}return this._containerDiffX=0,this._containerDiffY=0,n}};wt.prototype._reset=function(t){if(!this._isDestroyed){var e=this._item,i=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,i&&(t&&e._element.clientWidth,$(e._element,i))}};var Ai=2;function dt(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},i.left="0px",i.top="0px",t._setTranslate(0,0),this._animation=new lt(e),this._queue="layout-"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}dt.prototype.start=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._dragRelease,r=i.getGrid()._settings,n=this._isActive,o=s.isJustReleased(),a=o?r.dragRelease.duration:r.layoutDuration,l=o?r.dragRelease.easing:r.layoutEasing,h=!t&&!this._skipNextAnimation&&a>0;if(n&&(us(i._id),i._emitter.burst(this._queue,!0,i)),o&&(s._isPositioningStarted=!0),R(e)&&i._emitter.on(this._queue,e),this._skipNextAnimation=!1,!h){this._updateOffsets(),i._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=l,this._animOptions.duration=a,this._isInterrupted=n,$r(i._id,this._setupAnimation,this._startAnimation)}};dt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item;if(us(s._id),this._animation.isAnimating()){if(e===void 0||i===void 0){var r=ct(s._element);e=r.x,i=r.y}s._setTranslate(e,i),this._animation.stop()}$(s._element,s.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&s._emitter.burst(this._queue,!0,s)}};dt.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[at]="",t.left="",t.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}};dt.prototype._updateOffsets=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;this._offsetLeft=i._isActive?i._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=i._isActive?i._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}};dt.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._tX=this._nextLeft,t._tY=this._nextTop,this._isActive&&(this._isActive=!1,$(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}};dt.prototype._setupAnimation=function(){var t=this._item;if(t._tX===void 0||t._tY===void 0){var e=ct(t._element);t._tX=e.x,t._tY=e.y}};dt.prototype._startAnimation=function(){var t=this._item,e=t.getGrid()._settings,i=this._animOptions.duration<=0;this._updateOffsets();var s=Math.abs(t._left-(t._tX-this._offsetLeft)),r=Math.abs(t._top-(t._tY-this._offsetTop));if(i||s<Ai&&r<Ai){(s||r||this._isInterrupted)&&t._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._isInterrupted||Q(t._element,e.itemPositioningClass),this._currentStyles[at]=mt(t._tX,t._tY),this._targetStyles[at]=mt(this._nextLeft,this._nextTop),t._tX=t._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)};function jt(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}jt.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._item,r=s._element,n=s.isActive(),o=s.isVisible(),a=s.getGrid(),l=a._settings,h=t._settings,c=t._element,f=t._items,y=a._items.indexOf(s),g=i||document.body,E,d,u,v,_,w,S,I,L,M;if(typeof e=="number")E=Lt(f,e,1);else{if(d=t.getItem(e),!d)return;E=f.indexOf(d)}(s.isPositioning()||this._isActive||s.isReleasing())&&(w=ct(r),S=w.x,I=w.y),s.isPositioning()&&s._layout.stop(!0,S,I),this._isActive&&(S-=this._containerDiffX,I-=this._containerDiffY,this.stop(!0,S,I)),s.isReleasing()&&(S-=s._dragRelease._containerDiffX,I-=s._dragRelease._containerDiffY,s._dragRelease.stop(!0,S,I)),s._visibility.stop(!0),s._drag&&s._drag.destroy(),a._hasListeners(gt)&&a._emit(gt,{item:s,fromGrid:a,fromIndex:y,toGrid:t,toIndex:E}),t._hasListeners(ue)&&t._emit(ue,{item:s,fromGrid:a,fromIndex:y,toGrid:t,toIndex:E}),l.itemClass!==h.itemClass&&($(r,l.itemClass),Q(r,h.itemClass)),L=o?l.itemVisibleClass:l.itemHiddenClass,M=o?h.itemVisibleClass:h.itemHiddenClass,L!==M&&($(r,L),Q(r,M)),a._items.splice(y,1),Ze(f,s,E),s._gridId=t._id,n?(u=r.parentNode,g!==u&&(g.appendChild(r),v=Ct(g,u,!0),w||(w=ct(r),S=w.x,I=w.y),s._setTranslate(S+v.left,I+v.top))):c.appendChild(r),s._visibility.setStyles(o?h.visibleStyles:h.hiddenStyles),n&&(_=Ct(g,c,!0)),s._refreshDimensions(),s._sortData=null,s._drag=h.dragEnabled?new A(s):null,n?(this._isActive=!0,this._container=g,this._containerDiffX=_.left,this._containerDiffY=_.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),a._hasListeners(he)&&a._emit(he,{item:s,fromGrid:a,fromIndex:y,toGrid:t,toIndex:E}),t._hasListeners(ce)&&t._emit(ce,{item:s,fromGrid:a,fromIndex:y,toGrid:t,toIndex:E})}};jt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item,r=s._element,n=s.getGrid(),o=n._element,a;this._container!==o&&((e===void 0||i===void 0)&&(t?(a=ct(r),e=a.x-this._containerDiffX,i=a.y-this._containerDiffY):(e=s._left,i=s._top)),o.appendChild(r),s._setTranslate(e,i)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}};jt.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};function rt(t){var e=t._isActive,i=t._element,s=i.children[0],r=t.getGrid()._settings;if(!s)throw new Error("No valid child element found within item element.");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=s,this._currentStyleProps=[],this._animation=new lt(s),this._queue="visibility-"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?"":"none",Q(i,e?r.itemVisibleClass:r.itemHiddenClass),this.setStyles(e?r.visibleStyles:r.hiddenStyles)}rt.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=R(e)?e:null,n=i.getGrid(),o=n._settings;if(!this._isShowing&&!this._isHidden){r&&r(!1,i);return}if(this._isShowing&&!t){r&&i._emitter.on(this._queue,r);return}this._isShowing||(i._emitter.burst(this._queue,!0,i),$(s,o.itemHiddenClass),Q(s,o.itemVisibleClass),this._isHiding||(s.style.display="")),r&&i._emitter.on(this._queue,r),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)}};rt.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=R(e)?e:null,n=i.getGrid(),o=n._settings;if(!this._isHiding&&this._isHidden){r&&r(!1,i);return}if(this._isHiding&&!t){r&&i._emitter.on(this._queue,r);return}this._isHiding||(i._emitter.burst(this._queue,!0,i),Q(s,o.itemHiddenClass),$(s,o.itemVisibleClass)),r&&i._emitter.on(this._queue,r),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)}};rt.prototype.stop=function(t){if(!this._isDestroyed&&!(!this._isHiding&&!this._isShowing)){var e=this._item;ds(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}};rt.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;this._removeCurrentStyles();for(var s in t)i.push(s),e.style[s]=t[s]};rt.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid(),s=i._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),$(e,s.itemVisibleClass),$(e,s.itemHiddenClass),e.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}};rt.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var s=this._item,r=this._animation,n=this._childElement,o=s.getGrid()._settings,a=t?o.visibleStyles:o.hiddenStyles,l=t?o.showDuration:o.hideDuration,h=t?o.showEasing:o.hideEasing,c=e||l<=0,f;if(!a){i&&i();return}if(ds(s._id),c){Pt(n,a),r.stop(),i&&i();return}r.isAnimating()&&(r._animation.onfinish=null),Ur(s._id,function(){f=Ds(n,a)},function(){r.start(f,a,{duration:l,easing:h,onFinish:i})})}};rt.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))};rt.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display="none",t._emitter.burst(this._queue,!1,t)}};rt.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;i++)t.style[e[i]]="";e.length=0};var On=0;function Rs(){return++On}function N(t,e,i){var s=t._settings;if(Tt){if(Tt.has(e))throw new Error("You can only create one Muuri Item per element!");Tt.set(e,this)}this._id=Rs(),this._gridId=t._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new tt,e.parentNode!==t._element&&t._element.appendChild(e),Q(e,s.itemClass),typeof i!="boolean"&&(i=K(e,"display")!=="none"),this._isActive=i,this._visibility=new rt(this),this._layout=new dt(this),this._migrate=new jt(this),this._drag=s.dragEnabled?new A(this):null,this._dragRelease=new wt(this),this._dragPlaceholder=new j(this)}N.prototype.getGrid=function(){return ve[this._gridId]};N.prototype.getElement=function(){return this._element};N.prototype.getWidth=function(){return this._width};N.prototype.getHeight=function(){return this._height};N.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}};N.prototype.getPosition=function(){return{left:this._left,top:this._top}};N.prototype.isActive=function(){return this._isActive};N.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden};N.prototype.isShowing=function(){return!!(this._visibility&&this._visibility._isShowing)};N.prototype.isHiding=function(){return!!(this._visibility&&this._visibility._isHiding)};N.prototype.isPositioning=function(){return!!(this._layout&&this._layout._isActive)};N.prototype.isDragging=function(){return!!(this._drag&&this._drag._isActive)};N.prototype.isReleasing=function(){return!!(this._dragRelease&&this._dragRelease._isActive)};N.prototype.isDestroyed=function(){return this._isDestroyed};N.prototype._refreshDimensions=function(t){if(!this._isDestroyed&&!(t!==!0&&this._visibility._isHidden)){var e=this._element,i=this._dragPlaceholder,s=e.getBoundingClientRect();this._width=s.width,this._height=s.height,this._marginLeft=Math.max(0,J(e,"margin-left")),this._marginRight=Math.max(0,J(e,"margin-right")),this._marginTop=Math.max(0,J(e,"margin-top")),this._marginBottom=Math.max(0,J(e,"margin-bottom")),i&&i.updateDimensions()}};N.prototype._refreshSortData=function(){if(!this._isDestroyed){var t=this._sortData={},e=this.getGrid()._settings.sortData,i;for(i in e)t[i]=e[i](this,this._element)}};N.prototype._addToLayout=function(t,e){this._isActive!==!0&&(this._isActive=!0,this._left=t||0,this._top=e||0)};N.prototype._removeFromLayout=function(){this._isActive!==!1&&(this._isActive=!1,this._left=0,this._top=0)};N.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()};N.prototype._setTranslate=function(t,e){return this._tX===t&&this._tY===e?!1:(this._tX=t,this._tY=e,this._element.style[at]=mt(t,e),!0)};N.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,i=this.getGrid(),s=i._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),$(e,s.itemClass),t&&e.parentNode.removeChild(e),Tt&&Tt.delete(e),this._isActive=!1,this._isDestroyed=!0}};function Ls(t){var e=1,i=2,s=4,r=8,n=16,o=.001,a=.5;function l(d){return((d*1e3+.5<<0)/10<<0)/100}function h(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(h.prototype.computeLayout=function(d,u){var v=d.items,_=d.slots,w=!!(u&e),S=!!(u&i),I=!!(u&s),L=!!(u&r),M=!!(u&n),O=typeof v[0]=="number",D,et,F,V,it,B;if(!v.length)return d;for(et=O?2:1,D=0;D<v.length;D+=et)O?(V=v[D],it=v[D+1]):(F=v[D],V=F._width+F._marginLeft+F._marginRight,it=F._height+F._marginTop+F._marginBottom),M&&(V=l(V),it=l(it)),B=this.computeNextSlot(d,V,it,w,S),S?B.left+B.width>d.width&&(d.width=B.left+B.width):B.top+B.height>d.height&&(d.height=B.top+B.height),_[++this.slotIndex]=B.left,_[++this.slotIndex]=B.top,(I||L)&&this.slotSizes.push(B.width,B.height);if(I)for(D=0;D<_.length;D+=2)_[D]=d.width-(_[D]+this.slotSizes[D]);if(L)for(D=1;D<_.length;D+=2)_[D]=d.height-(_[D]+this.slotSizes[D]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,d},h.prototype.computeNextSlot=function(d,u,v,_,w){var S=this.slotData,I=this.currentRects,L=this.nextRects,M=!1,O,D,et,F,V;for(L.length=0,S.left=null,S.top=null,S.width=u,S.height=v,F=0;F<I.length;F++)if(D=I[F],!!D&&(O=this.getRect(D),S.width<=O.width+o&&S.height<=O.height+o)){S.left=O.left,S.top=O.top;break}if(S.left===null&&(w?(S.left=d.width,S.top=0):(S.left=0,S.top=d.height),_||(M=!0)),!w&&S.top+S.height>d.height+o&&(S.left>a&&L.push(this.addRect(0,d.height,S.left,1/0)),S.left+S.width<d.width-a&&L.push(this.addRect(S.left+S.width,d.height,d.width-S.left-S.width,1/0)),d.height=S.top+S.height),w&&S.left+S.width>d.width+o&&(S.top>a&&L.push(this.addRect(d.width,0,1/0,S.top)),S.top+S.height<d.height-a&&L.push(this.addRect(d.width,S.top+S.height,1/0,d.height-S.top-S.height)),d.width=S.left+S.width),!M){for(_&&(F=0);F<I.length;F++)if(D=I[F],!!D)for(O=this.getRect(D),et=this.splitRect(O,S),V=0;V<et.length;V++)D=et[V],O=this.getRect(D),(w?O.left+o<d.width-o:O.top+o<d.height-o)&&L.push(D)}return L.length>1&&this.purgeRects(L).sort(w?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=L,this.nextRects=I,S},h.prototype.addRect=function(d,u,v,_){var w=++this.rectId;return this.rectStore[w]=d||0,this.rectStore[++this.rectId]=u||0,this.rectStore[++this.rectId]=v||0,this.rectStore[++this.rectId]=_||0,w},h.prototype.getRect=function(d,u){return u||(u=this.rectTarget),u.left=this.rectStore[d]||0,u.top=this.rectStore[++d]||0,u.width=this.rectStore[++d]||0,u.height=this.rectStore[++d]||0,u},h.prototype.splitRect=function(){var d=[],u=0,v=0;return function(_,w){return d.length=0,_.left+_.width<=w.left+o||w.left+w.width<=_.left+o||_.top+_.height<=w.top+o||w.top+w.height<=_.top+o?(d.push(this.addRect(_.left,_.top,_.width,_.height)),d):(u=w.left-_.left,u>=a&&d.push(this.addRect(_.left,_.top,u,_.height)),u=_.left+_.width-(w.left+w.width),u>=a&&d.push(this.addRect(w.left+w.width,_.top,u,_.height)),v=w.top-_.top,v>=a&&d.push(this.addRect(_.left,_.top,_.width,v)),v=_.top+_.height-(w.top+w.height),v>=a&&d.push(this.addRect(_.left,w.top+w.height,_.width,v)),d)}}(),h.prototype.isRectAWithinRectB=function(d,u){return d.left+o>=u.left&&d.top+o>=u.top&&d.left+d.width-o<=u.left+u.width&&d.top+d.height-o<=u.top+u.height},h.prototype.purgeRects=function(){var d={},u={};return function(v){for(var _=v.length,w;_--;)if(w=v.length,!!v[_]){for(this.getRect(v[_],d);w--;)if(!(!v[w]||_===w)&&(this.getRect(v[w],u),this.isRectAWithinRectB(d,u))){v[_]=0;break}}return v}}(),h.prototype.sortRectsTopLeft=function(){var d={},u={};return function(v,_){return this.getRect(v,d),this.getRect(_,u),d.top<u.top&&d.top+o<u.top?-1:d.top>u.top&&d.top-o>u.top?1:d.left<u.left&&d.left+o<u.left?-1:d.left>u.left&&d.left-o>u.left?1:0}}(),h.prototype.sortRectsLeftTop=function(){var d={},u={};return function(v,_){return this.getRect(v,d),this.getRect(_,u),d.left<u.left&&d.left+o<u.left?-1:d.left>u.left&&d.left-o<u.left?1:d.top<u.top&&d.top+o<u.top?-1:d.top>u.top&&d.top-o>u.top?1:0}}(),t){var c=1,f=2,y=3,g=4,E=new h;self.onmessage=function(d){var u=new Float32Array(d.data),v=u.subarray(g,u.length),_=new Float32Array(v.length),w=u[y],S={items:v,slots:_,width:u[c],height:u[f]};E.computeLayout(S,w),u[c]=S.width,u[f]=S.height,u.set(S.slots,g),postMessage(u.buffer,[u.buffer])}}return h}var ki=Ls(),Rt=null,ae=[];function Mn(t,e){var i=[];if(t>0){Rt||(Rt=URL.createObjectURL(new Blob(["("+Ls.toString()+")(true)"],{type:"application/javascript"})));for(var s=0,r;s<t;s++)r=new Worker(Rt),e&&(r.onmessage=e),i.push(r),ae.push(r)}return i}function Nn(t){for(var e,i,s=0;s<t.length;s++)e=t[s],e.onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),i=ae.indexOf(e),i>-1&&ae.splice(i,1);Rt&&!ae.length&&(URL.revokeObjectURL(Rt),Rt=null)}function Hn(){return!!(window.Worker&&window.URL&&window.Blob)}var Di=1,me=2,Ri=4,Li=8,Ci=16,Cs=0,Ps=1,xs=2,Fn=3,Be=4;function ft(t,e){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(e),t=typeof t=="number"?Math.max(0,t):0,t&&Hn())try{this._workers=Mn(t,this._onWorkerMessage)}catch(i){this._processor=new ki}else this._processor=new ki}ft.prototype._sendToWorker=function(){if(!(!this._layoutQueue.length||!this._workers.length)){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}};ft.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[Cs],s=this._layouts[i],r=this._layoutCallbacks[i],n=this._layoutWorkers[i];s&&delete this._layouts[i],r&&delete this._layoutCallbacks[i],n&&delete this._layoutWorkers[i],s&&r&&(s.width=e[Ps],s.height=e[xs],s.slots=e.subarray(Be,e.length),this._finalizeLayout(s),r(s)),n&&(this._workers.push(n),this._sendToWorker())};ft.prototype._finalizeLayout=function(t){var e=t._grid,i=t._settings&me,s=e._boxSizing==="border-box";return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(s?t.width+e._borderLeft+e._borderRight:t.width)+"px":t.styles.height=(s?t.height+e._borderTop+e._borderBottom:t.height)+"px",t};ft.prototype.setOptions=function(t){if(t){var e;typeof t.fillGaps=="boolean"?e=t.fillGaps?Di:0:e=this._options&Di;var i;typeof t.horizontal=="boolean"?i=t.horizontal?me:0:i=this._options&me;var s;typeof t.alignRight=="boolean"?s=t.alignRight?Ri:0:s=this._options&Ri;var r;typeof t.alignBottom=="boolean"?r=t.alignBottom?Li:0:r=this._options&Li;var n;typeof t.rounding=="boolean"?n=t.rounding?Ci:0:n=this._options&Ci,this._options=e|i|s|r|n}};ft.prototype.createLayout=function(t,e,i,s,r,n){if(this._layouts[e])throw new Error("A layout with the provided id is currently being processed.");var o=this._options&me,a={id:e,items:i,slots:null,width:o?0:s,height:o?r:0,_grid:t,_settings:this._options};if(!i.length){a.slots=[],this._finalizeLayout(a),n(a);return}if(this._processor){a.slots=window.Float32Array?new Float32Array(i.length*2):new Array(i.length*2),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),n(a);return}var l=new Float32Array(Be+i.length*2);l[Cs]=e,l[Ps]=a.width,l[xs]=a.height,l[Fn]=a._settings;var h,c,f;for(h=0,c=Be-1,f;h<i.length;h++)f=i[h],l[++c]=f._width+f._marginLeft+f._marginRight,l[++c]=f._height+f._marginTop+f._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=n,this._layoutWorkerData[e]=l,this._sendToWorker(),this.cancelLayout.bind(this,e)};ft.prototype.cancelLayout=function(t){var e=this._layouts[t];if(e&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var i=this._layoutQueue.indexOf(t);i>-1&&this._layoutQueue.splice(i,1)}};ft.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);Nn(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var zn=0;function Yn(t,e){var i=++zn,s=0,r=0,n=!1,o=function(a){n||(r&&(s-=a-r),r=a,s>0?sn(i,o):(s=r=0,t()))};return function(a){if(!n){if(e<=0){a!==!0&&t();return}if(a===!0){n=!0,s=r=0,o=void 0,rn(i);return}s<=0?(s=e,o(0)):s=e}}}var qn="[object HTMLCollection]",Xn="[object NodeList]";function Ke(t){var e=Object.prototype.toString.call(t);return e===qn||e===Xn}var Vn="object",Bn="[object Object]",Wn=Object.prototype.toString;function Pi(t){return typeof t===Vn&&Wn.call(t)===Bn}function $n(){}function Un(t){return Ke(t)?Array.prototype.slice.call(t):Array.prototype.concat(t)}var Os="number",Te="string",yt="instant",Me=0;function k(t,e){typeof t===Te&&(t=document.querySelector(t));var i=t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t);if(!i||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var s=Gn(k.defaultOptions,e);s.visibleStyles=xi(s.visibleStyles),s.hiddenStyles=xi(s.hiddenStyles),R(s.dragSort)||(s.dragSort=!!s.dragSort),this._id=Rs(),this._element=t,this._settings=s,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new tt,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),ve[this._id]=this,Q(t,s.containerClass),Zn(this,s.layoutOnResize),this.add(jn(t,s.items),{layout:!1}),s.layoutOnInit&&this.layout(!0)}k.Item=N;k.ItemLayout=dt;k.ItemVisibility=rt;k.ItemMigrate=jt;k.ItemDrag=A;k.ItemDragRelease=wt;k.ItemDragPlaceholder=j;k.Emitter=tt;k.Animator=lt;k.Dragger=m;k.Packer=ft;k.AutoScroller=P;k.defaultPacker=new ft(2);k.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:It,migrateAction:It},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:P.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"};k.prototype.on=function(t,e){return this._emitter.on(t,e),this};k.prototype.off=function(t,e){return this._emitter.off(t,e),this};k.prototype.getElement=function(){return this._element};k.prototype.getItem=function(t){if(this._isDestroyed||!t&&t!==0)return null;if(typeof t===Os)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof N)return t._gridId===this._id?t:null;if(Tt){var e=Tt.get(t);return e&&e._gridId===this._id?e:null}else for(var i=0;i<this._items.length;i++)if(this._items[i]._element===t)return this._items[i];return null};k.prototype.getItems=function(t){if(this._isDestroyed||t===void 0)return this._items.slice(0);var e=[],i,s;if(Array.isArray(t)||Ke(t))for(i=0;i<t.length;i++)s=this.getItem(t[i]),s&&e.push(s);else s=this.getItem(t),s&&e.push(s);return e};k.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i=t||this._items,s,r,n,o;if(e===!0)for(o=[],s=0;s<i.length;s++)r=i[s],!r.isVisible()&&!r.isHiding()&&(n=r.getElement().style,n.visibility="hidden",n.display="",o.push(n));for(s=0;s<i.length;s++)i[s]._refreshDimensions(e);if(e===!0){for(s=0;s<o.length;s++)n=o[s],n.visibility="",n.display="none";o.length=0}return this};k.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this};k.prototype.synchronize=function(){if(this._isDestroyed)return this;var t=this._items;if(!t.length)return this;for(var e,i,s=0;s<t.length;s++)i=t[s]._element,i.parentNode===this._element&&(e=e||document.createDocumentFragment(),e.appendChild(i));return e?(this._element.appendChild(e),this._emit(Ar),this):this};k.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&R(i.cancel)&&i.cancel(),Me=Me%Hr+1;var s=Me;this._nextLayoutData={id:s,instant:t,onFinish:e,cancel:null};for(var r=this._items,n=[],o=0;o<r.length;o++)r[o]._isActive&&n.push(r[o]);this._refreshDimensions();var a=this._width-this._borderLeft-this._borderRight,l=this._height-this._borderTop-this._borderBottom,h=this._settings.layout,c;return R(h)?c=h(this,s,n,a,l,this._onLayoutDataReceived):(k.defaultPacker.setOptions(h),c=k.defaultPacker.createLayout(this,s,n,a,l,this._onLayoutDataReceived)),R(c)&&this._nextLayoutData&&this._nextLayoutData.id===s&&(this._nextLayoutData.cancel=c),this};k.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i=Un(t);if(!i.length)return i;var s=e||{},r=s.layout?s.layout:s.layout===void 0,n=this._items,o=!1,a,l,h,c;for(c=0;c<i.length;c++)l=i[c],l.parentNode!==this._element&&(a=a||document.createDocumentFragment(),a.appendChild(l));for(a&&this._element.appendChild(a),c=0;c<i.length;c++)l=i[c],h=i[c]=new N(this,l,s.active),h._isActive&&(o=!0,h._layout._skipNextAnimation=!0);for(c=0;c<i.length;c++)h=i[c],h._refreshDimensions(),h._refreshSortData();return Ze(n,i,s.index),this._hasListeners(pi)&&this._emit(pi,i.slice(0)),o&&r&&this.layout(r===yt,R(r)?r:void 0),i};k.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i=e||{},s=i.layout?i.layout:i.layout===void 0,r=!1,n=this.getItems(),o=[],a=[],l,h,c;for(c=0;c<t.length;c++)h=t[c],!h._isDestroyed&&(l=this._items.indexOf(h),l!==-1&&(h._isActive&&(r=!0),o.push(h),a.push(n.indexOf(h)),h._destroy(i.removeElements),this._items.splice(l,1)));return this._hasListeners(mi)&&this._emit(mi,o.slice(0),a),r&&s&&this.layout(s===yt,R(s)?s:void 0),o};k.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this};k.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this};k.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i=[],s=[],r=typeof t===Te,n=R(t),o=e||{},a=o.instant===!0,l=o.syncWithLayout,h=o.layout?o.layout:o.layout===void 0,c=R(o.onFinish)?o.onFinish:null,f=-1,y=$n,g,E;if(c&&(y=function(){++f&&c(i.slice(0),s.slice(0))}),n||r)for(E=0;E<this._items.length;E++)g=this._items[E],(n?t(g):be(g._element,t))?i.push(g):s.push(g);return i.length?this.show(i,{instant:a,syncWithLayout:l,onFinish:y,layout:!1}):y(),s.length?this.hide(s,{instant:a,syncWithLayout:l,onFinish:y,layout:!1}):y(),(i.length||s.length)&&(this._hasListeners(vi)&&this._emit(vi,i.slice(0),s.slice(0)),h&&this.layout(h===yt,R(h)?h:void 0)),this};k.prototype.sort=function(){var t,e,i,s;function r(o,a){for(var l=0,h,c,f,y,g=0;g<t.length;g++)if(h=t[g][0],c=t[g][1],f=(o._sortData?o:o._refreshSortData())._sortData[h],y=(a._sortData?a:a._refreshSortData())._sortData[h],c==="desc"||!c&&e?l=y<f?-1:y>f?1:0:l=f<y?-1:f>y?1:0,l)return l;return l||(s||(s=Oi(i)),l=e?ne(s,a,o):ne(s,o,a)),l}function n(o,a){var l=e?-t(o,a):t(o,a);return l||(s||(s=Oi(i)),l=e?ne(s,a,o):ne(s,o,a)),l}return function(o,a){if(this._isDestroyed||this._items.length<2)return this;var l=this._items,h=a||{},c=h.layout?h.layout:h.layout===void 0;if(e=!!h.descending,i=l.slice(0),s=null,R(o))t=o,l.sort(n);else if(typeof o===Te)t=o.trim().split(" ").filter(function(f){return f}).map(function(f){return f.split(":")}),l.sort(r);else if(Array.isArray(o))l.length=0,l.push.apply(l,o);else throw t=e=i=s=null,new Error("Invalid comparer argument provided.");return this._hasListeners(gi)&&this._emit(gi,l.slice(0),i),c&&this.layout(c===yt,R(c)?c:void 0),t=e=i=s=null,this}}();k.prototype.move=function(t,e,i){if(this._isDestroyed||this._items.length<2)return this;var s=this._items,r=i||{},n=r.layout?r.layout:r.layout===void 0,o=r.action===ot,a=o?ot:It,l=this.getItem(t),h=this.getItem(e),c,f;return l&&h&&l!==h&&(c=s.indexOf(l),f=s.indexOf(h),o?Is(s,c,f):Ts(s,c,f),this._hasListeners(le)&&this._emit(le,{item:l,fromIndex:c,toIndex:f,action:a}),n&&this.layout(n===yt,R(n)?n:void 0)),this};k.prototype.send=function(t,e,i,s){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(t=this.getItem(t),!t)return this;var r=s||{},n=r.appendTo||document.body,o=r.layoutSender?r.layoutSender:r.layoutSender===void 0,a=r.layoutReceiver?r.layoutReceiver:r.layoutReceiver===void 0;return t._migrate.start(e,i,n),t._migrate._isActive&&t._isActive&&(o&&this.layout(o===yt,R(o)?o:void 0),a&&e.layout(a===yt,R(a)?a:void 0)),this};k.prototype.destroy=function(t){if(this._isDestroyed)return this;var e=this._element,i=this._items.slice(0),s=this._layout&&this._layout.styles||{},r,n;for(Kn(this),r=0;r<i.length;r++)i[r]._destroy(t);this._items.length=0,$(e,this._settings.containerClass);for(n in s)e.style[n]="";return this._emit(Nr),this._emitter.destroy(),delete ve[this._id],this._isDestroyed=!0,this};k.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)};k.prototype._hasListeners=function(t){return this._isDestroyed?!1:this._emitter.countListeners(t)>0};k.prototype._updateBoundingRect=function(){var t=this._element,e=t.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom};k.prototype._updateBorders=function(t,e,i,s){var r=this._element;t&&(this._borderLeft=J(r,"border-left-width")),e&&(this._borderRight=J(r,"border-right-width")),i&&(this._borderTop=J(r,"border-top-width")),s&&(this._borderBottom=J(r,"border-bottom-width"))};k.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=K(this._element,"box-sizing")};k.prototype._onLayoutDataReceived=function(){var t=[];return function(e){if(!(this._isDestroyed||!this._nextLayoutData||this._nextLayoutData.id!==e.id)){var i=this,s=this._nextLayoutData.instant,r=this._nextLayoutData.onFinish,n=e.items.length,o=n,a,l,h,c;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(_i)&&this._emit(_i,this._layout.items.slice(0)),this._layout=e,t.length=0,c=0;c<n;c++){if(a=e.items[c],!a){--o;continue}if(l=e.slots[c*2],h=e.slots[c*2+1],a._canSkipLayout(l,h)){--o;continue}a._left=l,a._top=h,a.isActive()&&!a.isDragging()?t.push(a):--o}if(e.styles&&Pt(this._element,e.styles),!(this._hasListeners(vt)&&(this._emit(vt,e.items.slice(0),s===!0),this._layout.id!==e.id))){var f=function(){if(!(--o>0)){var y=i._layout.id!==e.id,g=R(s)?s:r;y||(i._isLayoutFinished=!0),R(g)&&g(e.items.slice(0),y),!y&&i._hasListeners(fi)&&i._emit(fi,e.items.slice(0))}};if(!t.length)return f(),this;for(this._isLayoutFinished=!1,c=0;c<t.length&&this._layout.id===e.id;c++)t[c]._layout.start(s===!0,f);return this._layout.id===e.id&&(t.length=0),this}}}}();k.prototype._setItemsVisibility=function(t,e,i){var s=this,r=t.slice(0),n=i||{},o=n.instant===!0,a=n.onFinish,l=n.layout?n.layout:n.layout===void 0,h=r.length,c=e?kr:Yt,f=e?Dr:Rr,y=e?"show":"hide",g=!1,E=[],d=[],u,v;if(!h){R(a)&&a(r);return}for(v=0;v<r.length;v++)u=r[v],(e&&!u._isActive||!e&&u._isActive)&&(g=!0),u._layout._skipNextAnimation=!!(e&&!u._isActive),e&&u._visibility._isHidden&&d.push(u),e?u._addToLayout():u._removeFromLayout();d.length&&(this.refreshItems(d,!0),d.length=0);function _(){for(g&&n.syncWithLayout!==!1&&s.off(vt,_),s._hasListeners(c)&&s._emit(c,r.slice(0)),v=0;v<r.length;v++){if(r[v]._gridId!==s._id){--h<1&&(R(a)&&a(E.slice(0)),s._hasListeners(f)&&s._emit(f,E.slice(0)));continue}r[v]._visibility[y](o,function(w,S){w||E.push(S),--h<1&&(R(a)&&a(E.slice(0)),s._hasListeners(f)&&s._emit(f,E.slice(0)))})}}g&&n.syncWithLayout!==!1?this.on(vt,_):_(),g&&l&&this.layout(l===yt,R(l)?l:void 0)};function Gn(t,e){var i=Ft({},t);return e&&(i=Ft(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}function Ft(t,e){var i=Object.keys(e),s=i.length,r,n,o;for(o=0;o<s;o++){if(n=i[o],r=Pi(e[n]),Pi(t[n])&&r){t[n]=Ft(Ft({},t[n]),e[n]);continue}if(r){t[n]=Ft({},e[n]);continue}if(Array.isArray(e[n])){t[n]=e[n].slice(0);continue}t[n]=e[n]}return t}function jn(t,e){if(e==="*")return t.children;if(typeof e===Te){for(var i=[],s=t.children,r=0;r<s.length;r++)be(s[r],e)&&i.push(s[r]);return i}return Array.isArray(e)||Ke(e)?e:[]}function Zn(t,e){typeof e!==Os&&(e=e===!0?0:-1),e>=0&&(t._resizeHandler=Yn(function(){t.refreshItems().layout()},e),window.addEventListener("resize",t._resizeHandler))}function Kn(t){t._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener("resize",t._resizeHandler),t._resizeHandler=null)}function xi(t){var e={},i=document.documentElement.style,s,r;for(s in t)t[s]&&(r=ye(i,s),r&&(e[r]=t[s]));return e}function Oi(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function ne(t,e,i){var s=t[e._id],r=t[i._id];return s-r}function Qn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ne,Mi;function Jn(){if(Mi)return Ne;Mi=1;var t=4,e=.001,i=1e-7,s=10,r=11,n=1/(r-1),o=typeof Float32Array=="function";function a(d,u){return 1-3*u+3*d}function l(d,u){return 3*u-6*d}function h(d){return 3*d}function c(d,u,v){return((a(u,v)*d+l(u,v))*d+h(u))*d}function f(d,u,v){return 3*a(u,v)*d*d+2*l(u,v)*d+h(u)}function y(d,u,v,_,w){var S,I,L=0;do I=u+(v-u)/2,S=c(I,_,w)-d,S>0?v=I:u=I;while(Math.abs(S)>i&&++L<s);return I}function g(d,u,v,_){for(var w=0;w<t;++w){var S=f(u,v,_);if(S===0)return u;var I=c(u,v,_)-d;u-=I/S}return u}function E(d){return d}return Ne=function(u,v,_,w){if(!(0<=u&&u<=1&&0<=_&&_<=1))throw new Error("bezier x values must be in [0, 1] range");if(u===v&&_===w)return E;for(var S=o?new Float32Array(r):new Array(r),I=0;I<r;++I)S[I]=c(I*n,u,_);function L(M){for(var O=0,D=1,et=r-1;D!==et&&S[D]<=M;++D)O+=n;--D;var F=(M-S[D])/(S[D+1]-S[D]),V=O+F*n,it=f(V,u,_);return it>=e?g(M,V,u,_):it===0?V:y(M,O,O+n,u,_)}return function(O){return O===0?0:O===1?1:c(L(O),v,w)}},Ne}var to=Jn();const eo=Qn(to),x=document.documentElement,xt={viewportSize:()=>[window.innerWidth||x.clientWidth||document.body.clientWidth,window.innerHeight||x.clientHeight||document.body.clientHeight],elementCenterPos:t=>{const e=t.getBoundingClientRect();return[e.left+e.width/2,e.top+e.height/2]},scrollbarWidth:(t=!1)=>{let e=window.innerWidth-x.clientWidth;if(t){const i=parseFloat(window.getComputedStyle(x).getPropertyValue("--scrollbar-width").replace("px",""));e=i>e?i:e}return x.style.setProperty("--scrollbar-width",(e>0?e:0)+"px"),e},randomIntFromInterval:(t,e)=>Math.floor(Math.random()*(e-t+1)+t)};function Ni(t,e,i){return(1-i)*t+i*e}function io(t,e,i={property:!1,once:!0,debug:!1}){i.property?t.addEventListener("transitionend",r=>{r.propertyName==i.property&&e()},{once:i.once}):t.addEventListener("transitionend",()=>{e()},{once:i.once}),i.debug&&t.addEventListener("transitionend",r=>{console.debug("[atTransitionEnd] "+r.propertyName+(i.property?" (selected)":""),t)});let s=!0;Hi.forEach(r=>{s&=r!=t}),s&&(Hi.push(t),t.childNodes.forEach(r=>{r.addEventListener("transitionend",n=>{n.stopPropagation()})}))}let Hi=[],Ie={};Ie.vpSize=xt.viewportSize();window.addEventListener("resize",()=>{Ie.vpSize=xt.viewportSize()});let z;const Y={options:{scroll:{lenisOptions:{smoothWheel:!0,smoothTouch:!1,wheelMultiplier:.9,duration:1,easing:t=>Math.min(1,1.001-Math.pow(5,-7*t)),orientation:"vertical",gestureOrientation:"vertical"},triggerRootMargin:"-1px -1px -1px -1px",rafRootMargin:"100% 100% 100% 100%",autoResize:!0},scrollTo:{offset:0,duration:.9,immediate:!1,lock:!1,easing:t=>eo(.45,0,.05,1)(t)}},resize:(t,e=200)=>{setTimeout(()=>{t.resize()},e)},getScroll:t=>t.lenisInstance.targetScroll,initEvents:()=>{window.addEventListener("scrollHit",t=>{if(t.detail.progress>=1){t.detail.target.classList.add("is-scroll-hit");return}else t.detail.target.classList.remove("is-scroll-hit")})}};let W={elements:{menusContainers:document.querySelectorAll(".sticky-menu wrapper[menu-show-id]"),projectNameSpan:document.querySelector(".sticky-menu wrapper[menu-show-id] .project-name"),projectH1:void 0},init:()=>{x.setAttribute("thalia-sticky-menu-state","false"),W.elements.menusContainers.forEach(t=>{t.setAttribute("menu-show-state","false")}),W.toggleMenuFromURL(bt.location.pathname),bt.hooks.on("content:replace",t=>{W.toggleMenuFromURL(t.to.url)}),window.addEventListener("scrollStickyMenu",t=>{if(Y.getScroll(z)<5){x.setAttribute("thalia-sticky-menu-state","true");return}x.setAttribute("thalia-sticky-menu-state",t.detail.way==="enter")})},triggerAnimate:(t,e=!1)=>{t.style.width=t.firstElementChild.getBoundingClientRect().width+"px",setTimeout(()=>{t.setAttribute("menu-show-state","transition-"+e),io(t,()=>{t.setAttribute("menu-show-state",e),t.style.width=null},{once:!0})},100)},toggleMenu:t=>{t==="project"&&(W.elements.projectH1=document.querySelector(".section-main-gallery h1.project-title"),W.elements.projectH1?(W.elements.projectNameSpan.classList.remove("hide"),W.elements.projectNameSpan.innerText=W.elements.projectH1.innerText):(W.elements.projectNameSpan.classList.add("hide"),W.elements.projectNameSpan.innerText=""));const e=document.querySelectorAll('*[menu-show-id="'+t+'"]');if(e.length<=0){console.error("[STICKY_MENU.toggleMenu] not found : "+t);return}W.elements.menusContainers.forEach(i=>{i.getAttribute("menu-show-id")!==t&&W.triggerAnimate(i,!1)}),e.forEach(i=>{i.getAttribute("menu-show-state").includes("true")||W.triggerAnimate(i,!0)})},toggleMenuFromURL:t=>{t!=="/"?W.toggleMenu("project"):W.toggleMenu("filters")}},p={options:{dragIntensity:[.5,.6],angleDamping:.025,look:{maxDistance:10,damping:[20,15]},blink:{startTimeout:2e3,interval:4e3,randomIntervalAdd:1e4,speed:190}},data:{dragPos:[0,0],look:{},blinkIntervalInstance:null},elements:{dragContainer:document.querySelector("main"),contentContainer:document.querySelector(".section-main-head"),main:document.querySelector(".interactive-chara-thalia svg.thalia-chara"),mainEyes:document.querySelector(".interactive-chara-thalia svg.thalia-chara g[data-name='eyes']"),hands:document.querySelectorAll(".chara-thalia--hands svg.thalia-chara"),socialBtns:document.querySelectorAll(".section-main-head .socials .social-btn")},interactions:{init:()=>{p.elements.main&&!p.data.activated&&(p.data.activated=!0,p.data.state="resting",x.setAttribute("thalia-chara-state","resting"),p.interactions.toggleHands(!0),window.addEventListener("scrollThaliaCharaHandsToggle",t=>{if(Y.getScroll(z)<5){p.interactions.toggleHands(!0);return}p.interactions.toggleHands(t.detail.way==="enter")}),p.interactions.initBlinkHit(),p.interactions.updateEyesPosition(),window.addEventListener("resize",p.interactions.updateEyesPosition),p.elements.contentContainer.addEventListener("pointerenter",p.interactions.updateEyesPosition),p.interactions.look(),p.elements.dragContainer.addEventListener("pointerenter",p.interactions.look),p.elements.dragContainer.addEventListener("pointerleave",p.interactions.unlook),p.elements.dragContainer.addEventListener("pointerleave",p.interactions.pointerStop),p.elements.dragContainer.addEventListener("pointerup",p.interactions.pointerStop),p.elements.main.addEventListener("pointerdown",p.interactions.pointerActive),p.elements.socialBtns.length>0&&(p.interactions.socialBtnHover=t=>{x.setAttribute("thalia-social-hover","true")},p.interactions.socialBtnOut=t=>{x.setAttribute("thalia-social-hover","false")},p.elements.socialBtns.forEach(t=>{t.addEventListener("pointerenter",p.interactions.socialBtnHover),t.addEventListener("pointerleave",p.interactions.socialBtnOut)}))),p.interactions.enable(),window.addEventListener("scrollThaliaCharaPause",t=>{if(Y.getScroll(z)<5){p.interactions.enable();return}t.detail.way==="enter"?p.interactions.enable():p.interactions.disable()})},enable:()=>{p.elements.dragContainer.addEventListener("pointermove",p.interactions.following),p.interactions.blinkLoopStart()},disable:()=>{p.elements.dragContainer.removeEventListener("pointermove",p.interactions.following),p.interactions.blinkLoopStop()},updateEyesPosition:t=>{Y.resize(z),p.data.look.center=xt.elementCenterPos(p.elements.mainEyes)},look:t=>{p.elements.main.classList.add("looking")},unlook:t=>{p.elements.main.classList.remove("looking")},pointerStop:t=>{const e=Math.abs(p.data.dragPos[0]);x.setAttribute("thalia-chara-drag-strength",e>Ie.vpSize[0]/8?"strong":e>15?"weak":"none"),x.style.setProperty("--thalia-chara-drag-direction",p.data.dragPos[0]>0?1:-1),p.data.state="resting",x.setAttribute("thalia-chara-state","resting"),p.elements.main.classList.remove("grabbing")},pointerActive:t=>{p.data.pointerPosStart=[t.clientX,t.clientY],p.data.state="grabbing",p.interactions.following(t),x.setAttribute("thalia-chara-state","grabbing"),p.elements.main.classList.add("grabbing")},following:t=>{p.data.pointerPos=[t.clientX,t.clientY],p.data.state=="grabbing"?(p.data.dragPos=[Ni(0,p.data.pointerPos[0]-p.data.pointerPosStart[0],p.options.dragIntensity[0]),Ni(0,p.data.pointerPos[1]-p.data.pointerPosStart[1],p.options.dragIntensity[1])],x.style.setProperty("--thalia-chara-drag-x",p.data.dragPos[0]+"px"),x.style.setProperty("--thalia-chara-drag-y",p.data.dragPos[1]+"px"),x.style.setProperty("--thalia-chara-drag-rotate",p.data.dragPos[0]*p.options.angleDamping+"deg")):(p.data.look.posFromCenter=[(p.data.pointerPos[0]-p.data.look.center[0])/p.options.look.damping[0],(p.data.pointerPos[1]-p.data.look.center[1])/p.options.look.damping[1]],p.data.look.distanceFactor=p.options.look.maxDistance/Math.sqrt(p.data.look.posFromCenter[0]*p.data.look.posFromCenter[0]+p.data.look.posFromCenter[1]*p.data.look.posFromCenter[1]),p.data.look.distanceFactor>1?p.data.look.posFromCenter=[p.data.look.posFromCenter[0],p.data.look.posFromCenter[1]]:p.data.look.posFromCenter=[p.data.look.posFromCenter[0]*p.data.look.distanceFactor,p.data.look.posFromCenter[1]*p.data.look.distanceFactor],p.elements.main.style.setProperty("--pointer-follow-look-x",p.data.look.posFromCenter[0]+"px"),p.elements.main.style.setProperty("--pointer-follow-look-y",p.data.look.posFromCenter[1]+"px"))},toggleHands:t=>{x.setAttribute("thalia-chara-hands-toggle",t)},initBlinkHit:()=>{p.interactions.blinkHit(!1),p.elements.hands.forEach(t=>{t.addEventListener("pointerdown",()=>{p.interactions.blinkHit(!0)}),t.addEventListener("pointerup",()=>{p.interactions.blinkHit(!1)}),t.addEventListener("pointerleave",()=>{p.interactions.blinkHit(!1)})})},blinkHit:t=>{x.setAttribute("thalia-chara-state",t?"grabbing":"resting"),p.data.dragPos=[0,0],x.style.setProperty("--thalia-chara-drag-x","0px"),x.style.setProperty("--thalia-chara-drag-y","0px"),x.style.setProperty("--thalia-chara-drag-rotate","0deg")},blink:(t=!1)=>{setTimeout(()=>{x.setAttribute("thalia-chara-blink","true"),setTimeout(()=>{x.setAttribute("thalia-chara-blink","false")},p.options.blink.speed)},t?0:xt.randomIntFromInterval(0,p.options.blink.randomIntervalAdd))},blinkLoopStart:()=>{p.data.blinkIntervalInstance||(setTimeout(()=>{p.interactions.blink(!0)},p.options.blink.startTimeout),p.data.blinkIntervalInstance=setInterval(()=>{p.interactions.blink()},p.options.blink.interval))},blinkLoopStop:()=>{p.data.blinkIntervalInstance&&(clearTimeout(p.data.blinkIntervalInstance),p.data.blinkIntervalInstance=null)}}},st;const He={target:".grid-muuri",gallery:{items:".grid-muuri--item",sortData:null,showDuration:600,showEasing:"cubic-bezier(0.4, 0, 0, 1)",visibleStyles:{opacity:"1",transform:"scale(1)"},hideDuration:400,hideEasing:"cubic-bezier(0.7, 0, 0.4, 1)",hiddenStyles:{opacity:"0",transform:"scale(0.6)"},layout:{fillGaps:!0,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnInit:!0,layoutOnResize:150,layoutDuration:800,layoutEasing:"cubic-bezier(0.45, 0, 0, 1)",dragEnabled:!1}};let b={itemsShiftValue:140,data:{currentFilter:null},elements:{section:document.querySelector(".section-main-gallery"),gallerySectionScrollToAnchor:document.querySelector(".section-main-gallery .scroll-to-anchor"),galleryItemsFiltersContainers:void 0,filtersBarBtns:document.querySelectorAll(".sticky-menu wrapper[menu-show-id='filters'] .btn-filter"),filtersClearBtn:document.querySelectorAll("*[thalia-gallery-filter-btn-clear]"),filtersBtns:void 0,shiftItemsMuuri:void 0,shiftItemsContent:[]},init:(t=!0)=>{b.elements.galleryItemsFiltersContainers=document.querySelectorAll(".gallery-grid .item-gallery .filters"),st=new k(He.target,He.gallery),b.initShiftItems(),b.createItemsFiltersBtns(),b.initItemsFiltersBtns(t),st._settings.hideDuration=0,st.layout(!0),setTimeout(()=>{st._settings.hideDuration=He.gallery.hideDuration},200)},destroy:()=>{st.destroy(),b.elements.filtersBtns=document.querySelectorAll("*[thalia-gallery-filter-btn-id]"),b.elements.filtersBtns.forEach(t=>{if(t){let e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),t=e}}),b.elements.filtersClearBtn.forEach(t=>{t&&t.removeEventListener("click",b.onUnfilter)})},galleryFilter:(t,e)=>!!t.getElement().getAttribute("thalia-gallery-item-filters").match(e),onClickFilter:(t,e=!1)=>{x.setAttribute("thalia-gallery-filter-previous",x.getAttribute("thalia-gallery-filter")),e?(b.onFilter(t,e),Y.resize(z)):(t.getAttribute("thalia-gallery-filter-btn-id")==b.data.currentFilter?(b.onUnfilter(),Y.resize(z)):(b.onFilter(t),Y.resize(z)),b.scrollToTop())},onFilter:(t,e=!1)=>{e?(b.data.currentFilter=t.getAttribute("thalia-gallery-filter-btn-id"),x.setAttribute("thalia-gallery-filter",b.data.currentFilter)):(b.data.currentFilter=t.getAttribute("thalia-gallery-filter-btn-id"),b.setShiftItemsSize(),x.setAttribute("thalia-gallery-filter",b.data.currentFilter),b.filterItems())},onUnfilter:(t=!0)=>{t?(b.data.currentFilter=null,b.setShiftItemsSize(),x.setAttribute("thalia-gallery-filter","false")):b.setShiftItemsSize(),b.filterItems()},filterItems:()=>{const t=!!b.data.currentFilter;st.refreshItems(),st.filter(e=>(e.getElement().setAttribute("thalia-gallery-item-was-hidden",!e.isVisible()),t?b.galleryFilter(e,b.data.currentFilter):!0)),t?b.elements.filtersBtns.forEach(e=>{e.getAttribute("thalia-gallery-filter-btn-id").match(b.data.currentFilter)?e.classList.add("active"):e.classList.remove("active")}):b.elements.filtersBtns.forEach(e=>{e.classList.remove("active")})},createItemsFiltersBtns:()=>{st.getItems().forEach(t=>{let e="";t.getElement().getAttribute("thalia-gallery-item-filters").split(";").forEach(i=>{e+='<span thalia-gallery-filter-btn-id="'+i+'">'+i+"</span>"}),t.getElement().querySelector(".filters").innerHTML=e})},createFilterBtns:(t,e=null)=>{const i=t.querySelectorAll("*[thalia-gallery-filters--insert]");i.length>0&&(i.forEach(s=>{let r="";s.getAttribute("thalia-gallery-filters--insert").split(";").forEach(n=>{r+='<span thalia-gallery-filter-btn-id="'+n+'">'+n+"</span>"}),s.innerHTML=r}),e!=null&&t.querySelectorAll("*[thalia-gallery-filters--insert] *[thalia-gallery-filter-btn-id]").forEach(s=>{s.addEventListener("click",()=>{b.onClickFilter(s,!0),e()})}),i.forEach(s=>{s.removeAttribute("thalia-gallery-filters--insert")}))},initItemsFiltersBtns:(t=!0)=>{b.elements.filtersBtns=document.querySelectorAll("*[thalia-gallery-filter-btn-id]"),b.elements.filtersBtns.length>0&&(b.elements.filtersBtns.forEach(e=>{e.addEventListener("click",()=>{b.onClickFilter(e)})}),b.elements.filtersClearBtn.forEach(e=>{e.addEventListener("click",b.onUnfilter)})),b.onUnfilter(t)},getShiftItemsSize:t=>{b.elements.shiftItemsMuuri.forEach(e=>{e.style.display="block",e.setAttribute("thalia-gallery-item-height",e.firstElementChild.firstElementChild.offsetHeight),e.setAttribute("thalia-gallery-item-height",window.getComputedStyle(e.firstElementChild.firstElementChild).height.replace("px","")),setTimeout(()=>{e.classList.contains("muuri-item-hidden")?e.style.display="none":e.style.display=null},5)}),t&&t()},setShiftItemsSize:()=>{b.elements.shiftItemsMuuri.forEach(t=>{t.style.height=(b.data.currentFilter===null?b.itemsShiftValue:0)+parseFloat(t.getAttribute("thalia-gallery-item-height"))+"px"})},initShiftItems:()=>{x.style.setProperty("--thalia-gallery-item-shift",b.itemsShiftValue+"px"),b.elements.shiftItemsMuuri=document.querySelectorAll(".gallery-grid .grid-muuri--item.item-shift"),b.elements.shiftItemsMuuri.forEach(t=>{b.elements.shiftItemsContent.push(t.querySelectorAll(".item-gallery"))}),b.getShiftItemsSize(),b.setShiftItemsSize(),window.addEventListener("resize",()=>{b.getShiftItemsSize(b.setShiftItemsSize)})},initScrollInView:()=>{st.getItems().forEach(t=>{const e=t.getElement().querySelector(".item-gallery");e.setAttribute("data-scroll",""),e.setAttribute("data-scroll-offset","200,0")}),z.addScrollElements(st.getElement())},scrollToTop:()=>{Y.getScroll(z)>50&&z.scrollTo(b.elements.gallerySectionScrollToAnchor,Qt(Nt({},Y.options.scrollTo),{offset:0,onComplete:()=>{Y.resize(z)}}))}};const ht={data:{homePrevScrollPos:null,homePrevAnchorPos:null},initPagesHandling:()=>{bt.hooks.on("page:view",t=>{st&&b.destroy(),t.to.url==="/"&&b.init(!1),ht.doOnEachPages()}),ht.doOnEachPages(),bt.hooks.on("visit:start",t=>{t.scroll.reset=!1,t.from.url==="/"&&(ht.data.homePrevScrollPos=Y.getScroll(z),ht.data.homePrevAnchorPos=b.elements.gallerySectionScrollToAnchor.getBoundingClientRect().top),b.elements.gallerySectionScrollToAnchor.getBoundingClientRect().top>1?t.to.url!=="/"&&z.scrollTo(b.elements.gallerySectionScrollToAnchor,Qt(Nt({},Y.options.scrollTo),{lock:!0,offset:0,onComplete:()=>{Y.resize(z)}})):bt.hooks.on("content:replace",()=>{b.elements.gallerySectionScrollToAnchor.getBoundingClientRect().top<1&&(z.scrollTo(b.elements.gallerySectionScrollToAnchor,{immediate:!0,lock:!0,offset:0,onComplete:()=>{Y.resize(z)}}),t.to.url==="/"&&ht.data.homePrevScrollPos!=null&&ht.data.homePrevScrollPos>Ie.vpSize[1]&&ht.data.homePrevAnchorPos<0&&setTimeout(()=>{z.scrollTo(ht.data.homePrevScrollPos,Qt(Nt({},Y.options.scrollTo),{lock:!0,offset:0,onComplete:()=>{Y.resize(z)}}))},300))},{once:!0,before:!0})})},doOnEachPages:()=>{b.createFilterBtns(b.elements.section,()=>{bt.navigate("/")})}},bt=new ur({animateHistoryBrowsing:!0,cache:!0,containers:["#swup"],animationSelector:'[class*="swup-transition-"]',animationScope:"html",linkSelector:"a[href]",linkToSelf:"scroll",timeout:0,native:!1});window.addEventListener("load",()=>{xt.scrollbarWidth(),bt.hooks.on("content:replace",()=>{xt.scrollbarWidth(!0)}),z=new Ir(Y.options.scroll),Y.initEvents(),W.init(),p.interactions.init(),ht.initPagesHandling(),document.querySelector(".gallery-grid")&&b.init(),Y.resize(z)});
