(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var es="vh";function is(t){var e,i="--"+es;function s(){var r=t.clientHeight;r!==e&&requestAnimationFrame(function(){t.style.setProperty(i,r*.01+"px"),e=r})}return s(),s}window.addEventListener("resize",is(document.documentElement));function li(t,e,i){return Math.max(t,Math.min(e,i))}class ss{constructor(){this.isRunning=!1,this.value=0,this.from=0,this.to=0,this.duration=0,this.currentTime=0}advance(e){var i;if(!this.isRunning)return;let s=!1;if(this.duration&&this.easing){this.currentTime+=e;const r=li(0,this.currentTime/this.duration,1);s=r>=1;const o=s?1:this.easing(r);this.value=this.from+(this.to-this.from)*o}else this.lerp?(this.value=function(o,n,a,l){return function(c,_,E){return(1-E)*c+E*_}(o,n,1-Math.exp(-a*l))}(this.value,this.to,60*this.lerp,e),Math.round(this.value)===this.to&&(this.value=this.to,s=!0)):(this.value=this.to,s=!0);s&&this.stop(),(i=this.onUpdate)===null||i===void 0||i.call(this,this.value,s)}stop(){this.isRunning=!1}fromTo(e,i,{lerp:s,duration:r,easing:o,onStart:n,onUpdate:a}){this.from=this.value=e,this.to=i,this.lerp=s,this.duration=r,this.easing=o,this.currentTime=0,this.isRunning=!0,n==null||n(),this.onUpdate=a}}class rs{constructor({wrapper:e,content:i,autoResize:s=!0,debounce:r=250}={}){this.width=0,this.height=0,this.scrollWidth=0,this.scrollHeight=0,this.resize=()=>{this.onWrapperResize(),this.onContentResize()},this.onWrapperResize=()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):this.wrapper instanceof HTMLElement&&(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)},this.onContentResize=()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):this.wrapper instanceof HTMLElement&&(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)},this.wrapper=e,this.content=i,s&&(this.debouncedResize=function(n,a){let l;return function(){let h=arguments,c=this;clearTimeout(l),l=setTimeout(function(){n.apply(c,h)},a)}}(this.resize,r),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var e,i;(e=this.wrapperResizeObserver)===null||e===void 0||e.disconnect(),(i=this.contentResizeObserver)===null||i===void 0||i.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}let hi=class{constructor(){this.events={}}emit(e,...i){let s=this.events[e]||[];for(let r=0,o=s.length;r<o;r++)s[r](...i)}on(e,i){var s;return!((s=this.events[e])===null||s===void 0)&&s.push(i)||(this.events[e]=[i]),()=>{var r;this.events[e]=(r=this.events[e])===null||r===void 0?void 0:r.filter(o=>i!==o)}}off(e,i){var s;this.events[e]=(s=this.events[e])===null||s===void 0?void 0:s.filter(r=>i!==r)}destroy(){this.events={}}};const Oe=100/6;class ns{constructor(e,{wheelMultiplier:i=1,touchMultiplier:s=1}){this.lastDelta={x:0,y:0},this.windowWidth=0,this.windowHeight=0,this.onTouchStart=r=>{const{clientX:o,clientY:n}=r.targetTouches?r.targetTouches[0]:r;this.touchStart.x=o,this.touchStart.y=n,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:r})},this.onTouchMove=r=>{var o,n,a,l;const{clientX:h,clientY:c}=r.targetTouches?r.targetTouches[0]:r,_=-(h-((n=(o=this.touchStart)===null||o===void 0?void 0:o.x)!==null&&n!==void 0?n:0))*this.touchMultiplier,E=-(c-((l=(a=this.touchStart)===null||a===void 0?void 0:a.y)!==null&&l!==void 0?l:0))*this.touchMultiplier;this.touchStart.x=h,this.touchStart.y=c,this.lastDelta={x:_,y:E},this.emitter.emit("scroll",{deltaX:_,deltaY:E,event:r})},this.onTouchEnd=r=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:r})},this.onWheel=r=>{let{deltaX:o,deltaY:n,deltaMode:a}=r;o*=a===1?Oe:a===2?this.windowWidth:1,n*=a===1?Oe:a===2?this.windowHeight:1,o*=this.wheelMultiplier,n*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:o,deltaY:n,event:r})},this.onWindowResize=()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},this.element=e,this.wheelMultiplier=i,this.touchMultiplier=s,this.touchStart={x:null,y:null},this.emitter=new hi,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,i){return this.emitter.on(e,i)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel),this.element.removeEventListener("touchstart",this.onTouchStart),this.element.removeEventListener("touchmove",this.onTouchMove),this.element.removeEventListener("touchend",this.onTouchEnd)}}class os{constructor({wrapper:e=window,content:i=document.documentElement,wheelEventsTarget:s=e,eventsTarget:r=s,smoothWheel:o=!0,syncTouch:n=!1,syncTouchLerp:a=.075,touchInertiaMultiplier:l=35,duration:h,easing:c=b=>Math.min(1,1.001-Math.pow(2,-10*b)),lerp:_=.1,infinite:E=!1,orientation:g="vertical",gestureOrientation:w="vertical",touchMultiplier:d=1,wheelMultiplier:u=1,autoResize:y=!0,prevent:v,virtualScroll:S,__experimental__naiveDimensions:p=!1}={}){this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.userData={},this.lastVelocity=0,this.velocity=0,this.direction=0,this.onPointerDown=b=>{b.button===1&&this.reset()},this.onVirtualScroll=b=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(b)===!1)return;const{deltaX:A,deltaY:P,event:k}=b;if(this.emitter.emit("virtual-scroll",{deltaX:A,deltaY:P,event:k}),k.ctrlKey)return;const R=k.type.includes("touch"),j=k.type.includes("wheel");if(this.isTouching=k.type==="touchstart"||k.type==="touchmove",this.options.syncTouch&&R&&k.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const N=A===0&&P===0,q=this.options.gestureOrientation==="vertical"&&P===0||this.options.gestureOrientation==="horizontal"&&A===0;if(N||q)return;let G=k.composedPath();G=G.slice(0,G.indexOf(this.rootElement));const Y=this.options.prevent;if(G.find($=>{var yt,St,_t,_e,ve;return $ instanceof Element&&(typeof Y=="function"&&(Y==null?void 0:Y($))||((yt=$.hasAttribute)===null||yt===void 0?void 0:yt.call($,"data-lenis-prevent"))||R&&((St=$.hasAttribute)===null||St===void 0?void 0:St.call($,"data-lenis-prevent-touch"))||j&&((_t=$.hasAttribute)===null||_t===void 0?void 0:_t.call($,"data-lenis-prevent-wheel"))||((_e=$.classList)===null||_e===void 0?void 0:_e.contains("lenis"))&&!(!((ve=$.classList)===null||ve===void 0)&&ve.contains("lenis-stopped")))}))return;if(this.isStopped||this.isLocked)return void k.preventDefault();if(!(this.options.syncTouch&&R||this.options.smoothWheel&&j))return this.isScrolling="native",void this.animate.stop();k.preventDefault();let J=P;this.options.gestureOrientation==="both"?J=Math.abs(P)>Math.abs(A)?P:A:this.options.gestureOrientation==="horizontal"&&(J=A);const qt=R&&this.options.syncTouch,xt=R&&k.type==="touchend"&&Math.abs(J)>5;xt&&(J=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+J,Object.assign({programmatic:!1},qt?{lerp:xt?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(clearTimeout(this.__resetVelocityTimeout),delete this.__resetVelocityTimeout,this.__preventNextNativeScrollEvent)delete this.__preventNextNativeScrollEvent;else if(this.isScrolling===!1||this.isScrolling==="native"){const b=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-b,this.direction=Math.sign(this.animatedScroll-b),this.isScrolling="native",this.emit(),this.velocity!==0&&(this.__resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}},window.lenisVersion="1.1.9",e&&e!==document.documentElement&&e!==document.body||(e=window),this.options={wrapper:e,content:i,wheelEventsTarget:s,eventsTarget:r,smoothWheel:o,syncTouch:n,syncTouchLerp:a,touchInertiaMultiplier:l,duration:h,easing:c,lerp:_,infinite:E,gestureOrientation:w,orientation:g,touchMultiplier:d,wheelMultiplier:u,autoResize:y,prevent:v,virtualScroll:S,__experimental__naiveDimensions:p},this.animate=new ss,this.emitter=new hi,this.dimensions=new rs({wrapper:e,content:i,autoResize:y}),this.updateClassName(),this.userData={},this.time=0,this.velocity=this.lastVelocity=0,this.isLocked=!1,this.isStopped=!1,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new ns(r,{touchMultiplier:d,wheelMultiplier:u}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName()}on(e,i){return this.emitter.on(e,i)}off(e,i){return this.emitter.off(e,i)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(e){const i=e-(this.time||e);this.time=e,this.animate.advance(.001*i)}scrollTo(e,{offset:i=0,immediate:s=!1,lock:r=!1,duration:o=this.options.duration,easing:n=this.options.easing,lerp:a=this.options.lerp,onStart:l,onComplete:h,force:c=!1,programmatic:_=!0,userData:E={}}={}){if(!this.isStopped&&!this.isLocked||c){if(typeof e=="string"&&["top","left","start"].includes(e))e=0;else if(typeof e=="string"&&["bottom","right","end"].includes(e))e=this.limit;else{let g;if(typeof e=="string"?g=document.querySelector(e):e instanceof HTMLElement&&(e!=null&&e.nodeType)&&(g=e),g){if(this.options.wrapper!==window){const d=this.rootElement.getBoundingClientRect();i-=this.isHorizontal?d.left:d.top}const w=g.getBoundingClientRect();e=(this.isHorizontal?w.left:w.top)+this.animatedScroll}}if(typeof e=="number"&&(e+=i,e=Math.round(e),this.options.infinite?_&&(this.targetScroll=this.animatedScroll=this.scroll):e=li(0,e,this.limit),e!==this.targetScroll)){if(this.userData=E,s)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),h==null||h(this),void(this.userData={});_||(this.targetScroll=e),this.animate.fromTo(this.animatedScroll,e,{duration:o,easing:n,lerp:a,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling="smooth",l==null||l(this)},onUpdate:(g,w)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=g-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=g,this.setScroll(this.scroll),_&&(this.targetScroll=g),w||this.emit(),w&&(this.reset(),this.emit(),h==null||h(this),this.userData={},this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this.__preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextNativeScrollEvent})}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(i,s){return(i%s+s)%s}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.updateClassName())}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.__isStopped=e,this.updateClassName())}get isLocked(){return this.__isLocked}set isLocked(e){this.__isLocked!==e&&(this.__isLocked=e,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isScrolling==="smooth"&&(e+=" lenis-smooth"),e}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}}function Ee(){return Ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Ee.apply(null,arguments)}class Me{constructor({scrollElements:e,rootMargin:i="-1px -1px -1px -1px",IORaf:s}){this.scrollElements=void 0,this.rootMargin=void 0,this.IORaf=void 0,this.observer=void 0,this.scrollElements=e,this.rootMargin=i,this.IORaf=s,this._init()}_init(){this.observer=new IntersectionObserver(e=>{e.forEach(i=>{const s=this.scrollElements.find(r=>r.$el===i.target);i.isIntersecting?(s&&(s.isAlreadyIntersected=!0),this._setInview(i)):s&&s.isAlreadyIntersected&&this._setOutOfView(i)})},{rootMargin:this.rootMargin});for(const e of this.scrollElements)this.observe(e.$el)}destroy(){this.observer.disconnect()}observe(e){e&&this.observer.observe(e)}unobserve(e){e&&this.observer.unobserve(e)}_setInview(e){const i=this.scrollElements.find(s=>s.$el===e.target);this.IORaf&&(i==null||i.setInteractivityOn()),!this.IORaf&&(i==null||i.setInview())}_setOutOfView(e){const i=this.scrollElements.find(s=>s.$el===e.target);this.IORaf&&(i==null||i.setInteractivityOff()),!this.IORaf&&(i==null||i.setOutOfView()),i!=null&&i.attributes.scrollRepeat||this.IORaf||this.unobserve(e.target)}}function Ne(t,e,i,s,r){return i+((r-t)/(e-t)*(s-i)||0)}function Ye(t,e){return t.reduce((i,s)=>Math.abs(s-e)<Math.abs(i-e)?s:i)}class as{constructor({$el:e,id:i,modularInstance:s,subscribeElementUpdateFn:r,unsubscribeElementUpdateFn:o,needRaf:n,scrollOrientation:a}){var l,h,c,_,E,g;this.$el=void 0,this.id=void 0,this.needRaf=void 0,this.attributes=void 0,this.scrollOrientation=void 0,this.isAlreadyIntersected=void 0,this.intersection=void 0,this.metrics=void 0,this.currentScroll=void 0,this.translateValue=void 0,this.progress=void 0,this.lastProgress=void 0,this.modularInstance=void 0,this.progressModularModules=void 0,this.isInview=void 0,this.isInteractive=void 0,this.isInFold=void 0,this.isFirstResize=void 0,this.subscribeElementUpdateFn=void 0,this.unsubscribeElementUpdateFn=void 0,this.$el=e,this.id=i,this.needRaf=n,this.scrollOrientation=a,this.modularInstance=s,this.subscribeElementUpdateFn=r,this.unsubscribeElementUpdateFn=o,this.attributes={scrollClass:(l=this.$el.dataset.scrollClass)!=null?l:"is-inview",scrollOffset:(h=this.$el.dataset.scrollOffset)!=null?h:"0,0",scrollPosition:(c=this.$el.dataset.scrollPosition)!=null?c:"start,end",scrollModuleProgress:this.$el.dataset.scrollModuleProgress!=null,scrollCssProgress:this.$el.dataset.scrollCssProgress!=null,scrollEventProgress:(_=this.$el.dataset.scrollEventProgress)!=null?_:null,scrollSpeed:this.$el.dataset.scrollSpeed!=null?parseFloat(this.$el.dataset.scrollSpeed):null,scrollParallaxSideways:this.$el.dataset.scrollParallaxSideways!=null,scrollParallaxClamp:(E=this.$el.dataset.scrollParallaxClamp)!=null?E:null,scrollRepeat:this.$el.dataset.scrollRepeat!=null,scrollCall:(g=this.$el.dataset.scrollCall)!=null?g:null,scrollCallSelf:this.$el.dataset.scrollCallSelf!=null,scrollIgnoreFold:this.$el.dataset.scrollIgnoreFold!=null,scrollEnableTouchSpeed:this.$el.dataset.scrollEnableTouchSpeed!=null},this.intersection={start:0,end:0},this.metrics={offsetStart:0,offsetEnd:0,bcr:{}},this.currentScroll=this.scrollOrientation==="vertical"?window.scrollY:window.scrollX,this.translateValue=0,this.progress=0,this.lastProgress=null,this.progressModularModules=[],this.isInview=!1,this.isInteractive=!1,this.isAlreadyIntersected=!1,this.isInFold=!1,this.isFirstResize=!0,this._init()}_init(){this.needRaf&&(this.modularInstance&&this.attributes.scrollModuleProgress&&this._getProgressModularModules(),this._resize())}onResize({currentScroll:e}){this.currentScroll=e,this._resize()}onRender({currentScroll:e,smooth:i}){const s=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth;if(this.currentScroll=e,this._computeProgress(),this.attributes.scrollSpeed&&!isNaN(this.attributes.scrollSpeed))if(this.attributes.scrollEnableTouchSpeed||i){if(this.isInFold){const r=Math.max(0,this.progress);this.translateValue=r*s*this.attributes.scrollSpeed*-1}else{let r=Ne(0,1,-1,1,this.progress);switch(this.attributes.scrollParallaxClamp){case"+":r=Math.max(r,0);break;case"-":r=Math.min(r,0)}this.translateValue=r*s*this.attributes.scrollSpeed*-1}this.$el.style.transform=`translate3d(${this.scrollOrientation==="vertical"?this.attributes.scrollParallaxSideways?`${this.translateValue}px, 0`:`0, ${this.translateValue}px`:this.attributes.scrollParallaxSideways?`0, ${this.translateValue}px`:`${this.translateValue}px, 0`}, 0)`}else this.translateValue&&(this.$el.style.transform="translate3d(0, 0, 0)"),this.translateValue=0}setInview(){if(this.isInview)return;this.isInview=!0,this.$el.classList.add(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("enter",e)}setOutOfView(){if(!this.isInview||!this.attributes.scrollRepeat)return;this.isInview=!1,this.$el.classList.remove(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("leave",e)}setInteractivityOn(){this.isInteractive||(this.isInteractive=!0,this.subscribeElementUpdateFn(this))}setInteractivityOff(){this.isInteractive&&(this.isInteractive=!1,this.unsubscribeElementUpdateFn(this),this.lastProgress!=null&&this._computeProgress(Ye([0,1],this.lastProgress)))}_resize(){this.metrics.bcr=this.$el.getBoundingClientRect(),this._computeMetrics(),this._computeIntersection(),this.isFirstResize&&(this.isFirstResize=!1,this.isInFold&&this.setInview())}_computeMetrics(){const{top:e,left:i,height:s,width:r}=this.metrics.bcr,o=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,n=this.scrollOrientation==="vertical"?s:r;this.metrics.offsetStart=this.currentScroll+(this.scrollOrientation==="vertical"?e:i)-this.translateValue,this.metrics.offsetEnd=this.metrics.offsetStart+n,this.isInFold=this.metrics.offsetStart<o&&!this.attributes.scrollIgnoreFold}_computeIntersection(){const e=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,i=this.scrollOrientation==="vertical"?this.metrics.bcr.height:this.metrics.bcr.width,s=this.attributes.scrollOffset.split(","),r=s[0]!=null?s[0].trim():"0",o=s[1]!=null?s[1].trim():"0",n=this.attributes.scrollPosition.split(",");let a=n[0]!=null?n[0].trim():"start";const l=n[1]!=null?n[1].trim():"end",h=r.includes("%")?e*parseInt(r.replace("%","").trim())*.01:parseInt(r),c=o.includes("%")?e*parseInt(o.replace("%","").trim())*.01:parseInt(o);switch(this.isInFold&&(a="fold"),a){case"start":default:this.intersection.start=this.metrics.offsetStart-e+h;break;case"middle":this.intersection.start=this.metrics.offsetStart-e+h+.5*i;break;case"end":this.intersection.start=this.metrics.offsetStart-e+h+i;break;case"fold":this.intersection.start=0}switch(l){case"start":this.intersection.end=this.metrics.offsetStart-c;break;case"middle":this.intersection.end=this.metrics.offsetStart-c+.5*i;break;default:this.intersection.end=this.metrics.offsetStart-c+i}if(this.intersection.end<=this.intersection.start)switch(l){case"start":default:this.intersection.end=this.intersection.start+1;break;case"middle":this.intersection.end=this.intersection.start+.5*i;break;case"end":this.intersection.end=this.intersection.start+i}}_computeProgress(e){const i=e!=null?e:(s=Ne(this.intersection.start,this.intersection.end,0,1,this.currentScroll))<0?0:s>1?1:s;var s;if(this.progress=i,i!=this.lastProgress){if(this.lastProgress=i,this.attributes.scrollCssProgress&&this._setCssProgress(i),this.attributes.scrollEventProgress&&this._setCustomEventProgress(i),this.attributes.scrollModuleProgress)for(const r of this.progressModularModules)this.modularInstance&&this.modularInstance.call("onScrollProgress",i,r.moduleName,r.moduleId);i>0&&i<1&&this.setInview(),i===0&&this.setOutOfView(),i===1&&this.setOutOfView()}}_setCssProgress(e=0){this.$el.style.setProperty("--progress",e.toString())}_setCustomEventProgress(e=0){const i=this.attributes.scrollEventProgress;if(!i)return;const s=new CustomEvent(i,{detail:{target:this.$el,progress:e}});window.dispatchEvent(s)}_getProgressModularModules(){if(!this.modularInstance)return;const e=Object.keys(this.$el.dataset).filter(s=>s.includes("module")),i=Object.entries(this.modularInstance.modules);if(e.length)for(const s of e){const r=this.$el.dataset[s];if(!r)return;for(const o of i){const[n,a]=o;r in a&&this.progressModularModules.push({moduleName:n,moduleId:r})}}}_getScrollCallFrom(){const e=Ye([this.intersection.start,this.intersection.end],this.currentScroll);return this.intersection.start===e?"start":"end"}_dispatchCall(e,i){var s,r;const o=(s=this.attributes.scrollCall)==null?void 0:s.split(","),n=(r=this.attributes)==null?void 0:r.scrollCallSelf;if(o&&o.length>1){var a;const[l,h,c]=o;let _;_=n?this.$el.dataset[`module${h.trim()}`]:c,this.modularInstance&&this.modularInstance.call(l.trim(),{target:this.$el,way:e,from:i},h.trim(),(a=_)==null?void 0:a.trim())}else if(o){const[l]=o,h=new CustomEvent(l,{detail:{target:this.$el,way:e,from:i}});window.dispatchEvent(h)}}}const ls=["scrollOffset","scrollPosition","scrollModuleProgress","scrollCssProgress","scrollEventProgress","scrollSpeed"];class hs{constructor({$el:e,modularInstance:i,triggerRootMargin:s,rafRootMargin:r,scrollOrientation:o}){this.$scrollContainer=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.scrollElements=void 0,this.triggeredScrollElements=void 0,this.RAFScrollElements=void 0,this.scrollElementsToUpdate=void 0,this.IOTriggerInstance=void 0,this.IORafInstance=void 0,this.scrollOrientation=void 0,e?(this.$scrollContainer=e,this.modularInstance=i,this.scrollOrientation=o,this.triggerRootMargin=s!=null?s:"-1px -1px -1px -1px",this.rafRootMargin=r!=null?r:"100% 100% 100% 100%",this.scrollElements=[],this.triggeredScrollElements=[],this.RAFScrollElements=[],this.scrollElementsToUpdate=[],this._init()):console.error("Please provide a DOM Element as scrollContainer")}_init(){const e=this.$scrollContainer.querySelectorAll("[data-scroll]"),i=Array.from(e);this._subscribeScrollElements(i),this.IOTriggerInstance=new Me({scrollElements:[...this.triggeredScrollElements],rootMargin:this.triggerRootMargin,IORaf:!1}),this.IORafInstance=new Me({scrollElements:[...this.RAFScrollElements],rootMargin:this.rafRootMargin,IORaf:!0})}destroy(){this.IOTriggerInstance.destroy(),this.IORafInstance.destroy(),this._unsubscribeAllScrollElements()}onResize({currentScroll:e}){for(const i of this.RAFScrollElements)i.onResize({currentScroll:e})}onRender({currentScroll:e,smooth:i}){for(const s of this.scrollElementsToUpdate)s.onRender({currentScroll:e,smooth:i})}removeScrollElements(e){const i=e.querySelectorAll("[data-scroll]");if(i.length){for(let s=0;s<this.triggeredScrollElements.length;s++){const r=this.triggeredScrollElements[s];Array.from(i).indexOf(r.$el)>-1&&(this.IOTriggerInstance.unobserve(r.$el),this.triggeredScrollElements.splice(s,1))}for(let s=0;s<this.RAFScrollElements.length;s++){const r=this.RAFScrollElements[s];Array.from(i).indexOf(r.$el)>-1&&(this.IORafInstance.unobserve(r.$el),this.RAFScrollElements.splice(s,1))}i.forEach(s=>{const r=this.scrollElementsToUpdate.find(n=>n.$el===s),o=this.scrollElements.find(n=>n.$el===s);r&&this._unsubscribeElementUpdate(r),o&&(this.scrollElements=this.scrollElements.filter(n=>n.id!=o.id))})}}addScrollElements(e){const i=e.querySelectorAll("[data-scroll]"),s=[];this.scrollElements.forEach(n=>{s.push(n.id)});const r=Math.max(...s,0)+1,o=Array.from(i);this._subscribeScrollElements(o,r,!0)}_subscribeScrollElements(e,i=0,s=!1){for(let r=0;r<e.length;r++){const o=e[r],n=this._checkRafNeeded(o),a=new as({$el:o,id:i+r,scrollOrientation:this.scrollOrientation,modularInstance:this.modularInstance,subscribeElementUpdateFn:this._subscribeElementUpdate.bind(this),unsubscribeElementUpdateFn:this._unsubscribeElementUpdate.bind(this),needRaf:n});this.scrollElements.push(a),n?(this.RAFScrollElements.push(a),s&&(this.IORafInstance.scrollElements.push(a),this.IORafInstance.observe(a.$el))):(this.triggeredScrollElements.push(a),s&&(this.IOTriggerInstance.scrollElements.push(a),this.IOTriggerInstance.observe(a.$el)))}}_unsubscribeAllScrollElements(){this.scrollElements=[],this.RAFScrollElements=[],this.triggeredScrollElements=[],this.scrollElementsToUpdate=[]}_subscribeElementUpdate(e){this.scrollElementsToUpdate.push(e)}_unsubscribeElementUpdate(e){this.scrollElementsToUpdate=this.scrollElementsToUpdate.filter(i=>i.id!=e.id)}_checkRafNeeded(e){let i=[...ls];const s=r=>{i=i.filter(o=>o!=r)};if(e.dataset.scrollOffset){if(e.dataset.scrollOffset.split(",").map(r=>r.replace("%","").trim()).join(",")!="0,0")return!0;s("scrollOffset")}else s("scrollOffset");if(e.dataset.scrollPosition){if(e.dataset.scrollPosition.trim()!="top,bottom")return!0;s("scrollPosition")}else s("scrollPosition");if(e.dataset.scrollSpeed&&!isNaN(parseFloat(e.dataset.scrollSpeed)))return!0;s("scrollSpeed");for(const r of i)if(r in e.dataset)return!0;return!1}}class cs{constructor({resizeElements:e,resizeCallback:i=()=>{}}){this.$resizeElements=void 0,this.isFirstObserve=void 0,this.observer=void 0,this.resizeCallback=void 0,this.$resizeElements=e,this.resizeCallback=i,this.isFirstObserve=!0,this._init()}_init(){this.observer=new ResizeObserver(e=>{var i;!this.isFirstObserve&&((i=this.resizeCallback)==null||i.call(this)),this.isFirstObserve=!1});for(const e of this.$resizeElements)this.observer.observe(e)}destroy(){this.observer.disconnect()}}class ds{constructor({lenisOptions:e={},modularInstance:i,triggerRootMargin:s,rafRootMargin:r,autoResize:o=!0,autoStart:n=!0,scrollCallback:a=()=>{},initCustomTicker:l,destroyCustomTicker:h}={}){this.rafPlaying=void 0,this.lenisInstance=void 0,this.coreInstance=void 0,this.lenisOptions=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.rafInstance=void 0,this.autoResize=void 0,this.autoStart=void 0,this.ROInstance=void 0,this.initCustomTicker=void 0,this.destroyCustomTicker=void 0,this._onRenderBind=void 0,this._onResizeBind=void 0,this._onScrollToBind=void 0;for(const[c]of Object.entries(e))["wrapper","content","infinite"].includes(c)&&console.warn(`Warning: Key "${c}" is not possible to edit in Locomotive Scroll.`);Object.assign(this,{lenisOptions:e,modularInstance:i,triggerRootMargin:s,rafRootMargin:r,autoResize:o,autoStart:n,scrollCallback:a,initCustomTicker:l,destroyCustomTicker:h}),this._onRenderBind=this._onRender.bind(this),this._onScrollToBind=this._onScrollTo.bind(this),this._onResizeBind=this._onResize.bind(this),this.rafPlaying=!1,this._init()}_init(){var e;this.lenisInstance=new os(Ee({},this.lenisOptions,{wrapper:window,content:document.documentElement,infinite:!1})),(e=this.lenisInstance)==null||e.on("scroll",this.scrollCallback),document.documentElement.setAttribute("data-scroll-orientation",this.lenisInstance.options.orientation),requestAnimationFrame(()=>{this.coreInstance=new hs({$el:this.lenisInstance.rootElement,modularInstance:this.modularInstance,triggerRootMargin:this.triggerRootMargin,rafRootMargin:this.rafRootMargin,scrollOrientation:this.lenisInstance.options.orientation}),this._bindEvents(),this.initCustomTicker&&!this.destroyCustomTicker?console.warn("initCustomTicker callback is declared, but destroyCustomTicker is not. Please pay attention. It could cause trouble."):!this.initCustomTicker&&this.destroyCustomTicker&&console.warn("destroyCustomTicker callback is declared, but initCustomTicker is not. Please pay attention. It could cause trouble."),this.autoStart&&this.start()})}destroy(){var e;this.stop(),this._unbindEvents(),this.lenisInstance.destroy(),(e=this.coreInstance)==null||e.destroy(),requestAnimationFrame(()=>{var i;(i=this.coreInstance)==null||i.destroy()})}_bindEvents(){this._bindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance=new cs({resizeElements:[document.body],resizeCallback:this._onResizeBind}):window.addEventListener("resize",this._onResizeBind))}_unbindEvents(){this._unbindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance&&this.ROInstance.destroy():window.removeEventListener("resize",this._onResizeBind))}_bindScrollToEvents(e){const i=e||this.lenisInstance.rootElement,s=i==null?void 0:i.querySelectorAll("[data-scroll-to]");s!=null&&s.length&&s.forEach(r=>{r.addEventListener("click",this._onScrollToBind,!1)})}_unbindScrollToEvents(e){const i=e||this.lenisInstance.rootElement,s=i==null?void 0:i.querySelectorAll("[data-scroll-to]");s!=null&&s.length&&s.forEach(r=>{r.removeEventListener("click",this._onScrollToBind,!1)})}_onResize(){requestAnimationFrame(()=>{var e;(e=this.coreInstance)==null||e.onResize({currentScroll:this.lenisInstance.scroll})})}_onRender(){var e,i;(e=this.lenisInstance)==null||e.raf(Date.now()),(i=this.coreInstance)==null||i.onRender({currentScroll:this.lenisInstance.scroll,smooth:this.lenisInstance.options.smoothWheel})}_onScrollTo(e){var i;e.preventDefault();const s=(i=e.currentTarget)!=null?i:null;if(!s)return;const r=s.getAttribute("data-scroll-to-href")||s.getAttribute("href"),o=s.getAttribute("data-scroll-to-offset")||0,n=s.getAttribute("data-scroll-to-duration")||this.lenisInstance.options.duration;r&&this.scrollTo(r,{offset:typeof o=="string"?parseInt(o):o,duration:typeof n=="string"?parseInt(n):n})}start(){var e;this.rafPlaying||((e=this.lenisInstance)==null||e.start(),this.rafPlaying=!0,this.initCustomTicker?this.initCustomTicker(this._onRenderBind):this._raf())}stop(){var e;this.rafPlaying&&((e=this.lenisInstance)==null||e.stop(),this.rafPlaying=!1,this.destroyCustomTicker?this.destroyCustomTicker(this._onRenderBind):this.rafInstance&&cancelAnimationFrame(this.rafInstance))}removeScrollElements(e){var i;e?(this._unbindScrollToEvents(e),(i=this.coreInstance)==null||i.removeScrollElements(e)):console.error("Please provide a DOM Element as $oldContainer")}addScrollElements(e){var i;e?((i=this.coreInstance)==null||i.addScrollElements(e),requestAnimationFrame(()=>{this._bindScrollToEvents(e)})):console.error("Please provide a DOM Element as $newContainer")}resize(){this._onResizeBind()}scrollTo(e,i){var s;(s=this.lenisInstance)==null||s.scrollTo(e,{offset:i==null?void 0:i.offset,lerp:i==null?void 0:i.lerp,duration:i==null?void 0:i.duration,immediate:i==null?void 0:i.immediate,lock:i==null?void 0:i.lock,force:i==null?void 0:i.force,easing:i==null?void 0:i.easing,onComplete:i==null?void 0:i.onComplete})}_raf(){this._onRenderBind(),this.rafInstance=requestAnimationFrame(()=>this._raf())}}/**
* Muuri v0.9.5
* https://muuri.dev/
* Copyright (c) 2015-present, Haltu Oy
* Released under the MIT license
* https://github.com/haltu/muuri/blob/master/LICENSE.md
* @license MIT
*
* Muuri Packer
* Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri Ticker / Muuri Emitter / Muuri Dragger
* Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri AutoScroller
* Copyright (c) 2019-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*/var ne={},pt=typeof Map=="function"?new Map:null,tt="swap",mt="move",us="synchronize",ht="layoutStart",Xe="layoutEnd",ze="layoutAbort",Fe="add",He="remove",fs="showStart",_s="showEnd",kt="hideStart",vs="hideEnd",Ve="filter",Be="sort",Zt="move",Qt="send",ct="beforeSend",Kt="receive",Jt="beforeReceive",ps="dragInit",ms="dragStart",gs="dragMove",ys="dragScroll",Ss="dragEnd",Es="dragReleaseStart",Pt="dragReleaseEnd",ws="destroy",ci="ontouchstart"in window,Ae=!!window.PointerEvent,Re=!!window.navigator.msPointerEnabled,bs=16777216;function Q(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}Q.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this};Q.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];if(!i||!i.length)return this;for(var s;(s=i.indexOf(e))!==-1;)i.splice(s,1);return this};Q.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this};Q.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i=this._queue,s=i.length,r=arguments.length-1,o;r>3&&(o=[],o.push.apply(o,arguments),o.shift()),i.push.apply(i,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var n=s,a=i.length;n<a;n++)if(r===0?i[n]():r===1?i[n](arguments[1]):r===2?i[n](arguments[1],arguments[2]):r===3?i[n](arguments[1],arguments[2],arguments[3]):i[n].apply(null,o),!this._events)return this;return--this._counter,this._counter||(i.length=0),this};Q.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this};Q.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0};Q.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var oe=Ae?"pointerout":Re?"MSPointerOut":"",Ts=100;function ut(t){oe&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}ut.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(oe,this._onOut))};ut.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(oe,this._onOut),this._resetData(),this._isActive=!1)};ut.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null};ut.prototype._onStart=function(t){t.pointerType!=="mouse"&&this._addBehaviour()};ut.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,Ts))};ut.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)};ut.prototype.destroy=function(){oe&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var pe=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],qe={};function ae(t,e){var i=qe[e]||"";if(i)return i;for(var s=e[0].toUpperCase()+e.slice(1),r=0;r<pe.length;){if(i=pe[r]?pe[r]+s:e,i in t)return qe[e]=i,i;++r}return""}function di(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(i){}return t}var le=window.navigator.userAgent.toLowerCase(),Is=le.indexOf("edge")>-1,Ds=le.indexOf("trident")>-1,As=le.indexOf("firefox")>-1,Rs=le.indexOf("android")>-1,at=di()?{passive:!0}:!1,ui="touchAction",Wt=ae(document.documentElement.style,ui),Ls="auto";function f(t,e){this._element=t,this._emitter=new Q,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(Is||Ds)&&(Ae||Re)&&(this._edgeHack=new ut(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(Ls),t.addEventListener("dragstart",f._preventDefault,!1),t.addEventListener(f._inputEvents.start,this._onStart,at)}f._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"};f._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"};f._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"};f._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"};f._inputEvents=function(){return ci?f._touchEvents:Ae?f._pointerEvents:Re?f._msPointerEvents:f._mouseEvents}();f._emitter=new Q;f._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"};f._activeInstances=[];f._preventDefault=function(t){t.preventDefault&&t.cancelable!==!1&&t.preventDefault()};f._activateInstance=function(t){var e=f._activeInstances.indexOf(t);e>-1||(f._activeInstances.push(t),f._emitter.on(f._emitterEvents.move,t._onMove),f._emitter.on(f._emitterEvents.cancel,t._onCancel),f._emitter.on(f._emitterEvents.end,t._onEnd),f._activeInstances.length===1&&f._bindListeners())};f._deactivateInstance=function(t){var e=f._activeInstances.indexOf(t);e!==-1&&(f._activeInstances.splice(e,1),f._emitter.off(f._emitterEvents.move,t._onMove),f._emitter.off(f._emitterEvents.cancel,t._onCancel),f._emitter.off(f._emitterEvents.end,t._onEnd),f._activeInstances.length||f._unbindListeners())};f._bindListeners=function(){window.addEventListener(f._inputEvents.move,f._onMove,at),window.addEventListener(f._inputEvents.end,f._onEnd,at),f._inputEvents.cancel&&window.addEventListener(f._inputEvents.cancel,f._onCancel,at)};f._unbindListeners=function(){window.removeEventListener(f._inputEvents.move,f._onMove,at),window.removeEventListener(f._inputEvents.end,f._onEnd,at),f._inputEvents.cancel&&window.removeEventListener(f._inputEvents.cancel,f._onCancel,at)};f._getEventPointerId=function(t){return typeof t.pointerId=="number"?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1};f._getTouchById=function(t,e){if(typeof t.pointerId=="number")return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t};f._onMove=function(t){f._emitter.emit(f._emitterEvents.move,t)};f._onCancel=function(t){f._emitter.emit(f._emitterEvents.cancel,t)};f._onEnd=function(t){f._emitter.emit(f._emitterEvents.end,t)};f.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,f._deactivateInstance(this)};f.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===f._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===f._emitterEvents.start,isFinal:t===f._emitterEvents.end||t===f._emitterEvents.cancel,pointerType:e.pointerType||(e.touches?"touch":"mouse"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}};f.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))};f.prototype._getTrackedTouch=function(t){return this._pointerId===null?null:f._getTouchById(t,this._pointerId)};f.prototype._onStart=function(t){if(!this._isDestroyed&&this._pointerId===null&&(this._pointerId=f._getEventPointerId(t),this._pointerId!==null)){var e=this._getTrackedTouch(t);this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(f._emitterEvents.start,t),this._isActive&&f._activateInstance(this)}};f.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(f._emitterEvents.move,t))};f.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(f._emitterEvents.cancel,t),this._reset())};f.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(f._emitterEvents.end,t),this._reset())};f.prototype.isActive=function(){return this._isActive};f.prototype.setTouchAction=function(t){this._touchAction=t,Wt&&(this._cssProps[Wt]="",this._element.style[Wt]=t),ci&&(this._element.removeEventListener(f._touchEvents.start,f._preventDefault,!0),(this._element.style[Wt]!==t||As&&Rs)&&this._element.addEventListener(f._touchEvents.start,f._preventDefault,!0))};f.prototype.setCssProps=function(t){if(t){var e=this._cssProps,i=this._element,s,r;for(s in e)i.style[s]=e[s],delete e[s];for(s in t)if(t[s]){if(s===ui){this.setTouchAction(t[s]);continue}r=ae(i.style,s),r&&(e[r]="",i.style[r]=t[s])}}};f.prototype.getDeltaX=function(){return this._currentX-this._startX};f.prototype.getDeltaY=function(){return this._currentY-this._startY};f.prototype.getDistance=function(){var t=this.getDeltaX(),e=this.getDeltaY();return Math.sqrt(t*t+e*e)};f.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0};f.prototype.on=function(t,e){this._emitter.on(t,e)};f.prototype.off=function(t,e){this._emitter.off(t,e)};f.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(f._inputEvents.start,this._onStart,at),t.removeEventListener("dragstart",f._preventDefault,!1),t.removeEventListener(f._touchEvents.start,f._preventDefault,!0);for(var e in this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var xs=1e3/60,Cs=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return this.setTimeout(function(){t(Date.now())},xs)}).bind(window);function he(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new Le)}he.prototype._step=function(t){var e=this._lanes,i=this._stepQueue,s=this._stepCallbacks,r,o,n,a,l,h;for(this._nextStep=null,r=0;r<e.length;r++){for(a=e[r].queue,l=e[r].callbacks,h=e[r].indices,o=0;o<a.length;o++)n=a[o],n&&(i.push(n),s[n]=l[n],delete l[n],delete h[n]);a.length=0}for(r=0;r<i.length;r++)n=i[r],s[n]&&s[n](t),delete s[n];i.length=0};he.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nextStep=Cs(this._step))};he.prototype.remove=function(t,e){this._lanes[t].remove(e)};function Le(){this.queue=[],this.indices={},this.callbacks={}}Le.prototype.add=function(t,e){var i=this.indices[t];i!==void 0&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1};Le.prototype.remove=function(t){var e=this.indices[t];e!==void 0&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var fi="layoutRead",_i="layoutWrite",vi="visibilityRead",pi="visibilityWrite",mi="dragStartRead",gi="dragStartWrite",yi="dragMoveRead",Si="dragMoveWrite",Ei="dragScrollRead",wi="dragScrollWrite",bi="dragSortRead",Ti="placeholderLayoutRead",Ii="placeholderLayoutWrite",Di="placeholderResizeWrite",Ai="autoScrollRead",Ri="autoScrollWrite",Li="debounceRead",H=0,xi=1,V=2,x=new he(3);function ks(t,e,i){x.add(H,fi+t,e),x.add(V,_i+t,i)}function Ci(t){x.remove(H,fi+t),x.remove(V,_i+t)}function Ps(t,e,i){x.add(H,vi+t,e),x.add(V,pi+t,i)}function ki(t){x.remove(H,vi+t),x.remove(V,pi+t)}function Os(t,e,i){x.add(H,mi+t,e),x.add(V,gi+t,i)}function Pi(t){x.remove(H,mi+t),x.remove(V,gi+t)}function Ms(t,e,i){x.add(H,yi+t,e),x.add(V,Si+t,i)}function Oi(t){x.remove(H,yi+t),x.remove(V,Si+t)}function Ns(t,e,i){x.add(H,Ei+t,e),x.add(V,wi+t,i)}function Mi(t){x.remove(H,Ei+t),x.remove(V,wi+t)}function ce(t,e){x.add(xi,bi+t,e)}function Ys(t){x.remove(xi,bi+t)}function Xs(t,e,i){x.add(H,Ti+t,e),x.add(V,Ii+t,i)}function Ni(t){x.remove(H,Ti+t),x.remove(V,Ii+t)}function zs(t,e){x.add(V,Di+t,e)}function Fs(t){x.remove(V,Di+t)}function Yi(t,e){x.add(H,Ai,t),x.add(V,Ri,e)}function Hs(){x.remove(H,Ai),x.remove(V,Ri)}function Vs(t,e){x.add(H,Li+t,e)}function Bs(t){x.remove(H,Li+t)}var M=1,z=2,Rt=4,xe=8,Ot=M|xe,Mt=M|Rt,Nt=z|xe,te=z|Rt,qs="function";function D(t){return typeof t===qs}var Gt=typeof WeakMap=="function"?new WeakMap:null;function W(t,e){var i=Gt&&Gt.get(t);return i||(i=window.getComputedStyle(t,null),Gt&&Gt.set(t,i)),i.getPropertyValue(e)}function Z(t,e){return parseFloat(W(t,e))||0}var gt=document.documentElement,Ws=document.body,$t={value:0,offset:0};function Xi(t){return t===window||t===gt||t===Ws?window:t}function Yt(t){return t===window?t.pageXOffset:t.scrollLeft}function Xt(t){return t===window?t.pageYOffset:t.scrollTop}function zi(t){return t===window?gt.scrollWidth-gt.clientWidth:t.scrollWidth-t.clientWidth}function Fi(t){return t===window?gt.scrollHeight-gt.clientHeight:t.scrollHeight-t.clientHeight}function Hi(t,e){if(e=e||{},t===window)e.width=gt.clientWidth,e.height=gt.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),s=t.clientLeft||Z(t,"border-left-width"),r=t.clientTop||Z(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+s,e.right=e.left+e.width,e.top=i.top+r,e.bottom=e.top+e.height}return e}function Vt(t){return t._drag._getGrid()._settings.dragAutoScroll}function Gs(t){t._drag&&t._drag._prepareScroll()}function $s(t){if(!(!t._drag||!t._isActive)){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._left,e._top)}}function we(t,e,i,s){return $t.value=Math.min(s/2,t),$t.offset=Math.max(0,i+$t.value*2+s*e-s)/2,$t}function rt(){this.reset()}rt.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null};rt.prototype.hasReachedEnd=function(){return Rt&this.direction?this.value>=this.maxValue:this.value<=0};rt.prototype.computeCurrentScrollValue=function(){return this.value===null?M&this.direction?Yt(this.element):Xt(this.element):Math.max(0,Math.min(this.value,this.maxValue))};rt.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=Rt&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))};rt.prototype.computeSpeed=function(){var t={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1};return function(e){var i=this.item,s=Vt(i).speed;return D(s)?(t.direction=this.direction,t.threshold=this.threshold,t.distance=this.distance,t.value=this.value,t.maxValue=this.maxValue,t.duration=this.duration,t.speed=this.speed,t.deltaTime=e,t.isEnding=this.isEnding,s(i,this.element,t)):s}}();rt.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value};rt.prototype.onStart=function(){var t=this.item,e=Vt(t).onStart;D(e)&&e(t,this.element,this.direction)};rt.prototype.onStop=function(){var t=this.item,e=Vt(t).onStop;D(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()};function Lt(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}Lt.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0};Lt.prototype.addRequest=function(t){M&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this};Lt.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))};Lt.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:Yt(this.element),this.scrollTop=this.requestY?this.requestY.value:Xt(this.element)};Lt.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scrollTop=this.scrollTop))};function zt(t,e){this.pool=[],this.createItem=t,this.releaseItem=e}zt.prototype.pick=function(){return this.pool.pop()||this.createItem()};zt.prototype.release=function(t){this.releaseItem(t),this.pool.indexOf(t)===-1&&this.pool.push(t)};zt.prototype.reset=function(){this.pool.length=0};function Us(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function js(t,e){if(!Us(t,e))return 0;var i=Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left),s=Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top);return i*s}function ee(t,e){var i=js(t,e);if(!i)return 0;var s=Math.min(t.width,e.width)*Math.min(t.height,e.height);return i/s*100}var Vi={width:0,height:0,left:0,right:0,top:0,bottom:0},Bi={width:0,height:0,left:0,right:0,top:0,bottom:0};function C(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[M]={},this._requests[z]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new zt(function(){return new rt},function(t){t.reset()}),this._actionPool=new zt(function(){return new Lt},function(t){t.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}C.AXIS_X=M;C.AXIS_Y=z;C.FORWARD=Rt;C.BACKWARD=xe;C.LEFT=Ot;C.RIGHT=Mt;C.UP=Nt;C.DOWN=te;C.smoothSpeed=function(t,e,i){return function(s,r,o){var n=0;if(!o.isEnding)if(o.threshold>0){var a=o.threshold-Math.max(0,o.distance);n=t/o.threshold*a}else n=t;var l=o.speed,h=n;return l===n?h:l<n?(h=l+e*(o.deltaTime/1e3),Math.min(n,h)):(h=l-i*(o.deltaTime/1e3),Math.max(n,h))}};C.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(s,r,o,n,a,l,h){return e.left=l-i*.5,e.top=h-i*.5,e.width=i,e.height=i,e}};C.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))};C.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),Yi(this._readTick,this._writeTick))};C.prototype._startTicking=function(){this._isTicking=!0,Yi(this._readTick,this._writeTick)};C.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,Hs()};C.prototype._getItemHandleRect=function(t,e,i){var s=t._drag;if(e){var r=s._dragMoveEvent||s._dragStartEvent,o=e(t,s._clientX,s._clientY,t._width,t._height,r.clientX,r.clientY);i.left=o.left,i.top=o.top,i.width=o.width,i.height=o.height}else i.left=s._clientX,i.top=s._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i};C.prototype._requestItemScroll=function(t,e,i,s,r,o,n){var a=this._requests[e],l=a[t._id];l?(l.element!==i||l.direction!==s)&&l.reset():l=this._requestPool.pick(),l.item=t,l.element=i,l.direction=s,l.threshold=r,l.distance=o,l.maxValue=n,a[t._id]=l};C.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],s=i[t._id];s&&(s.action&&s.action.removeRequest(s),this._requestPool.release(s),delete i[t._id])};C.prototype._checkItemOverlap=function(t,e,i){var s=Vt(t),r=D(s.targets)?s.targets(t):s.targets,o=s.threshold,n=s.safeZone;if(!r||!r.length){e&&this._cancelItemScroll(t,M),i&&this._cancelItemScroll(t,z);return}var a=this._dragDirections[t._id],l=a[0],h=a[1];if(!l&&!h){e&&this._cancelItemScroll(t,M),i&&this._cancelItemScroll(t,z);return}for(var c=this._getItemHandleRect(t,s.handle,Vi),_=Bi,E=null,g=null,w=!0,d=!0,u=0,y=0,v=null,S=null,p=0,b=0,A=0,P=null,k=-1/0,R=0,j=0,N=null,q=0,G=0,Y=null,J=-1/0,qt=0,xt=0,$=null,yt=0,St=0,_t=0;_t<r.length;_t++)E=r[_t],w=e&&l&&E.axis!==z,d=i&&h&&E.axis!==M,y=E.priority||0,!((!w||y<k)&&(!d||y<J))&&(g=Xi(E.element||E),b=w?zi(g):-1,A=d?Fi(g):-1,!(!b&&!A)&&(_=Hi(g,_),u=ee(c,_),!(u<=0)&&(w&&y>=k&&b>0&&(y>k||u>j)&&(S=null,v=we(typeof E.threshold=="number"?E.threshold:o,n,c.width,_.width),l===Mt?(p=_.right+v.offset-c.right,p<=v.value&&Yt(g)<b&&(S=Mt)):l===Ot&&(p=c.left-(_.left-v.offset),p<=v.value&&Yt(g)>0&&(S=Ot)),S!==null&&(P=g,k=y,R=v.value,j=u,N=S,q=p,G=b)),d&&y>=J&&A>0&&(y>J||u>xt)&&(S=null,v=we(typeof E.threshold=="number"?E.threshold:o,n,c.height,_.height),h===te?(p=_.bottom+v.offset-c.bottom,p<=v.value&&Xt(g)<A&&(S=te)):h===Nt&&(p=c.top-(_.top-v.offset),p<=v.value&&Xt(g)>0&&(S=Nt)),S!==null&&(Y=g,J=y,qt=v.value,xt=u,$=S,yt=p,St=A)))));e&&(P?this._requestItemScroll(t,M,P,N,R,q,G):this._cancelItemScroll(t,M)),i&&(Y?this._requestItemScroll(t,z,Y,$,qt,yt,St):this._cancelItemScroll(t,z))};C.prototype._updateScrollRequest=function(t){for(var e=t.item,i=Vt(e),s=D(i.targets)?i.targets(e):i.targets,r=s&&s.length||0,o=i.threshold,n=i.safeZone,a=this._getItemHandleRect(e,i.handle,Vi),l=Bi,h=null,c=null,_=!1,E=null,g=null,w=null,d=null,u=null,y=null,v=0;v<r;v++)if(h=s[v],c=Xi(h.element||h),c===t.element){if(_=!!(M&t.direction),_){if(h.axis===z)continue}else if(h.axis===M)continue;if(u=_?zi(c):Fi(c),u<=0||(l=Hi(c,l),E=ee(a,l),E<=0)||(g=we(typeof h.threshold=="number"?h.threshold:o,n,_?a.width:a.height,_?l.width:l.height),t.direction===Ot?w=a.left-(l.left-g.offset):t.direction===Mt?w=l.right+g.offset-a.right:t.direction===Nt?w=a.top-(l.top-g.offset):w=l.bottom+g.offset-a.bottom,w>g.value)||(d=_?Yt(c):Xt(c),y=Rt&t.direction?d>=u:d<=0,y))break;return t.maxValue=u,t.threshold=g.value,t.distance=w,t.isEnding=!1,!0}return i.smoothStop===!0&&t.speed>0?(y===null&&(y=t.hasReachedEnd()),t.isEnding=!y):t.isEnding=!1,t.isEnding};C.prototype._updateRequests=function(){for(var t=this._items,e=this._requests[M],i=this._requests[z],s,r,o,n,a,l,h,c=0;c<t.length;c++)s=t[c],n=this._requestOverlapCheck[s._id],a=n>0&&this._tickTime-n>this._overlapCheckInterval,l=!0,r=e[s._id],r&&r.isActive&&(l=!this._updateScrollRequest(r),l&&(a=!0,this._cancelItemScroll(s,M))),h=!0,o=i[s._id],o&&o.isActive&&(h=!this._updateScrollRequest(o),h&&(a=!0,this._cancelItemScroll(s,z))),a&&(this._requestOverlapCheck[s._id]=0,this._checkItemOverlap(s,l,h))};C.prototype._requestAction=function(t,e){for(var i=this._actions,s=e===M,r=null,o=0;o<i.length;o++){if(r=i[o],t.element!==r.element){r=null;continue}if(s?r.requestX:r.requestY){this._cancelItemScroll(t.item,e);return}break}r||(r=this._actionPool.pick()),r.element=t.element,r.addRequest(t),t.tick(this._tickDeltaTime),i.push(r)};C.prototype._updateActions=function(){var t=this._items,e=this._requests,i=this._actions,s,r,o,n;for(n=0;n<t.length;n++)s=t[n]._id,r=e[M][s],o=e[z][s],r&&this._requestAction(r,M),o&&this._requestAction(o,z);for(n=0;n<i.length;n++)i[n].computeScrollValues()};C.prototype._applyActions=function(){var t=this._actions,e=this._items,i;if(t.length){for(i=0;i<t.length;i++)t[i].scroll(),this._actionPool.release(t[i]);for(t.length=0,i=0;i<e.length;i++)Gs(e[i]);for(i=0;i<e.length;i++)$s(e[i])}};C.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],s=t._drag._left,r=t._drag._top;if(e.length){var o=e[0],n=e[1];i[0]=s>o?Mt:s<o?Ot:i[0]||0,i[1]=r>n?te:r<n?Nt:i[1]||0}e[0]=s,e[1]=r};C.prototype.addItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);e===-1&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())}};C.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))};C.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(e!==-1){var i=t._id,s=this._requests[M][i];s&&(this._cancelItemScroll(t,M),delete this._requests[M][i]);var r=this._requests[z][i];r&&(this._cancelItemScroll(t,z),delete this._requests[z][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}};C.prototype.isItemScrollingX=function(t){var e=this._requests[M][t._id];return!!(e&&e.isActive)};C.prototype.isItemScrollingY=function(t){var e=this._requests[z][t._id];return!!(e&&e.isActive)};C.prototype.isItemScrolling=function(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)};C.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var Et=window.Element.prototype,Zs=Et.matches||Et.matchesSelector||Et.webkitMatchesSelector||Et.mozMatchesSelector||Et.msMatchesSelector||Et.oMatchesSelector||function(){return!1};function de(t,e){return Zs.call(t,e)}function U(t,e){e&&(t.classList?t.classList.add(e):de(t,"."+e)||(t.className+=" "+e))}var We=[],Qs="number";function Ce(t,e,i){var s=typeof i===Qs?i:-1;s<0&&(s=t.length-s+1),t.splice.apply(t,We.concat(s,0,e)),We.length=0}function It(t,e,i){var s=Math.max(0,t.length-1+(i||0));return e>s?s:e<0?Math.max(s+e+1,0):e}function qi(t,e,i){if(!(t.length<2)){var s=It(t,e),r=It(t,i);s!==r&&t.splice(r,0,t.splice(s,1)[0])}}function Wi(t,e,i){if(!(t.length<2)){var s=It(t,e),r=It(t,i),o;s!==r&&(o=t[s],t[s]=t[r],t[r]=o)}}var et=ae(document.documentElement.style,"transform")||"transform",Ks=/([A-Z])/g,Js=/^(webkit-|moz-|ms-|o-)/,tr=/^(-m-s-)/;function be(t){var e=t.replace(Ks,"-$1").toLowerCase();return e=e.replace(Js,"-$1"),e=e.replace(tr,"-ms-"),e}var Gi=be(et),er="none",ir="inline",sr="none",rr="display";function nr(t){var e=W(t,Gi);if(!e||e===er)return!1;var i=W(t,rr);return!(i===ir||i===sr)}function Te(t){for(var e=document,i=t||e;i&&i!==e&&W(i,"position")==="static"&&!nr(i);)i=i.parentElement||e;return i}var me={},ge={},vt={};function Ge(t,e){var i=e||{},s;return i.left=0,i.top=0,t===document||(i.left=window.pageXOffset||0,i.top=window.pageYOffset||0,t.self===window.self)||(s=t.getBoundingClientRect(),i.left+=s.left,i.top+=s.top,i.left+=Z(t,"border-left-width"),i.top+=Z(t,"border-top-width")),i}function Dt(t,e,i){return vt.left=0,vt.top=0,t===e||i&&(t=Te(t),e=Te(e),t===e)||(Ge(t,me),Ge(e,ge),vt.left=ge.left-me.left,vt.top=ge.top-me.top),vt}function ye(t){return t==="auto"||t==="scroll"||t==="overlay"}function or(t){return ye(W(t,"overflow"))||ye(W(t,"overflow-x"))||ye(W(t,"overflow-y"))}function $e(t,e){for(e=e||[];t&&t!==document;){if(t.getRootNode&&t instanceof DocumentFragment){t=t.getRootNode().host;continue}or(t)&&e.push(t),t=t.parentNode}return e.push(window),e}var wt={},ar="none",lr=/^matrix3d/,hr=/([^,]*,){4}/,cr=/([^,]*,){12}/,dr=/[^,]*,/;function st(t){wt.x=0,wt.y=0;var e=W(t,Gi);if(!e||e===ar)return wt;var i=lr.test(e),s=e.replace(i?cr:hr,""),r=s.replace(dr,"");return wt.x=parseFloat(s)||0,wt.y=parseFloat(r)||0,wt}function F(t,e){e&&(t.classList?t.classList.remove(e):de(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()))}var ur=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,ie=0,Ie=1,se=2,$i=di()?{passive:!0}:!1;function T(t){var e=t._element,i=t.getGrid(),s=i._settings;this._item=t,this._gridId=i._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=D(s.dragStartPredicate)?s.dragStartPredicate:T.defaultStartPredicate,this._startPredicateState=ie,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=s.dragHandle&&e.querySelector(s.dragHandle)||e,this._dragger=new f(this._handle,s.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}T.autoScroller=new C;T.defaultStartPredicate=function(t,e,i){var s=t._drag;if(e.isFirst&&e.srcEvent.button||!ur&&e.isFirst&&e.srcEvent.isTrusted===!0&&e.srcEvent.defaultPrevented===!1&&e.srcEvent.cancelable===!1)return!1;if(e.isFinal){s._finishStartPredicate(e);return}var r=s._startPredicateData;if(!r){var o=i||s._getGrid()._settings.dragStartPredicate||{};s._startPredicateData=r={distance:Math.max(o.distance,0)||0,delay:Math.max(o.delay,0)||0}}return r.delay&&(r.event=e,r.delayTimer||(r.delayTimer=window.setTimeout(function(){r.delay=0,s._resolveStartPredicate(r.event)&&(s._forceResolveStartPredicate(r.event),s._resetStartPredicate())},r.delay))),s._resolveStartPredicate(e)};T.defaultSortPredicate=function(){var t={},e={},i={},s=[],r=1,o=100;function n(a,l,h){var c=null,_=l._settings.dragSort,E=-1,g,w,d,u,y,v,S,p,b,A;if(_===!0?(s[0]=l,w=s):D(_)&&(w=_.call(l,a)),!w||!Array.isArray(w)||!w.length)return c;for(A=0;A<w.length;A++)if(d=w[A],!d._isDestroyed){for(d._updateBoundingRect(),v=Math.max(0,d._left),S=Math.max(0,d._top),p=Math.min(window.innerWidth,d._right),b=Math.min(window.innerHeight,d._bottom),u=d._element.parentNode;u&&u!==document&&u!==document.documentElement&&u!==document.body;){if(u.getRootNode&&u instanceof DocumentFragment){u=u.getRootNode().host;continue}if(W(u,"overflow")!=="visible"&&(y=u.getBoundingClientRect(),v=Math.max(v,y.left),S=Math.max(S,y.top),p=Math.min(p,y.right),b=Math.min(b,y.bottom)),W(u,"position")==="fixed")break;u=u.parentNode}v>=p||S>=b||(e.left=v,e.top=S,e.width=p-v,e.height=b-S,g=ee(t,e),g>h&&g>E&&(E=g,c=d))}return s.length=0,c}return function(a,l){var h=a._drag,c=h._getGrid(),_=l&&typeof l.threshold=="number"?l.threshold:50,E=l&&l.action===tt?tt:mt,g=l&&l.migrateAction===tt?tt:mt;_=Math.min(Math.max(_,r),o),t.width=a._width,t.height=a._height,t.left=h._clientX,t.top=h._clientY;var w=n(a,c,_);if(!w)return null;var d=a.getGrid()!==w,u=0,y=0,v=0,S=-1,p=!1,b,A,P;for(w===c?(t.left=h._gridX+a._marginLeft,t.top=h._gridY+a._marginTop):(w._updateBorders(1,0,1,0),u=w._left+w._borderLeft,y=w._top+w._borderTop),P=0;P<w._items.length;P++)b=w._items[P],!(!b._isActive||b===a)&&(p=!0,e.width=b._width,e.height=b._height,e.left=b._left+b._marginLeft+u,e.top=b._top+b._marginTop+y,A=ee(t,e),A>v&&(S=P,v=A));return d&&v<_&&(S=p?S:0,v=_),v>=_?(i.grid=w,i.index=S,i.action=d?g:E,i):null}}();T.prototype.stop=function(){if(this._isActive){if(this._isMigrating){this._finishMigration();return}var t=this._item,e=t._id;if(T.autoScroller.removeItem(t),Pi(e),Oi(e),Mi(e),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var i=t._element,s=this._getGrid(),r=s._settings.itemDraggingClass;i.parentNode!==s._element&&(s._element.appendChild(i),t._setTranslate(this._gridX,this._gridY),r&&i.clientWidth),F(i,r)}this._reset()}};T.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(t===!0?this._handleSort():ce(e._id,this._handleSort))};T.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),T.autoScroller.removeItem(this._item),this._isDestroyed=!0)};T.prototype._getGrid=function(){return ne[this._gridId]||null};T.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0};T.prototype._bindScrollListeners=function(){var t=this._getGrid()._element,e=this._container,i=this._scrollers,s,r;if(i.length=0,$e(this._item._element.parentNode,i),e!==t)for(s=[],$e(t,s),r=0;r<s.length;r++)i.indexOf(s[r])<0&&i.push(s[r]);for(r=0;r<i.length;r++)i[r].addEventListener("scroll",this._onScroll,$i)};T.prototype._unbindScrollListeners=function(){var t=this._scrollers,e;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,$i);t.length=0};T.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0};T.prototype._forceResolveStartPredicate=function(t){!this._isDestroyed&&this._startPredicateState===Ie&&(this._startPredicateState=se,this._onStart(t))};T.prototype._finishStartPredicate=function(t){var e=this._item._element,i=Math.abs(t.deltaX)<2&&Math.abs(t.deltaY)<2&&t.deltaTime<200;this._resetStartPredicate(),i&&fr(e)};T.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e};T.prototype._checkHeuristics=function(t,e){var i=this._getGrid()._settings.dragSortHeuristics,s=i.minDragDistance;if(s<=0)return this._blockedSortIndex=null,!0;var r=t-this._sortX2,o=e-this._sortY2,n=s>3&&i.minBounceBackAngle>0;if(n||(this._blockedSortIndex=null),Math.abs(r)>s||Math.abs(o)>s){if(n){var a=Math.atan2(r,o),l=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),h=Math.atan2(Math.sin(a-l),Math.cos(a-l));Math.abs(h)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1};T.prototype._resetStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)};T.prototype._handleSort=function(){if(this._isActive){var t=this._getGrid()._settings;if(!t.dragSort||!t.dragAutoScroll.sortDuringScroll&&T.autoScroller.isItemScrolling(this._item)){this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer));return}var e=this._checkHeuristics(this._gridX,this._gridY);if(!(!this._isSortNeeded&&!e)){var i=t.dragSortHeuristics.sortInterval;i<=0||this._isSortNeeded?(this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):this._sortTimer===void 0&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,i))}}};T.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,ce(this._item._id,this._handleSort)};T.prototype._cancelSort=function(){this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),Ys(this._item._id)};T.prototype._finishSort=function(){var t=this._getGrid()._settings.dragSort,e=t&&(this._isSortNeeded||this._sortTimer!==void 0);this._cancelSort(),e&&this._checkOverlap()};T.prototype._checkOverlap=function(){if(this._isActive){var t=this._item,e=this._getGrid()._settings,i,s,r,o,n,a,l,h;D(e.dragSortPredicate)?i=e.dragSortPredicate(t,this._dragMoveEvent):i=T.defaultSortPredicate(t,e.dragSortPredicate),!(!i||typeof i.index!="number")&&(l=i.action===tt?tt:mt,s=t.getGrid(),o=i.grid||s,h=s!==o,r=s._items.indexOf(t),n=It(o._items,i.index,h&&l===mt?1:0),!(!h&&n===this._blockedSortIndex)&&(h?(this._blockedSortIndex=null,a=o._items[n],s._hasListeners(ct)&&s._emit(ct,{item:t,fromGrid:s,fromIndex:r,toGrid:o,toIndex:n}),o._hasListeners(Jt)&&o._emit(Jt,{item:t,fromGrid:s,fromIndex:r,toGrid:o,toIndex:n}),t._gridId=o._id,this._isMigrating=t._gridId!==this._gridId,s._items.splice(r,1),Ce(o._items,t,n),t._sortData=null,s._hasListeners(Qt)&&s._emit(Qt,{item:t,fromGrid:s,fromIndex:r,toGrid:o,toIndex:n}),o._hasListeners(Kt)&&o._emit(Kt,{item:t,fromGrid:s,fromIndex:r,toGrid:o,toIndex:n}),l===tt&&a&&a.isActive()&&o._items.indexOf(a)>-1&&o.send(a,s,r,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),s.layout(),o.layout()):r!==n&&(this._blockedSortIndex=r,(l===tt?Wi:qi)(s._items,r,n),s._hasListeners(Zt)&&s._emit(Zt,{item:t,fromIndex:r,toIndex:n,action:l}),s.layout())))}};T.prototype._finishMigration=function(){var t=this._item,e=t._dragRelease,i=t._element,s=t._isActive,r=t.getGrid(),o=r._element,n=r._settings,a=n.dragContainer||o,l=this._getGrid()._settings,h=i.parentNode,c=s?l.itemVisibleClass:l.itemHiddenClass,_=s?n.itemVisibleClass:n.itemHiddenClass,E,g;this._isMigrating=!1,this.destroy(),l.itemClass!==n.itemClass&&(F(i,l.itemClass),U(i,n.itemClass)),c!==_&&(F(i,c),U(i,_)),a!==h&&(a.appendChild(i),g=Dt(h,a,!0),E=st(i),E.x-=g.left,E.y-=g.top),t._refreshDimensions(),g=Dt(a,o,!0),e._containerDiffX=g.left,e._containerDiffY=g.top,t._drag=n.dragEnabled?new T(t):null,a!==h&&t._setTranslate(E.x,E.y),t._visibility.setStyles(s?n.visibleStyles:n.hiddenStyles),e.start()};T.prototype._preStartCheck=function(t){this._startPredicateState===ie&&(this._startPredicateState=Ie),this._startPredicateState===Ie?(this._startPredicateResult=this._startPredicate(this._item,t),this._startPredicateResult===!0?(this._startPredicateState=se,this._onStart(t)):this._startPredicateResult===!1&&(this._resetStartPredicate(t),this._dragger._reset(),this._startPredicateState=ie)):this._startPredicateState===se&&this._isActive&&this._onMove(t)};T.prototype._preEndCheck=function(t){var e=this._startPredicateState===se;this._startPredicate(this._item,t),this._startPredicateState=ie,!(!e||!this._isActive)&&(this._isStarted?this._onEnd(t):this.stop())};T.prototype._onStart=function(t){var e=this._item;e._isActive&&(this._isActive=!0,this._dragStartEvent=t,T.autoScroller.addItem(e),Os(e._id,this._prepareStart,this._applyStart))};T.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._settings,r=i._element,o=s.dragContainer||r,n=Te(o),a=st(e),l=e.getBoundingClientRect(),h=o!==r;if(this._container=o,this._containingBlock=n,this._clientX=l.left,this._clientY=l.top,this._left=this._gridX=a.x,this._top=this._gridY=a.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),h){var c=Dt(n,r);this._containerDiffX=c.left,this._containerDiffY=c.top}}}};T.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid(),i=t._element,s=t._dragRelease,r=t._migrate,o=this._container!==e._element;t.isPositioning()&&t._layout.stop(!0,this._left,this._top),r._isActive&&(this._left-=r._containerDiffX,this._top-=r._containerDiffY,this._gridX-=r._containerDiffX,this._gridY-=r._containerDiffY,r.stop(!0,this._left,this._top)),t.isReleasing()&&s._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit(ps,t,this._dragStartEvent),o&&(i.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._left,this._top))),U(i,e._settings.itemDraggingClass),this._bindScrollListeners(),e._emit(ms,t,this._dragStartEvent)}}};T.prototype._onMove=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._dragMoveEvent=t,Ms(e._id,this._prepareMove,this._applyMove),ce(e._id,this._handleSort)};T.prototype._prepareMove=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid()._settings,i=e.dragAxis,s=this._dragMoveEvent,r=this._dragPrevMoveEvent||this._dragStartEvent||s;if(i!=="y"){var o=s.clientX-r.clientX;this._left=this._left-this._moveDiffX+o,this._gridX=this._gridX-this._moveDiffX+o,this._clientX=this._clientX-this._moveDiffX+o,this._moveDiffX=o}if(i!=="x"){var n=s.clientY-r.clientY;this._top=this._top-this._moveDiffY+n,this._gridY=this._gridY-this._moveDiffY+n,this._clientY=this._clientY-this._moveDiffY+n,this._moveDiffY=n}this._dragPrevMoveEvent=s}}};T.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(gs,t,this._dragMoveEvent),T.autoScroller.updateItem(t))}};T.prototype._onScroll=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._scrollEvent=t,Ns(e._id,this._prepareScroll,this._applyScroll),ce(e._id,this._handleSort)};T.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._element,r=e.getBoundingClientRect();if(this._container!==s){var o=Dt(this._containingBlock,s);this._containerDiffX=o.left,this._containerDiffY=o.top}var n=this._clientX-this._moveDiffX-r.left;this._left=this._left-this._scrollDiffX+n,this._scrollDiffX=n;var a=this._clientY-this._moveDiffY-r.top;this._top=this._top-this._scrollDiffY+a,this._scrollDiffY=a,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}};T.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(ys,t,this._scrollEvent))}};T.prototype._onEnd=function(t){var e=this._item,i=e._element,s=this._getGrid(),r=s._settings,o=e._dragRelease;if(!e._isActive){this.stop();return}Pi(e._id),Oi(e._id),Mi(e._id),this._finishSort(),this._unbindScrollListeners(),o._containerDiffX=this._containerDiffX,o._containerDiffY=this._containerDiffY,this._reset(),F(i,r.itemDraggingClass),T.autoScroller.removeItem(e),s._emit(Ss,e,t),this._isMigrating?this._finishMigration():o.start()};function fr(t){if(t.tagName.toLowerCase()==="a"){var e=t.getAttribute("href");if(e){var i=t.getAttribute("target");i&&i!=="_self"?window.open(e,i):window.location.href=e}}}function Ui(t,e){var i={},s,r;if(Array.isArray(e))for(r=0;r<e.length;r++)s=e[r],i[s]=W(t,be(s));else for(s in e)i[s]=W(t,be(s));return i}var _r=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,Ue={};function vr(t){var e=Ue[t];return e||(e=t.replace(_r,""),e!==t&&(e=e[0].toLowerCase()+e.slice(1)),Ue[t]=e,e)}var pr="[native code]";function mr(t){var e=window.Symbol;return!!(t&&D(e)&&D(e.toString)&&e(t).toString().indexOf(pr)>-1)}function At(t,e){for(var i in e)t.style[i]=e[i]}var gr=!!(Element&&D(Element.prototype.animate)),je=!!(Element&&mr(Element.prototype.animate));function it(t){this._element=t,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}it.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._element,r=i||{};if(!gr){At(s,e),this._callback=D(r.onFinish)?r.onFinish:null,this._onFinish();return}var o=this._animation,n=this._props,a=this._values,l=r.duration||300,h=r.easing||"ease",c=!1,_,E,g;if(o&&(E=0,(l!==this._duration||h!==this._easing)&&(c=!0),!c)){for(_ in e)if(++E,g=n.indexOf(_),g===-1||e[_]!==a[g]){c=!0;break}E!==n.length&&(c=!0)}if(c&&o.cancel(),this._callback=D(r.onFinish)?r.onFinish:null,!(o&&!c)){n.length=a.length=0;for(_ in e)n.push(_),a.push(e[_]);this._duration=l,this._easing=h,this._animation=s.animate([Ze(t,je),Ze(e,je)],{duration:l,easing:h}),this._animation.onfinish=this._onFinish,At(s,e)}}};it.prototype.stop=function(){this._isDestroyed||!this._animation||(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)};it.prototype.getCurrentStyles=function(){return Ui(element,currentProps)};it.prototype.isAnimating=function(){return!!this._animation};it.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)};it.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,t&&t()};function Ze(t,e){var i={};for(var s in t)i[e?s:vr(s)]=t[s];return i}function lt(t,e){return"translateX("+t+"px) translateY("+e+"px)"}function B(t){this._item=t,this._animation=new it,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}B.prototype._updateDimensions=function(){this.isActive()&&At(this._element,{width:this._item._width+"px",height:this._item._height+"px"})};B.prototype._onLayoutStart=function(t,e){var i=this._item;if(t.indexOf(i)===-1){this.reset();return}var s=i._left,r=i._top,o=this._left,n=this._top;if(this._left=s,this._top=r,!(!e&&!this._didMigrate&&o===s&&n===r)){var a=s+i._marginLeft,l=r+i._marginTop,h=i.getGrid(),c=!e&&h._settings.layoutDuration>0;if(!c||this._didMigrate){Ni(i._id),this._element.style[et]=lt(a,l),this._animation.stop(),this._didMigrate&&(h.getElement().appendChild(this._element),this._didMigrate=!1);return}this._nextTransX=a,this._nextTransY=l,Xs(i._id,this._setupAnimation,this._startAnimation)}};B.prototype._setupAnimation=function(){if(this.isActive()){var t=st(this._element);this._transX=t.x,this._transY=t.y}};B.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,s=this._nextTransX,r=this._nextTransY;if(e===s&&i===r){t.isAnimating()&&(this._element.style[et]=lt(s,r),t.stop());return}var o=this._item.getGrid()._settings,n={},a={};n[et]=lt(e,i),a[et]=lt(s,r),t.start(n,a,{duration:o.layoutDuration,easing:o.layoutEasing,onFinish:this._onLayoutEnd})}};B.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()};B.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating()){this.reset();return}this._resetAfterLayout=!0}};B.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(Pt,this._onReleaseEnd),e.off(ht,this._onLayoutStart),e.off(ct,this._onMigrate),e.off(kt,this._onHide),i.on(Pt,this._onReleaseEnd),i.on(ht,this._onLayoutStart),i.on(ct,this._onMigrate),i.on(kt,this._onHide),this._didMigrate=!0}};B.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()};B.prototype.create=function(){if(this.isActive()){this._resetAfterLayout=!1;return}var t=this._item,e=t.getGrid(),i=e._settings,s=this._animation;this._left=t._left,this._top=t._top;var r;D(i.dragPlaceholder.createElement)?r=i.dragPlaceholder.createElement(t):r=document.createElement("div"),this._element=r,s._element=r,this._className=i.itemPlaceholderClass||"",this._className&&U(r,this._className),At(r,{position:"absolute",left:"0px",top:"0px",width:t._width+"px",height:t._height+"px"}),r.style[et]=lt(t._left+t._marginLeft,t._top+t._marginTop),e.on(ht,this._onLayoutStart),e.on(Pt,this._onReleaseEnd),e.on(ct,this._onMigrate),e.on(kt,this._onHide),D(i.dragPlaceholder.onCreate)&&i.dragPlaceholder.onCreate(t,r),e.getElement().appendChild(r)};B.prototype.reset=function(){if(this.isActive()){var t=this._element,e=this._item,i=e.getGrid(),s=i._settings,r=this._animation;this._resetAfterLayout=!1,Ni(e._id),Fs(e._id),r.stop(),r._element=null,i.off(Pt,this._onReleaseEnd),i.off(ht,this._onLayoutStart),i.off(ct,this._onMigrate),i.off(kt,this._onHide),this._className&&(F(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,D(s.dragPlaceholder.onRemove)&&s.dragPlaceholder.onRemove(e,t)}};B.prototype.isActive=function(){return!!this._element};B.prototype.getElement=function(){return this._element};B.prototype.updateDimensions=function(){this.isActive()&&zs(this._item._id,this._updateDimensions)};B.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null};function ft(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}ft.prototype.start=function(){if(!(this._isDestroyed||this._isActive)){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,U(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer||this._placeToGrid(),e._emit(Es,t),e._nextLayoutData||t._layout.start(!1)}};ft.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item,r=s.getGrid();!t&&(e===void 0||i===void 0)&&(e=s._left,i=s._top);var o=this._placeToGrid(e,i);this._reset(o),t||r._emit(Pt,s)}};ft.prototype.isJustReleased=function(){return this._isActive&&this._isPositioningStarted===!1};ft.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};ft.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=i.getGrid()._element,o=!1;if(s.parentNode!==r){if(t===void 0||e===void 0){var n=st(s);t=n.x-this._containerDiffX,e=n.y-this._containerDiffY}r.appendChild(s),i._setTranslate(t,e),o=!0}return this._containerDiffX=0,this._containerDiffY=0,o}};ft.prototype._reset=function(t){if(!this._isDestroyed){var e=this._item,i=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,i&&(t&&e._element.clientWidth,F(e._element,i))}};var Qe=2;function nt(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},i.left="0px",i.top="0px",t._setTranslate(0,0),this._animation=new it(e),this._queue="layout-"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}nt.prototype.start=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._dragRelease,r=i.getGrid()._settings,o=this._isActive,n=s.isJustReleased(),a=n?r.dragRelease.duration:r.layoutDuration,l=n?r.dragRelease.easing:r.layoutEasing,h=!t&&!this._skipNextAnimation&&a>0;if(o&&(Ci(i._id),i._emitter.burst(this._queue,!0,i)),n&&(s._isPositioningStarted=!0),D(e)&&i._emitter.on(this._queue,e),this._skipNextAnimation=!1,!h){this._updateOffsets(),i._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=l,this._animOptions.duration=a,this._isInterrupted=o,ks(i._id,this._setupAnimation,this._startAnimation)}};nt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item;if(Ci(s._id),this._animation.isAnimating()){if(e===void 0||i===void 0){var r=st(s._element);e=r.x,i=r.y}s._setTranslate(e,i),this._animation.stop()}F(s._element,s.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&s._emitter.burst(this._queue,!0,s)}};nt.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[et]="",t.left="",t.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}};nt.prototype._updateOffsets=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;this._offsetLeft=i._isActive?i._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=i._isActive?i._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}};nt.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._tX=this._nextLeft,t._tY=this._nextTop,this._isActive&&(this._isActive=!1,F(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}};nt.prototype._setupAnimation=function(){var t=this._item;if(t._tX===void 0||t._tY===void 0){var e=st(t._element);t._tX=e.x,t._tY=e.y}};nt.prototype._startAnimation=function(){var t=this._item,e=t.getGrid()._settings,i=this._animOptions.duration<=0;this._updateOffsets();var s=Math.abs(t._left-(t._tX-this._offsetLeft)),r=Math.abs(t._top-(t._tY-this._offsetTop));if(i||s<Qe&&r<Qe){(s||r||this._isInterrupted)&&t._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._isInterrupted||U(t._element,e.itemPositioningClass),this._currentStyles[et]=lt(t._tX,t._tY),this._targetStyles[et]=lt(this._nextLeft,this._nextTop),t._tX=t._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)};function Bt(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}Bt.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._item,r=s._element,o=s.isActive(),n=s.isVisible(),a=s.getGrid(),l=a._settings,h=t._settings,c=t._element,_=t._items,E=a._items.indexOf(s),g=i||document.body,w,d,u,y,v,S,p,b,A,P;if(typeof e=="number")w=It(_,e,1);else{if(d=t.getItem(e),!d)return;w=_.indexOf(d)}(s.isPositioning()||this._isActive||s.isReleasing())&&(S=st(r),p=S.x,b=S.y),s.isPositioning()&&s._layout.stop(!0,p,b),this._isActive&&(p-=this._containerDiffX,b-=this._containerDiffY,this.stop(!0,p,b)),s.isReleasing()&&(p-=s._dragRelease._containerDiffX,b-=s._dragRelease._containerDiffY,s._dragRelease.stop(!0,p,b)),s._visibility.stop(!0),s._drag&&s._drag.destroy(),a._hasListeners(ct)&&a._emit(ct,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w}),t._hasListeners(Jt)&&t._emit(Jt,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w}),l.itemClass!==h.itemClass&&(F(r,l.itemClass),U(r,h.itemClass)),A=n?l.itemVisibleClass:l.itemHiddenClass,P=n?h.itemVisibleClass:h.itemHiddenClass,A!==P&&(F(r,A),U(r,P)),a._items.splice(E,1),Ce(_,s,w),s._gridId=t._id,o?(u=r.parentNode,g!==u&&(g.appendChild(r),y=Dt(g,u,!0),S||(S=st(r),p=S.x,b=S.y),s._setTranslate(p+y.left,b+y.top))):c.appendChild(r),s._visibility.setStyles(n?h.visibleStyles:h.hiddenStyles),o&&(v=Dt(g,c,!0)),s._refreshDimensions(),s._sortData=null,s._drag=h.dragEnabled?new T(s):null,o?(this._isActive=!0,this._container=g,this._containerDiffX=v.left,this._containerDiffY=v.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),a._hasListeners(Qt)&&a._emit(Qt,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w}),t._hasListeners(Kt)&&t._emit(Kt,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w})}};Bt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item,r=s._element,o=s.getGrid(),n=o._element,a;this._container!==n&&((e===void 0||i===void 0)&&(t?(a=st(r),e=a.x-this._containerDiffX,i=a.y-this._containerDiffY):(e=s._left,i=s._top)),n.appendChild(r),s._setTranslate(e,i)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}};Bt.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};function K(t){var e=t._isActive,i=t._element,s=i.children[0],r=t.getGrid()._settings;if(!s)throw new Error("No valid child element found within item element.");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=s,this._currentStyleProps=[],this._animation=new it(s),this._queue="visibility-"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?"":"none",U(i,e?r.itemVisibleClass:r.itemHiddenClass),this.setStyles(e?r.visibleStyles:r.hiddenStyles)}K.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=D(e)?e:null,o=i.getGrid(),n=o._settings;if(!this._isShowing&&!this._isHidden){r&&r(!1,i);return}if(this._isShowing&&!t){r&&i._emitter.on(this._queue,r);return}this._isShowing||(i._emitter.burst(this._queue,!0,i),F(s,n.itemHiddenClass),U(s,n.itemVisibleClass),this._isHiding||(s.style.display="")),r&&i._emitter.on(this._queue,r),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)}};K.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=D(e)?e:null,o=i.getGrid(),n=o._settings;if(!this._isHiding&&this._isHidden){r&&r(!1,i);return}if(this._isHiding&&!t){r&&i._emitter.on(this._queue,r);return}this._isHiding||(i._emitter.burst(this._queue,!0,i),U(s,n.itemHiddenClass),F(s,n.itemVisibleClass)),r&&i._emitter.on(this._queue,r),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)}};K.prototype.stop=function(t){if(!this._isDestroyed&&!(!this._isHiding&&!this._isShowing)){var e=this._item;ki(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}};K.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;this._removeCurrentStyles();for(var s in t)i.push(s),e.style[s]=t[s]};K.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid(),s=i._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),F(e,s.itemVisibleClass),F(e,s.itemHiddenClass),e.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}};K.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var s=this._item,r=this._animation,o=this._childElement,n=s.getGrid()._settings,a=t?n.visibleStyles:n.hiddenStyles,l=t?n.showDuration:n.hideDuration,h=t?n.showEasing:n.hideEasing,c=e||l<=0,_;if(!a){i&&i();return}if(ki(s._id),c){At(o,a),r.stop(),i&&i();return}r.isAnimating()&&(r._animation.onfinish=null),Ps(s._id,function(){_=Ui(o,a)},function(){r.start(_,a,{duration:l,easing:h,onFinish:i})})}};K.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))};K.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display="none",t._emitter.burst(this._queue,!1,t)}};K.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;i++)t.style[e[i]]="";e.length=0};var yr=0;function ji(){return++yr}function O(t,e,i){var s=t._settings;if(pt){if(pt.has(e))throw new Error("You can only create one Muuri Item per element!");pt.set(e,this)}this._id=ji(),this._gridId=t._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new Q,e.parentNode!==t._element&&t._element.appendChild(e),U(e,s.itemClass),typeof i!="boolean"&&(i=W(e,"display")!=="none"),this._isActive=i,this._visibility=new K(this),this._layout=new nt(this),this._migrate=new Bt(this),this._drag=s.dragEnabled?new T(this):null,this._dragRelease=new ft(this),this._dragPlaceholder=new B(this)}O.prototype.getGrid=function(){return ne[this._gridId]};O.prototype.getElement=function(){return this._element};O.prototype.getWidth=function(){return this._width};O.prototype.getHeight=function(){return this._height};O.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}};O.prototype.getPosition=function(){return{left:this._left,top:this._top}};O.prototype.isActive=function(){return this._isActive};O.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden};O.prototype.isShowing=function(){return!!(this._visibility&&this._visibility._isShowing)};O.prototype.isHiding=function(){return!!(this._visibility&&this._visibility._isHiding)};O.prototype.isPositioning=function(){return!!(this._layout&&this._layout._isActive)};O.prototype.isDragging=function(){return!!(this._drag&&this._drag._isActive)};O.prototype.isReleasing=function(){return!!(this._dragRelease&&this._dragRelease._isActive)};O.prototype.isDestroyed=function(){return this._isDestroyed};O.prototype._refreshDimensions=function(t){if(!this._isDestroyed&&!(t!==!0&&this._visibility._isHidden)){var e=this._element,i=this._dragPlaceholder,s=e.getBoundingClientRect();this._width=s.width,this._height=s.height,this._marginLeft=Math.max(0,Z(e,"margin-left")),this._marginRight=Math.max(0,Z(e,"margin-right")),this._marginTop=Math.max(0,Z(e,"margin-top")),this._marginBottom=Math.max(0,Z(e,"margin-bottom")),i&&i.updateDimensions()}};O.prototype._refreshSortData=function(){if(!this._isDestroyed){var t=this._sortData={},e=this.getGrid()._settings.sortData,i;for(i in e)t[i]=e[i](this,this._element)}};O.prototype._addToLayout=function(t,e){this._isActive!==!0&&(this._isActive=!0,this._left=t||0,this._top=e||0)};O.prototype._removeFromLayout=function(){this._isActive!==!1&&(this._isActive=!1,this._left=0,this._top=0)};O.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()};O.prototype._setTranslate=function(t,e){return this._tX===t&&this._tY===e?!1:(this._tX=t,this._tY=e,this._element.style[et]=lt(t,e),!0)};O.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,i=this.getGrid(),s=i._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),F(e,s.itemClass),t&&e.parentNode.removeChild(e),pt&&pt.delete(e),this._isActive=!1,this._isDestroyed=!0}};function Zi(t){var e=1,i=2,s=4,r=8,o=16,n=.001,a=.5;function l(d){return((d*1e3+.5<<0)/10<<0)/100}function h(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(h.prototype.computeLayout=function(d,u){var y=d.items,v=d.slots,S=!!(u&e),p=!!(u&i),b=!!(u&s),A=!!(u&r),P=!!(u&o),k=typeof y[0]=="number",R,j,N,q,G,Y;if(!y.length)return d;for(j=k?2:1,R=0;R<y.length;R+=j)k?(q=y[R],G=y[R+1]):(N=y[R],q=N._width+N._marginLeft+N._marginRight,G=N._height+N._marginTop+N._marginBottom),P&&(q=l(q),G=l(G)),Y=this.computeNextSlot(d,q,G,S,p),p?Y.left+Y.width>d.width&&(d.width=Y.left+Y.width):Y.top+Y.height>d.height&&(d.height=Y.top+Y.height),v[++this.slotIndex]=Y.left,v[++this.slotIndex]=Y.top,(b||A)&&this.slotSizes.push(Y.width,Y.height);if(b)for(R=0;R<v.length;R+=2)v[R]=d.width-(v[R]+this.slotSizes[R]);if(A)for(R=1;R<v.length;R+=2)v[R]=d.height-(v[R]+this.slotSizes[R]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,d},h.prototype.computeNextSlot=function(d,u,y,v,S){var p=this.slotData,b=this.currentRects,A=this.nextRects,P=!1,k,R,j,N,q;for(A.length=0,p.left=null,p.top=null,p.width=u,p.height=y,N=0;N<b.length;N++)if(R=b[N],!!R&&(k=this.getRect(R),p.width<=k.width+n&&p.height<=k.height+n)){p.left=k.left,p.top=k.top;break}if(p.left===null&&(S?(p.left=d.width,p.top=0):(p.left=0,p.top=d.height),v||(P=!0)),!S&&p.top+p.height>d.height+n&&(p.left>a&&A.push(this.addRect(0,d.height,p.left,1/0)),p.left+p.width<d.width-a&&A.push(this.addRect(p.left+p.width,d.height,d.width-p.left-p.width,1/0)),d.height=p.top+p.height),S&&p.left+p.width>d.width+n&&(p.top>a&&A.push(this.addRect(d.width,0,1/0,p.top)),p.top+p.height<d.height-a&&A.push(this.addRect(d.width,p.top+p.height,1/0,d.height-p.top-p.height)),d.width=p.left+p.width),!P){for(v&&(N=0);N<b.length;N++)if(R=b[N],!!R)for(k=this.getRect(R),j=this.splitRect(k,p),q=0;q<j.length;q++)R=j[q],k=this.getRect(R),(S?k.left+n<d.width-n:k.top+n<d.height-n)&&A.push(R)}return A.length>1&&this.purgeRects(A).sort(S?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=A,this.nextRects=b,p},h.prototype.addRect=function(d,u,y,v){var S=++this.rectId;return this.rectStore[S]=d||0,this.rectStore[++this.rectId]=u||0,this.rectStore[++this.rectId]=y||0,this.rectStore[++this.rectId]=v||0,S},h.prototype.getRect=function(d,u){return u||(u=this.rectTarget),u.left=this.rectStore[d]||0,u.top=this.rectStore[++d]||0,u.width=this.rectStore[++d]||0,u.height=this.rectStore[++d]||0,u},h.prototype.splitRect=function(){var d=[],u=0,y=0;return function(v,S){return d.length=0,v.left+v.width<=S.left+n||S.left+S.width<=v.left+n||v.top+v.height<=S.top+n||S.top+S.height<=v.top+n?(d.push(this.addRect(v.left,v.top,v.width,v.height)),d):(u=S.left-v.left,u>=a&&d.push(this.addRect(v.left,v.top,u,v.height)),u=v.left+v.width-(S.left+S.width),u>=a&&d.push(this.addRect(S.left+S.width,v.top,u,v.height)),y=S.top-v.top,y>=a&&d.push(this.addRect(v.left,v.top,v.width,y)),y=v.top+v.height-(S.top+S.height),y>=a&&d.push(this.addRect(v.left,S.top+S.height,v.width,y)),d)}}(),h.prototype.isRectAWithinRectB=function(d,u){return d.left+n>=u.left&&d.top+n>=u.top&&d.left+d.width-n<=u.left+u.width&&d.top+d.height-n<=u.top+u.height},h.prototype.purgeRects=function(){var d={},u={};return function(y){for(var v=y.length,S;v--;)if(S=y.length,!!y[v]){for(this.getRect(y[v],d);S--;)if(!(!y[S]||v===S)&&(this.getRect(y[S],u),this.isRectAWithinRectB(d,u))){y[v]=0;break}}return y}}(),h.prototype.sortRectsTopLeft=function(){var d={},u={};return function(y,v){return this.getRect(y,d),this.getRect(v,u),d.top<u.top&&d.top+n<u.top?-1:d.top>u.top&&d.top-n>u.top?1:d.left<u.left&&d.left+n<u.left?-1:d.left>u.left&&d.left-n>u.left?1:0}}(),h.prototype.sortRectsLeftTop=function(){var d={},u={};return function(y,v){return this.getRect(y,d),this.getRect(v,u),d.left<u.left&&d.left+n<u.left?-1:d.left>u.left&&d.left-n<u.left?1:d.top<u.top&&d.top+n<u.top?-1:d.top>u.top&&d.top-n>u.top?1:0}}(),t){var c=1,_=2,E=3,g=4,w=new h;self.onmessage=function(d){var u=new Float32Array(d.data),y=u.subarray(g,u.length),v=new Float32Array(y.length),S=u[E],p={items:y,slots:v,width:u[c],height:u[_]};w.computeLayout(p,S),u[c]=p.width,u[_]=p.height,u.set(p.slots,g),postMessage(u.buffer,[u.buffer])}}return h}var Ke=Zi(),Tt=null,jt=[];function Sr(t,e){var i=[];if(t>0){Tt||(Tt=URL.createObjectURL(new Blob(["("+Zi.toString()+")(true)"],{type:"application/javascript"})));for(var s=0,r;s<t;s++)r=new Worker(Tt),e&&(r.onmessage=e),i.push(r),jt.push(r)}return i}function Er(t){for(var e,i,s=0;s<t.length;s++)e=t[s],e.onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),i=jt.indexOf(e),i>-1&&jt.splice(i,1);Tt&&!jt.length&&(URL.revokeObjectURL(Tt),Tt=null)}function wr(){return!!(window.Worker&&window.URL&&window.Blob)}var Je=1,re=2,ti=4,ei=8,ii=16,Qi=0,Ki=1,Ji=2,br=3,De=4;function ot(t,e){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(e),t=typeof t=="number"?Math.max(0,t):0,t&&wr())try{this._workers=Sr(t,this._onWorkerMessage)}catch(i){this._processor=new Ke}else this._processor=new Ke}ot.prototype._sendToWorker=function(){if(!(!this._layoutQueue.length||!this._workers.length)){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}};ot.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[Qi],s=this._layouts[i],r=this._layoutCallbacks[i],o=this._layoutWorkers[i];s&&delete this._layouts[i],r&&delete this._layoutCallbacks[i],o&&delete this._layoutWorkers[i],s&&r&&(s.width=e[Ki],s.height=e[Ji],s.slots=e.subarray(De,e.length),this._finalizeLayout(s),r(s)),o&&(this._workers.push(o),this._sendToWorker())};ot.prototype._finalizeLayout=function(t){var e=t._grid,i=t._settings&re,s=e._boxSizing==="border-box";return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(s?t.width+e._borderLeft+e._borderRight:t.width)+"px":t.styles.height=(s?t.height+e._borderTop+e._borderBottom:t.height)+"px",t};ot.prototype.setOptions=function(t){if(t){var e;typeof t.fillGaps=="boolean"?e=t.fillGaps?Je:0:e=this._options&Je;var i;typeof t.horizontal=="boolean"?i=t.horizontal?re:0:i=this._options&re;var s;typeof t.alignRight=="boolean"?s=t.alignRight?ti:0:s=this._options&ti;var r;typeof t.alignBottom=="boolean"?r=t.alignBottom?ei:0:r=this._options&ei;var o;typeof t.rounding=="boolean"?o=t.rounding?ii:0:o=this._options&ii,this._options=e|i|s|r|o}};ot.prototype.createLayout=function(t,e,i,s,r,o){if(this._layouts[e])throw new Error("A layout with the provided id is currently being processed.");var n=this._options&re,a={id:e,items:i,slots:null,width:n?0:s,height:n?r:0,_grid:t,_settings:this._options};if(!i.length){a.slots=[],this._finalizeLayout(a),o(a);return}if(this._processor){a.slots=window.Float32Array?new Float32Array(i.length*2):new Array(i.length*2),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),o(a);return}var l=new Float32Array(De+i.length*2);l[Qi]=e,l[Ki]=a.width,l[Ji]=a.height,l[br]=a._settings;var h,c,_;for(h=0,c=De-1,_;h<i.length;h++)_=i[h],l[++c]=_._width+_._marginLeft+_._marginRight,l[++c]=_._height+_._marginTop+_._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=o,this._layoutWorkerData[e]=l,this._sendToWorker(),this.cancelLayout.bind(this,e)};ot.prototype.cancelLayout=function(t){var e=this._layouts[t];if(e&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var i=this._layoutQueue.indexOf(t);i>-1&&this._layoutQueue.splice(i,1)}};ot.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);Er(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var Tr=0;function Ir(t,e){var i=++Tr,s=0,r=0,o=!1,n=function(a){o||(r&&(s-=a-r),r=a,s>0?Vs(i,n):(s=r=0,t()))};return function(a){if(!o){if(e<=0){a!==!0&&t();return}if(a===!0){o=!0,s=r=0,n=void 0,Bs(i);return}s<=0?(s=e,n(0)):s=e}}}var Dr="[object HTMLCollection]",Ar="[object NodeList]";function ke(t){var e=Object.prototype.toString.call(t);return e===Dr||e===Ar}var Rr="object",Lr="[object Object]",xr=Object.prototype.toString;function si(t){return typeof t===Rr&&xr.call(t)===Lr}function Cr(){}function kr(t){return ke(t)?Array.prototype.slice.call(t):Array.prototype.concat(t)}var ts="number",ue="string",dt="instant",Se=0;function I(t,e){typeof t===ue&&(t=document.querySelector(t));var i=t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t);if(!i||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var s=Pr(I.defaultOptions,e);s.visibleStyles=ri(s.visibleStyles),s.hiddenStyles=ri(s.hiddenStyles),D(s.dragSort)||(s.dragSort=!!s.dragSort),this._id=ji(),this._element=t,this._settings=s,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new Q,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),ne[this._id]=this,U(t,s.containerClass),Mr(this,s.layoutOnResize),this.add(Or(t,s.items),{layout:!1}),s.layoutOnInit&&this.layout(!0)}I.Item=O;I.ItemLayout=nt;I.ItemVisibility=K;I.ItemMigrate=Bt;I.ItemDrag=T;I.ItemDragRelease=ft;I.ItemDragPlaceholder=B;I.Emitter=Q;I.Animator=it;I.Dragger=f;I.Packer=ot;I.AutoScroller=C;I.defaultPacker=new ot(2);I.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:mt,migrateAction:mt},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:C.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"};I.prototype.on=function(t,e){return this._emitter.on(t,e),this};I.prototype.off=function(t,e){return this._emitter.off(t,e),this};I.prototype.getElement=function(){return this._element};I.prototype.getItem=function(t){if(this._isDestroyed||!t&&t!==0)return null;if(typeof t===ts)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof O)return t._gridId===this._id?t:null;if(pt){var e=pt.get(t);return e&&e._gridId===this._id?e:null}else for(var i=0;i<this._items.length;i++)if(this._items[i]._element===t)return this._items[i];return null};I.prototype.getItems=function(t){if(this._isDestroyed||t===void 0)return this._items.slice(0);var e=[],i,s;if(Array.isArray(t)||ke(t))for(i=0;i<t.length;i++)s=this.getItem(t[i]),s&&e.push(s);else s=this.getItem(t),s&&e.push(s);return e};I.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i=t||this._items,s,r,o,n;if(e===!0)for(n=[],s=0;s<i.length;s++)r=i[s],!r.isVisible()&&!r.isHiding()&&(o=r.getElement().style,o.visibility="hidden",o.display="",n.push(o));for(s=0;s<i.length;s++)i[s]._refreshDimensions(e);if(e===!0){for(s=0;s<n.length;s++)o=n[s],o.visibility="",o.display="none";n.length=0}return this};I.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this};I.prototype.synchronize=function(){if(this._isDestroyed)return this;var t=this._items;if(!t.length)return this;for(var e,i,s=0;s<t.length;s++)i=t[s]._element,i.parentNode===this._element&&(e=e||document.createDocumentFragment(),e.appendChild(i));return e?(this._element.appendChild(e),this._emit(us),this):this};I.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&D(i.cancel)&&i.cancel(),Se=Se%bs+1;var s=Se;this._nextLayoutData={id:s,instant:t,onFinish:e,cancel:null};for(var r=this._items,o=[],n=0;n<r.length;n++)r[n]._isActive&&o.push(r[n]);this._refreshDimensions();var a=this._width-this._borderLeft-this._borderRight,l=this._height-this._borderTop-this._borderBottom,h=this._settings.layout,c;return D(h)?c=h(this,s,o,a,l,this._onLayoutDataReceived):(I.defaultPacker.setOptions(h),c=I.defaultPacker.createLayout(this,s,o,a,l,this._onLayoutDataReceived)),D(c)&&this._nextLayoutData&&this._nextLayoutData.id===s&&(this._nextLayoutData.cancel=c),this};I.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i=kr(t);if(!i.length)return i;var s=e||{},r=s.layout?s.layout:s.layout===void 0,o=this._items,n=!1,a,l,h,c;for(c=0;c<i.length;c++)l=i[c],l.parentNode!==this._element&&(a=a||document.createDocumentFragment(),a.appendChild(l));for(a&&this._element.appendChild(a),c=0;c<i.length;c++)l=i[c],h=i[c]=new O(this,l,s.active),h._isActive&&(n=!0,h._layout._skipNextAnimation=!0);for(c=0;c<i.length;c++)h=i[c],h._refreshDimensions(),h._refreshSortData();return Ce(o,i,s.index),this._hasListeners(Fe)&&this._emit(Fe,i.slice(0)),n&&r&&this.layout(r===dt,D(r)?r:void 0),i};I.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i=e||{},s=i.layout?i.layout:i.layout===void 0,r=!1,o=this.getItems(),n=[],a=[],l,h,c;for(c=0;c<t.length;c++)h=t[c],!h._isDestroyed&&(l=this._items.indexOf(h),l!==-1&&(h._isActive&&(r=!0),n.push(h),a.push(o.indexOf(h)),h._destroy(i.removeElements),this._items.splice(l,1)));return this._hasListeners(He)&&this._emit(He,n.slice(0),a),r&&s&&this.layout(s===dt,D(s)?s:void 0),n};I.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this};I.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this};I.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i=[],s=[],r=typeof t===ue,o=D(t),n=e||{},a=n.instant===!0,l=n.syncWithLayout,h=n.layout?n.layout:n.layout===void 0,c=D(n.onFinish)?n.onFinish:null,_=-1,E=Cr,g,w;if(c&&(E=function(){++_&&c(i.slice(0),s.slice(0))}),o||r)for(w=0;w<this._items.length;w++)g=this._items[w],(o?t(g):de(g._element,t))?i.push(g):s.push(g);return i.length?this.show(i,{instant:a,syncWithLayout:l,onFinish:E,layout:!1}):E(),s.length?this.hide(s,{instant:a,syncWithLayout:l,onFinish:E,layout:!1}):E(),(i.length||s.length)&&(this._hasListeners(Ve)&&this._emit(Ve,i.slice(0),s.slice(0)),h&&this.layout(h===dt,D(h)?h:void 0)),this};I.prototype.sort=function(){var t,e,i,s;function r(n,a){for(var l=0,h,c,_,E,g=0;g<t.length;g++)if(h=t[g][0],c=t[g][1],_=(n._sortData?n:n._refreshSortData())._sortData[h],E=(a._sortData?a:a._refreshSortData())._sortData[h],c==="desc"||!c&&e?l=E<_?-1:E>_?1:0:l=_<E?-1:_>E?1:0,l)return l;return l||(s||(s=ni(i)),l=e?Ut(s,a,n):Ut(s,n,a)),l}function o(n,a){var l=e?-t(n,a):t(n,a);return l||(s||(s=ni(i)),l=e?Ut(s,a,n):Ut(s,n,a)),l}return function(n,a){if(this._isDestroyed||this._items.length<2)return this;var l=this._items,h=a||{},c=h.layout?h.layout:h.layout===void 0;if(e=!!h.descending,i=l.slice(0),s=null,D(n))t=n,l.sort(o);else if(typeof n===ue)t=n.trim().split(" ").filter(function(_){return _}).map(function(_){return _.split(":")}),l.sort(r);else if(Array.isArray(n))l.length=0,l.push.apply(l,n);else throw t=e=i=s=null,new Error("Invalid comparer argument provided.");return this._hasListeners(Be)&&this._emit(Be,l.slice(0),i),c&&this.layout(c===dt,D(c)?c:void 0),t=e=i=s=null,this}}();I.prototype.move=function(t,e,i){if(this._isDestroyed||this._items.length<2)return this;var s=this._items,r=i||{},o=r.layout?r.layout:r.layout===void 0,n=r.action===tt,a=n?tt:mt,l=this.getItem(t),h=this.getItem(e),c,_;return l&&h&&l!==h&&(c=s.indexOf(l),_=s.indexOf(h),n?Wi(s,c,_):qi(s,c,_),this._hasListeners(Zt)&&this._emit(Zt,{item:l,fromIndex:c,toIndex:_,action:a}),o&&this.layout(o===dt,D(o)?o:void 0)),this};I.prototype.send=function(t,e,i,s){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(t=this.getItem(t),!t)return this;var r=s||{},o=r.appendTo||document.body,n=r.layoutSender?r.layoutSender:r.layoutSender===void 0,a=r.layoutReceiver?r.layoutReceiver:r.layoutReceiver===void 0;return t._migrate.start(e,i,o),t._migrate._isActive&&t._isActive&&(n&&this.layout(n===dt,D(n)?n:void 0),a&&e.layout(a===dt,D(a)?a:void 0)),this};I.prototype.destroy=function(t){if(this._isDestroyed)return this;var e=this._element,i=this._items.slice(0),s=this._layout&&this._layout.styles||{},r,o;for(Nr(this),r=0;r<i.length;r++)i[r]._destroy(t);this._items.length=0,F(e,this._settings.containerClass);for(o in s)e.style[o]="";return this._emit(ws),this._emitter.destroy(),delete ne[this._id],this._isDestroyed=!0,this};I.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)};I.prototype._hasListeners=function(t){return this._isDestroyed?!1:this._emitter.countListeners(t)>0};I.prototype._updateBoundingRect=function(){var t=this._element,e=t.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom};I.prototype._updateBorders=function(t,e,i,s){var r=this._element;t&&(this._borderLeft=Z(r,"border-left-width")),e&&(this._borderRight=Z(r,"border-right-width")),i&&(this._borderTop=Z(r,"border-top-width")),s&&(this._borderBottom=Z(r,"border-bottom-width"))};I.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=W(this._element,"box-sizing")};I.prototype._onLayoutDataReceived=function(){var t=[];return function(e){if(!(this._isDestroyed||!this._nextLayoutData||this._nextLayoutData.id!==e.id)){var i=this,s=this._nextLayoutData.instant,r=this._nextLayoutData.onFinish,o=e.items.length,n=o,a,l,h,c;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(ze)&&this._emit(ze,this._layout.items.slice(0)),this._layout=e,t.length=0,c=0;c<o;c++){if(a=e.items[c],!a){--n;continue}if(l=e.slots[c*2],h=e.slots[c*2+1],a._canSkipLayout(l,h)){--n;continue}a._left=l,a._top=h,a.isActive()&&!a.isDragging()?t.push(a):--n}if(e.styles&&At(this._element,e.styles),!(this._hasListeners(ht)&&(this._emit(ht,e.items.slice(0),s===!0),this._layout.id!==e.id))){var _=function(){if(!(--n>0)){var E=i._layout.id!==e.id,g=D(s)?s:r;E||(i._isLayoutFinished=!0),D(g)&&g(e.items.slice(0),E),!E&&i._hasListeners(Xe)&&i._emit(Xe,e.items.slice(0))}};if(!t.length)return _(),this;for(this._isLayoutFinished=!1,c=0;c<t.length&&this._layout.id===e.id;c++)t[c]._layout.start(s===!0,_);return this._layout.id===e.id&&(t.length=0),this}}}}();I.prototype._setItemsVisibility=function(t,e,i){var s=this,r=t.slice(0),o=i||{},n=o.instant===!0,a=o.onFinish,l=o.layout?o.layout:o.layout===void 0,h=r.length,c=e?fs:kt,_=e?_s:vs,E=e?"show":"hide",g=!1,w=[],d=[],u,y;if(!h){D(a)&&a(r);return}for(y=0;y<r.length;y++)u=r[y],(e&&!u._isActive||!e&&u._isActive)&&(g=!0),u._layout._skipNextAnimation=!!(e&&!u._isActive),e&&u._visibility._isHidden&&d.push(u),e?u._addToLayout():u._removeFromLayout();d.length&&(this.refreshItems(d,!0),d.length=0);function v(){for(g&&o.syncWithLayout!==!1&&s.off(ht,v),s._hasListeners(c)&&s._emit(c,r.slice(0)),y=0;y<r.length;y++){if(r[y]._gridId!==s._id){--h<1&&(D(a)&&a(w.slice(0)),s._hasListeners(_)&&s._emit(_,w.slice(0)));continue}r[y]._visibility[E](n,function(S,p){S||w.push(p),--h<1&&(D(a)&&a(w.slice(0)),s._hasListeners(_)&&s._emit(_,w.slice(0)))})}}g&&o.syncWithLayout!==!1?this.on(ht,v):v(),g&&l&&this.layout(l===dt,D(l)?l:void 0)};function Pr(t,e){var i=Ct({},t);return e&&(i=Ct(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}function Ct(t,e){var i=Object.keys(e),s=i.length,r,o,n;for(n=0;n<s;n++){if(o=i[n],r=si(e[o]),si(t[o])&&r){t[o]=Ct(Ct({},t[o]),e[o]);continue}if(r){t[o]=Ct({},e[o]);continue}if(Array.isArray(e[o])){t[o]=e[o].slice(0);continue}t[o]=e[o]}return t}function Or(t,e){if(e==="*")return t.children;if(typeof e===ue){for(var i=[],s=t.children,r=0;r<s.length;r++)de(s[r],e)&&i.push(s[r]);return i}return Array.isArray(e)||ke(e)?e:[]}function Mr(t,e){typeof e!==ts&&(e=e===!0?0:-1),e>=0&&(t._resizeHandler=Ir(function(){t.refreshItems().layout()},e),window.addEventListener("resize",t._resizeHandler))}function Nr(t){t._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener("resize",t._resizeHandler),t._resizeHandler=null)}function ri(t){var e={},i=document.documentElement.style,s,r;for(s in t)t[s]&&(r=ae(i,s),r&&(e[r]=t[s]));return e}function ni(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function Ut(t,e,i){var s=t[e._id],r=t[i._id];return s-r}const X=document.documentElement,fe={viewportSize:()=>[window.innerWidth||X.clientWidth||document.body.clientWidth,window.innerHeight||X.clientHeight||document.body.clientHeight],elementCenterPos:t=>{const e=t.getBoundingClientRect();return[e.left+e.width/2,e.top+e.height/2]},scrollbarWidth:()=>{const t=window.innerWidth-X.clientWidth;return X.style.setProperty("--scrollbar-width",(t>0?t:0)+"px"),t}};function oi(t,e,i){return(1-i)*t+i*e}let Pe={};Pe.vpSize=fe.viewportSize();window.addEventListener("resize",()=>{Pe.vpSize=fe.viewportSize()});let Ft;const Ht={options:{scroll:{lenisOptions:{smoothWheel:!0,smoothTouch:!1,wheelMultiplier:.9,duration:1,easing:t=>Math.min(1,1.001-Math.pow(5,-7*t)),orientation:"vertical",gestureOrientation:"vertical"},triggerRootMargin:"-1px -1px -1px -1px",rafRootMargin:"100% 100% 100% 100%",autoResize:!0},scrollTo:{duration:1.4,lock:!1,easing:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}},resize:(t,e=200)=>{setTimeout(()=>{t.resize()},e)}};let m={options:{dragIntensity:[.5,.6],angleDamping:.025,look:{maxDistance:10,damping:[20,15]}},data:{dragPos:[0,0],look:{}},elements:{dragContainer:document.querySelector("main"),contentContainer:document.querySelector(".section-home-head"),main:document.querySelector(".interactive-chara-thalia svg.thalia-chara"),mainEyes:document.querySelector(".interactive-chara-thalia svg.thalia-chara g[data-name='eyes']"),hands:document.querySelectorAll(".chara-thalia--hands svg.thalia-chara"),socialBtns:document.querySelectorAll(".section-home-head .socials .social-btn")},interactions:{init:()=>{m.elements.main&&!m.data.activated&&(m.data.activated=!0,m.data.state="resting",X.setAttribute("thalia-chara-state","resting"),m.interactions.updateEyesPosition(),window.addEventListener("resize",m.interactions.updateEyesPosition),m.elements.contentContainer.addEventListener("mouseenter",m.interactions.updateEyesPosition),m.interactions.look(),m.elements.dragContainer.addEventListener("mouseenter",m.interactions.look),m.elements.dragContainer.addEventListener("mouseleave",m.interactions.unlook),m.elements.dragContainer.addEventListener("mouseleave",m.interactions.pointerStop),m.elements.dragContainer.addEventListener("mouseup",m.interactions.pointerStop),m.elements.main.addEventListener("mousedown",m.interactions.pointerActive),m.elements.dragContainer.addEventListener("mousemove",m.interactions.following),m.elements.socialBtns.length>0&&(m.interactions.socialBtnHover=t=>{X.setAttribute("thalia-social-hover","true")},m.interactions.socialBtnOut=t=>{X.setAttribute("thalia-social-hover","false")},m.elements.socialBtns.forEach(t=>{t.addEventListener("mouseenter",m.interactions.socialBtnHover),t.addEventListener("mouseleave",m.interactions.socialBtnOut)})))},updateEyesPosition:t=>{Ht.resize(Ft),m.data.look.center=fe.elementCenterPos(m.elements.mainEyes)},look:t=>{m.elements.main.classList.add("looking")},unlook:t=>{m.elements.main.classList.remove("looking")},pointerStop:t=>{const e=Math.abs(m.data.dragPos[0]);X.setAttribute("thalia-chara-drag-strength",e>Pe.vpSize[0]/8?"strong":e>15?"weak":"none"),X.style.setProperty("--thalia-chara-drag-direction",m.data.dragPos[0]>0?1:-1),m.data.state="resting",X.setAttribute("thalia-chara-state","resting"),m.elements.main.classList.remove("grabbing")},pointerActive:t=>{m.data.pointerPosStart=[t.clientX,t.clientY],m.data.state="grabbing",m.interactions.following(t),X.setAttribute("thalia-chara-state","grabbing"),m.elements.main.classList.add("grabbing")},following:t=>{m.data.pointerPos=[t.clientX,t.clientY],m.data.state=="grabbing"?(m.data.dragPos=[oi(0,m.data.pointerPos[0]-m.data.pointerPosStart[0],m.options.dragIntensity[0]),oi(0,m.data.pointerPos[1]-m.data.pointerPosStart[1],m.options.dragIntensity[1])],X.style.setProperty("--thalia-chara-drag-x",m.data.dragPos[0]+"px"),X.style.setProperty("--thalia-chara-drag-y",m.data.dragPos[1]+"px"),X.style.setProperty("--thalia-chara-drag-rotate",m.data.dragPos[0]*m.options.angleDamping+"deg")):(m.data.look.posFromCenter=[(m.data.pointerPos[0]-m.data.look.center[0])/m.options.look.damping[0],(m.data.pointerPos[1]-m.data.look.center[1])/m.options.look.damping[1]],m.data.look.distanceFactor=m.options.look.maxDistance/Math.sqrt(m.data.look.posFromCenter[0]*m.data.look.posFromCenter[0]+m.data.look.posFromCenter[1]*m.data.look.posFromCenter[1]),m.data.look.distanceFactor>1?m.data.look.posFromCenter=[m.data.look.posFromCenter[0],m.data.look.posFromCenter[1]]:m.data.look.posFromCenter=[m.data.look.posFromCenter[0]*m.data.look.distanceFactor,m.data.look.posFromCenter[1]*m.data.look.distanceFactor],m.elements.main.style.setProperty("--pointer-follow-look-x",m.data.look.posFromCenter[0]+"px"),m.elements.main.style.setProperty("--pointer-follow-look-y",m.data.look.posFromCenter[1]+"px"))}}};window.addEventListener("scrollHit",t=>{t.detail.progress>=1?t.detail.target.classList.add("is-scroll-hit"):t.detail.target.classList.remove("is-scroll-hit")});let bt;const ai={target:".grid-muuri",gallery:{items:".grid-muuri--item",sortData:null,showDuration:600,showEasing:"cubic-bezier(0.4, 0, 0, 1)",visibleStyles:{opacity:"1",transform:"scale(1)"},hideDuration:400,hideEasing:"cubic-bezier(0.7, 0, 0.4, 1)",hiddenStyles:{opacity:"0",transform:"scale(0.6)"},layout:{fillGaps:!0,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnInit:!0,layoutOnResize:150,layoutDuration:800,layoutEasing:"cubic-bezier(0.5, 0.05, 0, 1)",dragEnabled:!1}};let L={itemsShiftValue:140,data:{currentFilter:null},elements:{galleryItemsFiltersContainers:document.querySelectorAll(".gallery-grid .item-gallery .filters"),filtersBar:document.querySelectorAll(".sticky-filters"),filtersBarBtns:document.querySelectorAll(".sticky-filters .btn-filter"),filtersClearBtn:document.querySelectorAll("*[thalia-gallery-filter-btn-clear]"),filtersBtns:void 0,shiftItemsMuuri:void 0,shiftItemsContent:[]},galleryFilter:(t,e)=>!!t.getElement().getAttribute("thalia-gallery-item-filters").match(e),onClickFilter:t=>{X.setAttribute("thalia-gallery-filter-previous",X.getAttribute("thalia-gallery-filter")),t.getAttribute("thalia-gallery-filter-btn-id")==L.data.currentFilter?(L.onUnfilter(),Ht.resize(Ft)):(L.onFilter(t),Ht.resize(Ft))},onFilter:t=>{L.data.currentFilter=t.getAttribute("thalia-gallery-filter-btn-id"),L.setShiftItemsSize(),X.setAttribute("thalia-gallery-filter",L.data.currentFilter),bt.refreshItems(),bt.filter(e=>(e.getElement().setAttribute("thalia-gallery-item-was-hidden",!e.isVisible()),L.galleryFilter(e,L.data.currentFilter))),L.elements.filtersBarBtns.forEach(e=>{e.getAttribute("thalia-gallery-filter-btn-id").match(L.data.currentFilter)?e.classList.add("active"):e.classList.remove("active")})},onUnfilter:()=>{L.data.currentFilter=null,L.setShiftItemsSize(),X.setAttribute("thalia-gallery-filter","false"),bt.refreshItems(),bt.filter(t=>(t.getElement().setAttribute("thalia-gallery-item-was-hidden",!t.isVisible()),!0)),L.elements.filtersBarBtns.forEach(t=>{t.classList.remove("active")})},createItemsFiltersBtns:()=>{bt.getItems().forEach(t=>{let e="";t.getElement().getAttribute("thalia-gallery-item-filters").split(";").forEach(i=>{e+="<span thalia-gallery-filter-btn-id="+i+">"+i+"</span>"}),t.getElement().querySelector(".filters").innerHTML=e})},initFiltersBtns:()=>{L.onUnfilter(),L.elements.filtersBtns=document.querySelectorAll("*[thalia-gallery-filter-btn-id]"),L.elements.filtersBtns.length>0&&(L.elements.filtersBtns.forEach(t=>{t.addEventListener("click",()=>{L.onClickFilter(t)})}),L.elements.filtersClearBtn.forEach(t=>{t.addEventListener("click",L.onUnfilter)}))},getShiftItemsSize:t=>{L.elements.shiftItemsMuuri.forEach(e=>{e.style.display="block",e.setAttribute("thalia-gallery-item-height",e.firstElementChild.firstElementChild.offsetHeight),setTimeout(()=>{e.style.display=null},5)}),t&&t()},setShiftItemsSize:()=>{L.elements.shiftItemsMuuri.forEach(t=>{t.style.height=(L.data.currentFilter===null?L.itemsShiftValue:0)+parseFloat(t.getAttribute("thalia-gallery-item-height"))+"px"})},initShiftItems:()=>{X.style.setProperty("--thalia-gallery-item-shift",L.itemsShiftValue+"px"),L.elements.shiftItemsMuuri=document.querySelectorAll(".gallery-grid .grid-muuri--item.item-shift"),L.elements.shiftItemsMuuri.forEach(t=>{L.elements.shiftItemsContent.push(t.querySelectorAll(".item-gallery"))}),L.getShiftItemsSize(),L.setShiftItemsSize(),window.addEventListener("resize",()=>{L.getShiftItemsSize(L.setShiftItemsSize)})}};window.addEventListener("load",()=>{fe.scrollbarWidth(),Ft=new ds(Ht.options.scroll),m.interactions.init(),bt=new I(ai.target,ai.gallery),L.initShiftItems(),L.createItemsFiltersBtns(),L.initFiltersBtns(),Ht.resize(Ft)});
