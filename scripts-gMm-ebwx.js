var os=Object.defineProperty;var Ne=Object.getOwnPropertySymbols;var as=Object.prototype.hasOwnProperty,ls=Object.prototype.propertyIsEnumerable;var de=(t,e,i)=>e in t?os(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Ye=(t,e)=>{for(var i in e||(e={}))as.call(e,i)&&de(t,i,e[i]);if(Ne)for(var i of Ne(e))ls.call(e,i)&&de(t,i,e[i]);return t};var b=(t,e,i)=>de(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var hs="vh";function cs(t){var e,i="--"+hs;function s(){var r=t.clientHeight;r!==e&&requestAnimationFrame(function(){t.style.setProperty(i,r*.01+"px"),e=r})}return s(),s}window.addEventListener("resize",cs(document.documentElement));var ds="1.1.20";function fi(t,e,i){return Math.max(t,Math.min(e,i))}function us(t,e,i){return(1-i)*t+i*e}function fs(t,e,i,s){return us(t,e,1-Math.exp(-i*s))}function _s(t,e){return(t%e+e)%e}var vs=class{constructor(){b(this,"isRunning",!1);b(this,"value",0);b(this,"from",0);b(this,"to",0);b(this,"currentTime",0);b(this,"lerp");b(this,"duration");b(this,"easing");b(this,"onUpdate")}advance(t){var i;if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=t;const s=fi(0,this.currentTime/this.duration,1);e=s>=1;const r=e?1:this.easing(s);this.value=this.from+(this.to-this.from)*r}else this.lerp?(this.value=fs(this.value,this.to,this.lerp*60,t),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),(i=this.onUpdate)==null||i.call(this,this.value,e)}stop(){this.isRunning=!1}fromTo(t,e,{lerp:i,duration:s,easing:r,onStart:n,onUpdate:o}){this.from=this.value=t,this.to=e,this.lerp=i,this.duration=s,this.easing=r,this.currentTime=0,this.isRunning=!0,n==null||n(),this.onUpdate=o}};function ps(t,e){let i;return function(...s){let r=this;clearTimeout(i),i=setTimeout(()=>{i=void 0,t.apply(r,s)},e)}}var ms=class{constructor(t,e,{autoResize:i=!0,debounce:s=250}={}){b(this,"width",0);b(this,"height",0);b(this,"scrollHeight",0);b(this,"scrollWidth",0);b(this,"debouncedResize");b(this,"wrapperResizeObserver");b(this,"contentResizeObserver");b(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});b(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});b(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=t,this.content=e,i&&(this.debouncedResize=ps(this.resize,s),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var t,e;(t=this.wrapperResizeObserver)==null||t.disconnect(),(e=this.contentResizeObserver)==null||e.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},_i=class{constructor(){b(this,"events",{})}emit(e,...i){var r;let s=this.events[e]||[];for(let n=0,o=s.length;n<o;n++)(r=s[n])==null||r.call(s,...i)}on(e,i){var s;return(s=this.events[e])!=null&&s.push(i)||(this.events[e]=[i]),()=>{var r;this.events[e]=(r=this.events[e])==null?void 0:r.filter(n=>i!==n)}}off(e,i){var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(r=>i!==r)}destroy(){this.events={}}},ze=100/6,ot={passive:!1},gs=class{constructor(t,e={wheelMultiplier:1,touchMultiplier:1}){b(this,"touchStart",{x:0,y:0});b(this,"lastDelta",{x:0,y:0});b(this,"window",{width:0,height:0});b(this,"emitter",new _i);b(this,"onTouchStart",t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:t})});b(this,"onTouchMove",t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t,s=-(e-this.touchStart.x)*this.options.touchMultiplier,r=-(i-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:s,y:r},this.emitter.emit("scroll",{deltaX:s,deltaY:r,event:t})});b(this,"onTouchEnd",t=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:t})});b(this,"onWheel",t=>{let{deltaX:e,deltaY:i,deltaMode:s}=t;const r=s===1?ze:s===2?this.window.width:1,n=s===1?ze:s===2?this.window.height:1;e*=r,i*=n,e*=this.options.wheelMultiplier,i*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:i,event:t})});b(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=t,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,ot),this.element.addEventListener("touchstart",this.onTouchStart,ot),this.element.addEventListener("touchmove",this.onTouchMove,ot),this.element.addEventListener("touchend",this.onTouchEnd,ot)}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,ot),this.element.removeEventListener("touchstart",this.onTouchStart,ot),this.element.removeEventListener("touchmove",this.onTouchMove,ot),this.element.removeEventListener("touchend",this.onTouchEnd,ot)}},ys=class{constructor({wrapper:t=window,content:e=document.documentElement,eventsTarget:i=t,smoothWheel:s=!0,syncTouch:r=!1,syncTouchLerp:n=.075,touchInertiaMultiplier:o=35,duration:a,easing:l=x=>Math.min(1,1.001-Math.pow(2,-10*x)),lerp:h=.1,infinite:d=!1,orientation:v="vertical",gestureOrientation:E="vertical",touchMultiplier:y=1,wheelMultiplier:w=1,autoResize:u=!0,prevent:c,virtualScroll:m,overscroll:f=!0,autoRaf:g=!1,anchors:p=!1,__experimental__naiveDimensions:T=!1}={}){b(this,"_isScrolling",!1);b(this,"_isStopped",!1);b(this,"_isLocked",!1);b(this,"_preventNextNativeScrollEvent",!1);b(this,"_resetVelocityTimeout",null);b(this,"__rafID",null);b(this,"isTouching");b(this,"time",0);b(this,"userData",{});b(this,"lastVelocity",0);b(this,"velocity",0);b(this,"direction",0);b(this,"options");b(this,"targetScroll");b(this,"animatedScroll");b(this,"animate",new vs);b(this,"emitter",new _i);b(this,"dimensions");b(this,"virtualScroll");b(this,"onScrollEnd",t=>{t instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&t.stopPropagation()});b(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});b(this,"onClick",t=>{const i=t.composedPath().find(s=>{var r;return s instanceof HTMLAnchorElement&&((r=s.getAttribute("href"))==null?void 0:r.startsWith("#"))});if(i){const s=i.getAttribute("href");if(s){const r=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0;this.scrollTo(s,r)}}});b(this,"onPointerDown",t=>{t.button===1&&this.reset()});b(this,"onVirtualScroll",t=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(t)===!1)return;const{deltaX:e,deltaY:i,event:s}=t;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:i,event:s}),s.ctrlKey||s.lenisStopPropagation)return;const r=s.type.includes("touch"),n=s.type.includes("wheel");this.isTouching=s.type==="touchstart"||s.type==="touchmove";const o=e===0&&i===0;if(this.options.syncTouch&&r&&s.type==="touchstart"&&o&&!this.isStopped&&!this.isLocked){this.reset();return}const l=this.options.gestureOrientation==="vertical"&&i===0||this.options.gestureOrientation==="horizontal"&&e===0;if(o||l)return;let h=s.composedPath();h=h.slice(0,h.indexOf(this.rootElement));const d=this.options.prevent;if(h.find(c=>{var m,f,g;return c instanceof HTMLElement&&(typeof d=="function"&&(d==null?void 0:d(c))||((m=c.hasAttribute)==null?void 0:m.call(c,"data-lenis-prevent"))||r&&((f=c.hasAttribute)==null?void 0:f.call(c,"data-lenis-prevent-touch"))||n&&((g=c.hasAttribute)==null?void 0:g.call(c,"data-lenis-prevent-wheel")))}))return;if(this.isStopped||this.isLocked){s.preventDefault();return}if(!(this.options.syncTouch&&r||this.options.smoothWheel&&n)){this.isScrolling="native",this.animate.stop(),s.lenisStopPropagation=!0;return}let E=i;this.options.gestureOrientation==="both"?E=Math.abs(i)>Math.abs(e)?i:e:this.options.gestureOrientation==="horizontal"&&(E=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&i>0||this.animatedScroll===this.limit&&i<0))&&(s.lenisStopPropagation=!0),s.preventDefault();const y=r&&this.options.syncTouch,u=r&&s.type==="touchend"&&Math.abs(E)>5;u&&(E=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+E,Ye({programmatic:!1},y?{lerp:u?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))});b(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const t=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-t,this.direction=Math.sign(this.animatedScroll-t),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});b(this,"raf",t=>{const e=t-(this.time||t);this.time=t,this.animate.advance(e*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=ds,(!t||t===document.documentElement)&&(t=window),this.options={wrapper:t,content:e,eventsTarget:i,smoothWheel:s,syncTouch:r,syncTouchLerp:n,touchInertiaMultiplier:o,duration:a,easing:l,lerp:h,infinite:d,gestureOrientation:E,orientation:v,touchMultiplier:y,wheelMultiplier:w,autoResize:u,prevent:c,virtualScroll:m,overscroll:f,autoRaf:g,anchors:p,__experimental__naiveDimensions:T},this.dimensions=new ms(t,e,{autoResize:u}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new gs(i,{touchMultiplier:y,wheelMultiplier:w}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.off(t,e)}setScroll(t){this.isHorizontal?this.options.wrapper.scrollTo({left:t,behavior:"instant"}):this.options.wrapper.scrollTo({top:t,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.reset(),this.isStopped=!1)}stop(){this.isStopped||(this.reset(),this.isStopped=!0)}scrollTo(t,{offset:e=0,immediate:i=!1,lock:s=!1,duration:r=this.options.duration,easing:n=this.options.easing,lerp:o=this.options.lerp,onStart:a,onComplete:l,force:h=!1,programmatic:d=!0,userData:v}={}){if(!((this.isStopped||this.isLocked)&&!h)){if(typeof t=="string"&&["top","left","start"].includes(t))t=0;else if(typeof t=="string"&&["bottom","right","end"].includes(t))t=this.limit;else{let E;if(typeof t=="string"?E=document.querySelector(t):t instanceof HTMLElement&&(t!=null&&t.nodeType)&&(E=t),E){if(this.options.wrapper!==window){const w=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?w.left:w.top}const y=E.getBoundingClientRect();t=(this.isHorizontal?y.left:y.top)+this.animatedScroll}}if(typeof t=="number"){if(t+=e,t=Math.round(t),this.options.infinite?d&&(this.targetScroll=this.animatedScroll=this.scroll):t=fi(0,t,this.limit),t===this.targetScroll){a==null||a(this),l==null||l(this);return}if(this.userData=v!=null?v:{},i){this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}d||(this.targetScroll=t),this.animate.fromTo(this.animatedScroll,t,{duration:r,easing:n,lerp:o,onStart:()=>{s&&(this.isLocked=!0),this.isScrolling="smooth",a==null||a(this)},onUpdate:(E,y)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=E-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=E,this.setScroll(this.scroll),d&&(this.targetScroll=E),y||this.emit(),y&&(this.reset(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){var e,i;const t=this.options.wrapper;return this.isHorizontal?(e=t.scrollX)!=null?e:t.scrollLeft:(i=t.scrollY)!=null?i:t.scrollTop}get scroll(){return this.options.infinite?_s(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(t){this._isScrolling!==t&&(this._isScrolling=t,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(t){this._isStopped!==t&&(this._isStopped=t,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(t){this._isLocked!==t&&(this._isLocked=t,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let t="lenis";return this.isStopped&&(t+=" lenis-stopped"),this.isLocked&&(t+=" lenis-locked"),this.isScrolling&&(t+=" lenis-scrolling"),this.isScrolling==="smooth"&&(t+=" lenis-smooth"),t}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};function ge(){return ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ge.apply(null,arguments)}class Fe{constructor({scrollElements:e,rootMargin:i="-1px -1px -1px -1px",IORaf:s}){this.scrollElements=void 0,this.rootMargin=void 0,this.IORaf=void 0,this.observer=void 0,this.scrollElements=e,this.rootMargin=i,this.IORaf=s,this._init()}_init(){this.observer=new IntersectionObserver(e=>{e.forEach(i=>{const s=this.scrollElements.find(r=>r.$el===i.target);i.isIntersecting?(s&&(s.isAlreadyIntersected=!0),this._setInview(i)):s&&s.isAlreadyIntersected&&this._setOutOfView(i)})},{rootMargin:this.rootMargin});for(const e of this.scrollElements)this.observe(e.$el)}destroy(){this.observer.disconnect()}observe(e){e&&this.observer.observe(e)}unobserve(e){e&&this.observer.unobserve(e)}_setInview(e){const i=this.scrollElements.find(s=>s.$el===e.target);this.IORaf&&(i==null||i.setInteractivityOn()),!this.IORaf&&(i==null||i.setInview())}_setOutOfView(e){const i=this.scrollElements.find(s=>s.$el===e.target);this.IORaf&&(i==null||i.setInteractivityOff()),!this.IORaf&&(i==null||i.setOutOfView()),i!=null&&i.attributes.scrollRepeat||this.IORaf||this.unobserve(e.target)}}function He(t,e,i,s,r){return i+((r-t)/(e-t)*(s-i)||0)}function Xe(t,e){return t.reduce((i,s)=>Math.abs(s-e)<Math.abs(i-e)?s:i)}class Ss{constructor({$el:e,id:i,modularInstance:s,subscribeElementUpdateFn:r,unsubscribeElementUpdateFn:n,needRaf:o,scrollOrientation:a}){var l,h,d,v,E,y;this.$el=void 0,this.id=void 0,this.needRaf=void 0,this.attributes=void 0,this.scrollOrientation=void 0,this.isAlreadyIntersected=void 0,this.intersection=void 0,this.metrics=void 0,this.currentScroll=void 0,this.translateValue=void 0,this.progress=void 0,this.lastProgress=void 0,this.modularInstance=void 0,this.progressModularModules=void 0,this.isInview=void 0,this.isInteractive=void 0,this.isInFold=void 0,this.isFirstResize=void 0,this.subscribeElementUpdateFn=void 0,this.unsubscribeElementUpdateFn=void 0,this.$el=e,this.id=i,this.needRaf=o,this.scrollOrientation=a,this.modularInstance=s,this.subscribeElementUpdateFn=r,this.unsubscribeElementUpdateFn=n,this.attributes={scrollClass:(l=this.$el.dataset.scrollClass)!=null?l:"is-inview",scrollOffset:(h=this.$el.dataset.scrollOffset)!=null?h:"0,0",scrollPosition:(d=this.$el.dataset.scrollPosition)!=null?d:"start,end",scrollModuleProgress:this.$el.dataset.scrollModuleProgress!=null,scrollCssProgress:this.$el.dataset.scrollCssProgress!=null,scrollEventProgress:(v=this.$el.dataset.scrollEventProgress)!=null?v:null,scrollSpeed:this.$el.dataset.scrollSpeed!=null?parseFloat(this.$el.dataset.scrollSpeed):null,scrollParallaxSideways:this.$el.dataset.scrollParallaxSideways!=null,scrollParallaxClamp:(E=this.$el.dataset.scrollParallaxClamp)!=null?E:null,scrollRepeat:this.$el.dataset.scrollRepeat!=null,scrollCall:(y=this.$el.dataset.scrollCall)!=null?y:null,scrollCallSelf:this.$el.dataset.scrollCallSelf!=null,scrollIgnoreFold:this.$el.dataset.scrollIgnoreFold!=null,scrollEnableTouchSpeed:this.$el.dataset.scrollEnableTouchSpeed!=null},this.intersection={start:0,end:0},this.metrics={offsetStart:0,offsetEnd:0,bcr:{}},this.currentScroll=this.scrollOrientation==="vertical"?window.scrollY:window.scrollX,this.translateValue=0,this.progress=0,this.lastProgress=null,this.progressModularModules=[],this.isInview=!1,this.isInteractive=!1,this.isAlreadyIntersected=!1,this.isInFold=!1,this.isFirstResize=!0,this._init()}_init(){this.needRaf&&(this.modularInstance&&this.attributes.scrollModuleProgress&&this._getProgressModularModules(),this._resize())}onResize({currentScroll:e}){this.currentScroll=e,this._resize()}onRender({currentScroll:e,smooth:i}){const s=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth;if(this.currentScroll=e,this._computeProgress(),this.attributes.scrollSpeed&&!isNaN(this.attributes.scrollSpeed))if(this.attributes.scrollEnableTouchSpeed||i){if(this.isInFold){const r=Math.max(0,this.progress);this.translateValue=r*s*this.attributes.scrollSpeed*-1}else{let r=He(0,1,-1,1,this.progress);switch(this.attributes.scrollParallaxClamp){case"+":r=Math.max(r,0);break;case"-":r=Math.min(r,0)}this.translateValue=r*s*this.attributes.scrollSpeed*-1}this.$el.style.transform=`translate3d(${this.scrollOrientation==="vertical"?this.attributes.scrollParallaxSideways?`${this.translateValue}px, 0`:`0, ${this.translateValue}px`:this.attributes.scrollParallaxSideways?`0, ${this.translateValue}px`:`${this.translateValue}px, 0`}, 0)`}else this.translateValue&&(this.$el.style.transform="translate3d(0, 0, 0)"),this.translateValue=0}setInview(){if(this.isInview)return;this.isInview=!0,this.$el.classList.add(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("enter",e)}setOutOfView(){if(!this.isInview||!this.attributes.scrollRepeat)return;this.isInview=!1,this.$el.classList.remove(this.attributes.scrollClass);const e=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("leave",e)}setInteractivityOn(){this.isInteractive||(this.isInteractive=!0,this.subscribeElementUpdateFn(this))}setInteractivityOff(){this.isInteractive&&(this.isInteractive=!1,this.unsubscribeElementUpdateFn(this),this.lastProgress!=null&&this._computeProgress(Xe([0,1],this.lastProgress)))}_resize(){this.metrics.bcr=this.$el.getBoundingClientRect(),this._computeMetrics(),this._computeIntersection(),this.isFirstResize&&(this.isFirstResize=!1,this.isInFold&&this.setInview())}_computeMetrics(){const{top:e,left:i,height:s,width:r}=this.metrics.bcr,n=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,o=this.scrollOrientation==="vertical"?s:r;this.metrics.offsetStart=this.currentScroll+(this.scrollOrientation==="vertical"?e:i)-this.translateValue,this.metrics.offsetEnd=this.metrics.offsetStart+o,this.isInFold=this.metrics.offsetStart<n&&!this.attributes.scrollIgnoreFold}_computeIntersection(){const e=this.scrollOrientation==="vertical"?window.innerHeight:window.innerWidth,i=this.scrollOrientation==="vertical"?this.metrics.bcr.height:this.metrics.bcr.width,s=this.attributes.scrollOffset.split(","),r=s[0]!=null?s[0].trim():"0",n=s[1]!=null?s[1].trim():"0",o=this.attributes.scrollPosition.split(",");let a=o[0]!=null?o[0].trim():"start";const l=o[1]!=null?o[1].trim():"end",h=r.includes("%")?e*parseInt(r.replace("%","").trim())*.01:parseInt(r),d=n.includes("%")?e*parseInt(n.replace("%","").trim())*.01:parseInt(n);switch(this.isInFold&&(a="fold"),a){case"start":default:this.intersection.start=this.metrics.offsetStart-e+h;break;case"middle":this.intersection.start=this.metrics.offsetStart-e+h+.5*i;break;case"end":this.intersection.start=this.metrics.offsetStart-e+h+i;break;case"fold":this.intersection.start=0}switch(l){case"start":this.intersection.end=this.metrics.offsetStart-d;break;case"middle":this.intersection.end=this.metrics.offsetStart-d+.5*i;break;default:this.intersection.end=this.metrics.offsetStart-d+i}if(this.intersection.end<=this.intersection.start)switch(l){case"start":default:this.intersection.end=this.intersection.start+1;break;case"middle":this.intersection.end=this.intersection.start+.5*i;break;case"end":this.intersection.end=this.intersection.start+i}}_computeProgress(e){const i=e!=null?e:(s=He(this.intersection.start,this.intersection.end,0,1,this.currentScroll))<0?0:s>1?1:s;var s;if(this.progress=i,i!=this.lastProgress){if(this.lastProgress=i,this.attributes.scrollCssProgress&&this._setCssProgress(i),this.attributes.scrollEventProgress&&this._setCustomEventProgress(i),this.attributes.scrollModuleProgress)for(const r of this.progressModularModules)this.modularInstance&&this.modularInstance.call("onScrollProgress",i,r.moduleName,r.moduleId);i>0&&i<1&&this.setInview(),i===0&&this.setOutOfView(),i===1&&this.setOutOfView()}}_setCssProgress(e=0){this.$el.style.setProperty("--progress",e.toString())}_setCustomEventProgress(e=0){const i=this.attributes.scrollEventProgress;if(!i)return;const s=new CustomEvent(i,{detail:{target:this.$el,progress:e}});window.dispatchEvent(s)}_getProgressModularModules(){if(!this.modularInstance)return;const e=Object.keys(this.$el.dataset).filter(s=>s.includes("module")),i=Object.entries(this.modularInstance.modules);if(e.length)for(const s of e){const r=this.$el.dataset[s];if(!r)return;for(const n of i){const[o,a]=n;r in a&&this.progressModularModules.push({moduleName:o,moduleId:r})}}}_getScrollCallFrom(){const e=Xe([this.intersection.start,this.intersection.end],this.currentScroll);return this.intersection.start===e?"start":"end"}_dispatchCall(e,i){var s,r;const n=(s=this.attributes.scrollCall)==null?void 0:s.split(","),o=(r=this.attributes)==null?void 0:r.scrollCallSelf;if(n&&n.length>1){var a;const[l,h,d]=n;let v;v=o?this.$el.dataset[`module${h.trim()}`]:d,this.modularInstance&&this.modularInstance.call(l.trim(),{target:this.$el,way:e,from:i},h.trim(),(a=v)==null?void 0:a.trim())}else if(n){const[l]=n,h=new CustomEvent(l,{detail:{target:this.$el,way:e,from:i}});window.dispatchEvent(h)}}}const Es=["scrollOffset","scrollPosition","scrollModuleProgress","scrollCssProgress","scrollEventProgress","scrollSpeed"];class ws{constructor({$el:e,modularInstance:i,triggerRootMargin:s,rafRootMargin:r,scrollOrientation:n}){this.$scrollContainer=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.scrollElements=void 0,this.triggeredScrollElements=void 0,this.RAFScrollElements=void 0,this.scrollElementsToUpdate=void 0,this.IOTriggerInstance=void 0,this.IORafInstance=void 0,this.scrollOrientation=void 0,e?(this.$scrollContainer=e,this.modularInstance=i,this.scrollOrientation=n,this.triggerRootMargin=s!=null?s:"-1px -1px -1px -1px",this.rafRootMargin=r!=null?r:"100% 100% 100% 100%",this.scrollElements=[],this.triggeredScrollElements=[],this.RAFScrollElements=[],this.scrollElementsToUpdate=[],this._init()):console.error("Please provide a DOM Element as scrollContainer")}_init(){const e=this.$scrollContainer.querySelectorAll("[data-scroll]"),i=Array.from(e);this._subscribeScrollElements(i),this.IOTriggerInstance=new Fe({scrollElements:[...this.triggeredScrollElements],rootMargin:this.triggerRootMargin,IORaf:!1}),this.IORafInstance=new Fe({scrollElements:[...this.RAFScrollElements],rootMargin:this.rafRootMargin,IORaf:!0})}destroy(){this.IOTriggerInstance.destroy(),this.IORafInstance.destroy(),this._unsubscribeAllScrollElements()}onResize({currentScroll:e}){for(const i of this.RAFScrollElements)i.onResize({currentScroll:e})}onRender({currentScroll:e,smooth:i}){for(const s of this.scrollElementsToUpdate)s.onRender({currentScroll:e,smooth:i})}removeScrollElements(e){const i=e.querySelectorAll("[data-scroll]");if(i.length){for(let s=0;s<this.triggeredScrollElements.length;s++){const r=this.triggeredScrollElements[s];Array.from(i).indexOf(r.$el)>-1&&(this.IOTriggerInstance.unobserve(r.$el),this.triggeredScrollElements.splice(s,1))}for(let s=0;s<this.RAFScrollElements.length;s++){const r=this.RAFScrollElements[s];Array.from(i).indexOf(r.$el)>-1&&(this.IORafInstance.unobserve(r.$el),this.RAFScrollElements.splice(s,1))}i.forEach(s=>{const r=this.scrollElementsToUpdate.find(o=>o.$el===s),n=this.scrollElements.find(o=>o.$el===s);r&&this._unsubscribeElementUpdate(r),n&&(this.scrollElements=this.scrollElements.filter(o=>o.id!=n.id))})}}addScrollElements(e){const i=e.querySelectorAll("[data-scroll]"),s=[];this.scrollElements.forEach(o=>{s.push(o.id)});const r=Math.max(...s,0)+1,n=Array.from(i);this._subscribeScrollElements(n,r,!0)}_subscribeScrollElements(e,i=0,s=!1){for(let r=0;r<e.length;r++){const n=e[r],o=this._checkRafNeeded(n),a=new Ss({$el:n,id:i+r,scrollOrientation:this.scrollOrientation,modularInstance:this.modularInstance,subscribeElementUpdateFn:this._subscribeElementUpdate.bind(this),unsubscribeElementUpdateFn:this._unsubscribeElementUpdate.bind(this),needRaf:o});this.scrollElements.push(a),o?(this.RAFScrollElements.push(a),s&&(this.IORafInstance.scrollElements.push(a),this.IORafInstance.observe(a.$el))):(this.triggeredScrollElements.push(a),s&&(this.IOTriggerInstance.scrollElements.push(a),this.IOTriggerInstance.observe(a.$el)))}}_unsubscribeAllScrollElements(){this.scrollElements=[],this.RAFScrollElements=[],this.triggeredScrollElements=[],this.scrollElementsToUpdate=[]}_subscribeElementUpdate(e){this.scrollElementsToUpdate.push(e)}_unsubscribeElementUpdate(e){this.scrollElementsToUpdate=this.scrollElementsToUpdate.filter(i=>i.id!=e.id)}_checkRafNeeded(e){let i=[...Es];const s=r=>{i=i.filter(n=>n!=r)};if(e.dataset.scrollOffset){if(e.dataset.scrollOffset.split(",").map(r=>r.replace("%","").trim()).join(",")!="0,0")return!0;s("scrollOffset")}else s("scrollOffset");if(e.dataset.scrollPosition){if(e.dataset.scrollPosition.trim()!="top,bottom")return!0;s("scrollPosition")}else s("scrollPosition");if(e.dataset.scrollSpeed&&!isNaN(parseFloat(e.dataset.scrollSpeed)))return!0;s("scrollSpeed");for(const r of i)if(r in e.dataset)return!0;return!1}}class bs{constructor({resizeElements:e,resizeCallback:i=()=>{}}){this.$resizeElements=void 0,this.isFirstObserve=void 0,this.observer=void 0,this.resizeCallback=void 0,this.$resizeElements=e,this.resizeCallback=i,this.isFirstObserve=!0,this._init()}_init(){this.observer=new ResizeObserver(e=>{var i;!this.isFirstObserve&&((i=this.resizeCallback)==null||i.call(this)),this.isFirstObserve=!1});for(const e of this.$resizeElements)this.observer.observe(e)}destroy(){this.observer.disconnect()}}class Ts{constructor({lenisOptions:e={},modularInstance:i,triggerRootMargin:s,rafRootMargin:r,autoResize:n=!0,autoStart:o=!0,scrollCallback:a=()=>{},initCustomTicker:l,destroyCustomTicker:h}={}){this.rafPlaying=void 0,this.lenisInstance=void 0,this.coreInstance=void 0,this.lenisOptions=void 0,this.modularInstance=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.rafInstance=void 0,this.autoResize=void 0,this.autoStart=void 0,this.ROInstance=void 0,this.initCustomTicker=void 0,this.destroyCustomTicker=void 0,this._onRenderBind=void 0,this._onResizeBind=void 0,this._onScrollToBind=void 0;for(const[d]of Object.entries(e))["wrapper","content","infinite"].includes(d)&&console.warn(`Warning: Key "${d}" is not possible to edit in Locomotive Scroll.`);Object.assign(this,{lenisOptions:e,modularInstance:i,triggerRootMargin:s,rafRootMargin:r,autoResize:n,autoStart:o,scrollCallback:a,initCustomTicker:l,destroyCustomTicker:h}),this._onRenderBind=this._onRender.bind(this),this._onScrollToBind=this._onScrollTo.bind(this),this._onResizeBind=this._onResize.bind(this),this.rafPlaying=!1,this._init()}_init(){var e;this.lenisInstance=new ys(ge({},this.lenisOptions,{wrapper:window,content:document.documentElement,infinite:!1})),(e=this.lenisInstance)==null||e.on("scroll",this.scrollCallback),document.documentElement.setAttribute("data-scroll-orientation",this.lenisInstance.options.orientation),requestAnimationFrame(()=>{this.coreInstance=new ws({$el:this.lenisInstance.rootElement,modularInstance:this.modularInstance,triggerRootMargin:this.triggerRootMargin,rafRootMargin:this.rafRootMargin,scrollOrientation:this.lenisInstance.options.orientation}),this._bindEvents(),this.initCustomTicker&&!this.destroyCustomTicker?console.warn("initCustomTicker callback is declared, but destroyCustomTicker is not. Please pay attention. It could cause trouble."):!this.initCustomTicker&&this.destroyCustomTicker&&console.warn("destroyCustomTicker callback is declared, but initCustomTicker is not. Please pay attention. It could cause trouble."),this.autoStart&&this.start()})}destroy(){var e;this.stop(),this._unbindEvents(),this.lenisInstance.destroy(),(e=this.coreInstance)==null||e.destroy(),requestAnimationFrame(()=>{var i;(i=this.coreInstance)==null||i.destroy()})}_bindEvents(){this._bindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance=new bs({resizeElements:[document.body],resizeCallback:this._onResizeBind}):window.addEventListener("resize",this._onResizeBind))}_unbindEvents(){this._unbindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance&&this.ROInstance.destroy():window.removeEventListener("resize",this._onResizeBind))}_bindScrollToEvents(e){const i=e||this.lenisInstance.rootElement,s=i==null?void 0:i.querySelectorAll("[data-scroll-to]");s!=null&&s.length&&s.forEach(r=>{r.addEventListener("click",this._onScrollToBind,!1)})}_unbindScrollToEvents(e){const i=e||this.lenisInstance.rootElement,s=i==null?void 0:i.querySelectorAll("[data-scroll-to]");s!=null&&s.length&&s.forEach(r=>{r.removeEventListener("click",this._onScrollToBind,!1)})}_onResize(){requestAnimationFrame(()=>{var e;(e=this.coreInstance)==null||e.onResize({currentScroll:this.lenisInstance.scroll})})}_onRender(){var e,i;(e=this.lenisInstance)==null||e.raf(Date.now()),(i=this.coreInstance)==null||i.onRender({currentScroll:this.lenisInstance.scroll,smooth:this.lenisInstance.options.smoothWheel})}_onScrollTo(e){var i;e.preventDefault();const s=(i=e.currentTarget)!=null?i:null;if(!s)return;const r=s.getAttribute("data-scroll-to-href")||s.getAttribute("href"),n=s.getAttribute("data-scroll-to-offset")||0,o=s.getAttribute("data-scroll-to-duration")||this.lenisInstance.options.duration;r&&this.scrollTo(r,{offset:typeof n=="string"?parseInt(n):n,duration:typeof o=="string"?parseInt(o):o})}start(){var e;this.rafPlaying||((e=this.lenisInstance)==null||e.start(),this.rafPlaying=!0,this.initCustomTicker?this.initCustomTicker(this._onRenderBind):this._raf())}stop(){var e;this.rafPlaying&&((e=this.lenisInstance)==null||e.stop(),this.rafPlaying=!1,this.destroyCustomTicker?this.destroyCustomTicker(this._onRenderBind):this.rafInstance&&cancelAnimationFrame(this.rafInstance))}removeScrollElements(e){var i;e?(this._unbindScrollToEvents(e),(i=this.coreInstance)==null||i.removeScrollElements(e)):console.error("Please provide a DOM Element as $oldContainer")}addScrollElements(e){var i;e?((i=this.coreInstance)==null||i.addScrollElements(e),requestAnimationFrame(()=>{this._bindScrollToEvents(e)})):console.error("Please provide a DOM Element as $newContainer")}resize(){this._onResizeBind()}scrollTo(e,i){var s;(s=this.lenisInstance)==null||s.scrollTo(e,{offset:i==null?void 0:i.offset,lerp:i==null?void 0:i.lerp,duration:i==null?void 0:i.duration,immediate:i==null?void 0:i.immediate,lock:i==null?void 0:i.lock,force:i==null?void 0:i.force,easing:i==null?void 0:i.easing,onComplete:i==null?void 0:i.onComplete})}_raf(){this._onRenderBind(),this.rafInstance=requestAnimationFrame(()=>this._raf())}}/**
* Muuri v0.9.5
* https://muuri.dev/
* Copyright (c) 2015-present, Haltu Oy
* Released under the MIT license
* https://github.com/haltu/muuri/blob/master/LICENSE.md
* @license MIT
*
* Muuri Packer
* Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri Ticker / Muuri Emitter / Muuri Dragger
* Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*
* Muuri AutoScroller
* Copyright (c) 2019-present, Niklas Rämö <inramo@gmail.com>
* @license MIT
*/var ee={},vt=typeof Map=="function"?new Map:null,J="swap",mt="move",Is="synchronize",ht="layoutStart",qe="layoutEnd",Be="layoutAbort",Ve="add",We="remove",Ds="showStart",As="showEnd",xt="hideStart",Rs="hideEnd",Ge="filter",$e="sort",Gt="move",$t="send",ct="beforeSend",Ut="receive",jt="beforeReceive",Ls="dragInit",xs="dragStart",ks="dragMove",Cs="dragScroll",Ps="dragEnd",Os="dragReleaseStart",kt="dragReleaseEnd",Ms="destroy",vi="ontouchstart"in window,Te=!!window.PointerEvent,Ie=!!window.navigator.msPointerEnabled,Ns=16777216;function j(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}j.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this};j.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];if(!i||!i.length)return this;for(var s;(s=i.indexOf(e))!==-1;)i.splice(s,1);return this};j.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this};j.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i=this._queue,s=i.length,r=arguments.length-1,n;r>3&&(n=[],n.push.apply(n,arguments),n.shift()),i.push.apply(i,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var o=s,a=i.length;o<a;o++)if(r===0?i[o]():r===1?i[o](arguments[1]):r===2?i[o](arguments[1],arguments[2]):r===3?i[o](arguments[1],arguments[2],arguments[3]):i[o].apply(null,n),!this._events)return this;return--this._counter,this._counter||(i.length=0),this};j.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this};j.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0};j.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var ie=Te?"pointerout":Ie?"MSPointerOut":"",Ys=100;function ut(t){ie&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}ut.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(ie,this._onOut))};ut.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(ie,this._onOut),this._resetData(),this._isActive=!1)};ut.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null};ut.prototype._onStart=function(t){t.pointerType!=="mouse"&&this._addBehaviour()};ut.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,Ys))};ut.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)};ut.prototype.destroy=function(){ie&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var ue=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],Ue={};function se(t,e){var i=Ue[e]||"";if(i)return i;for(var s=e[0].toUpperCase()+e.slice(1),r=0;r<ue.length;){if(i=ue[r]?ue[r]+s:e,i in t)return Ue[e]=i,i;++r}return""}function pi(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(i){}return t}var re=window.navigator.userAgent.toLowerCase(),zs=re.indexOf("edge")>-1,Fs=re.indexOf("trident")>-1,Hs=re.indexOf("firefox")>-1,Xs=re.indexOf("android")>-1,at=pi()?{passive:!0}:!1,mi="touchAction",Xt=se(document.documentElement.style,mi),qs="auto";function _(t,e){this._element=t,this._emitter=new j,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(zs||Fs)&&(Te||Ie)&&(this._edgeHack=new ut(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(qs),t.addEventListener("dragstart",_._preventDefault,!1),t.addEventListener(_._inputEvents.start,this._onStart,at)}_._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"};_._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"};_._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"};_._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"};_._inputEvents=function(){return vi?_._touchEvents:Te?_._pointerEvents:Ie?_._msPointerEvents:_._mouseEvents}();_._emitter=new j;_._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"};_._activeInstances=[];_._preventDefault=function(t){t.preventDefault&&t.cancelable!==!1&&t.preventDefault()};_._activateInstance=function(t){var e=_._activeInstances.indexOf(t);e>-1||(_._activeInstances.push(t),_._emitter.on(_._emitterEvents.move,t._onMove),_._emitter.on(_._emitterEvents.cancel,t._onCancel),_._emitter.on(_._emitterEvents.end,t._onEnd),_._activeInstances.length===1&&_._bindListeners())};_._deactivateInstance=function(t){var e=_._activeInstances.indexOf(t);e!==-1&&(_._activeInstances.splice(e,1),_._emitter.off(_._emitterEvents.move,t._onMove),_._emitter.off(_._emitterEvents.cancel,t._onCancel),_._emitter.off(_._emitterEvents.end,t._onEnd),_._activeInstances.length||_._unbindListeners())};_._bindListeners=function(){window.addEventListener(_._inputEvents.move,_._onMove,at),window.addEventListener(_._inputEvents.end,_._onEnd,at),_._inputEvents.cancel&&window.addEventListener(_._inputEvents.cancel,_._onCancel,at)};_._unbindListeners=function(){window.removeEventListener(_._inputEvents.move,_._onMove,at),window.removeEventListener(_._inputEvents.end,_._onEnd,at),_._inputEvents.cancel&&window.removeEventListener(_._inputEvents.cancel,_._onCancel,at)};_._getEventPointerId=function(t){return typeof t.pointerId=="number"?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1};_._getTouchById=function(t,e){if(typeof t.pointerId=="number")return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t};_._onMove=function(t){_._emitter.emit(_._emitterEvents.move,t)};_._onCancel=function(t){_._emitter.emit(_._emitterEvents.cancel,t)};_._onEnd=function(t){_._emitter.emit(_._emitterEvents.end,t)};_.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,_._deactivateInstance(this)};_.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===_._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===_._emitterEvents.start,isFinal:t===_._emitterEvents.end||t===_._emitterEvents.cancel,pointerType:e.pointerType||(e.touches?"touch":"mouse"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}};_.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))};_.prototype._getTrackedTouch=function(t){return this._pointerId===null?null:_._getTouchById(t,this._pointerId)};_.prototype._onStart=function(t){if(!this._isDestroyed&&this._pointerId===null&&(this._pointerId=_._getEventPointerId(t),this._pointerId!==null)){var e=this._getTrackedTouch(t);this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(_._emitterEvents.start,t),this._isActive&&_._activateInstance(this)}};_.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(_._emitterEvents.move,t))};_.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(_._emitterEvents.cancel,t),this._reset())};_.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(_._emitterEvents.end,t),this._reset())};_.prototype.isActive=function(){return this._isActive};_.prototype.setTouchAction=function(t){this._touchAction=t,Xt&&(this._cssProps[Xt]="",this._element.style[Xt]=t),vi&&(this._element.removeEventListener(_._touchEvents.start,_._preventDefault,!0),(this._element.style[Xt]!==t||Hs&&Xs)&&this._element.addEventListener(_._touchEvents.start,_._preventDefault,!0))};_.prototype.setCssProps=function(t){if(t){var e=this._cssProps,i=this._element,s,r;for(s in e)i.style[s]=e[s],delete e[s];for(s in t)if(t[s]){if(s===mi){this.setTouchAction(t[s]);continue}r=se(i.style,s),r&&(e[r]="",i.style[r]=t[s])}}};_.prototype.getDeltaX=function(){return this._currentX-this._startX};_.prototype.getDeltaY=function(){return this._currentY-this._startY};_.prototype.getDistance=function(){var t=this.getDeltaX(),e=this.getDeltaY();return Math.sqrt(t*t+e*e)};_.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0};_.prototype.on=function(t,e){this._emitter.on(t,e)};_.prototype.off=function(t,e){this._emitter.off(t,e)};_.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(_._inputEvents.start,this._onStart,at),t.removeEventListener("dragstart",_._preventDefault,!1),t.removeEventListener(_._touchEvents.start,_._preventDefault,!0);for(var e in this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var Bs=1e3/60,Vs=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return this.setTimeout(function(){t(Date.now())},Bs)}).bind(window);function ne(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new De)}ne.prototype._step=function(t){var e=this._lanes,i=this._stepQueue,s=this._stepCallbacks,r,n,o,a,l,h;for(this._nextStep=null,r=0;r<e.length;r++){for(a=e[r].queue,l=e[r].callbacks,h=e[r].indices,n=0;n<a.length;n++)o=a[n],o&&(i.push(o),s[o]=l[o],delete l[o],delete h[o]);a.length=0}for(r=0;r<i.length;r++)o=i[r],s[o]&&s[o](t),delete s[o];i.length=0};ne.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nextStep=Vs(this._step))};ne.prototype.remove=function(t,e){this._lanes[t].remove(e)};function De(){this.queue=[],this.indices={},this.callbacks={}}De.prototype.add=function(t,e){var i=this.indices[t];i!==void 0&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1};De.prototype.remove=function(t){var e=this.indices[t];e!==void 0&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var gi="layoutRead",yi="layoutWrite",Si="visibilityRead",Ei="visibilityWrite",wi="dragStartRead",bi="dragStartWrite",Ti="dragMoveRead",Ii="dragMoveWrite",Di="dragScrollRead",Ai="dragScrollWrite",Ri="dragSortRead",Li="placeholderLayoutRead",xi="placeholderLayoutWrite",ki="placeholderResizeWrite",Ci="autoScrollRead",Pi="autoScrollWrite",Oi="debounceRead",B=0,Mi=1,V=2,k=new ne(3);function Ws(t,e,i){k.add(B,gi+t,e),k.add(V,yi+t,i)}function Ni(t){k.remove(B,gi+t),k.remove(V,yi+t)}function Gs(t,e,i){k.add(B,Si+t,e),k.add(V,Ei+t,i)}function Yi(t){k.remove(B,Si+t),k.remove(V,Ei+t)}function $s(t,e,i){k.add(B,wi+t,e),k.add(V,bi+t,i)}function zi(t){k.remove(B,wi+t),k.remove(V,bi+t)}function Us(t,e,i){k.add(B,Ti+t,e),k.add(V,Ii+t,i)}function Fi(t){k.remove(B,Ti+t),k.remove(V,Ii+t)}function js(t,e,i){k.add(B,Di+t,e),k.add(V,Ai+t,i)}function Hi(t){k.remove(B,Di+t),k.remove(V,Ai+t)}function oe(t,e){k.add(Mi,Ri+t,e)}function Zs(t){k.remove(Mi,Ri+t)}function Qs(t,e,i){k.add(B,Li+t,e),k.add(V,xi+t,i)}function Xi(t){k.remove(B,Li+t),k.remove(V,xi+t)}function Ks(t,e){k.add(V,ki+t,e)}function Js(t){k.remove(V,ki+t)}function qi(t,e){k.add(B,Ci,t),k.add(V,Pi,e)}function tr(){k.remove(B,Ci),k.remove(V,Pi)}function er(t,e){k.add(B,Oi+t,e)}function ir(t){k.remove(B,Oi+t)}var N=1,F=2,At=4,Ae=8,Ct=N|Ae,Pt=N|At,Ot=F|Ae,Zt=F|At,sr="function";function R(t){return typeof t===sr}var qt=typeof WeakMap=="function"?new WeakMap:null;function G(t,e){var i=qt&&qt.get(t);return i||(i=window.getComputedStyle(t,null),qt&&qt.set(t,i)),i.getPropertyValue(e)}function U(t,e){return parseFloat(G(t,e))||0}var gt=document.documentElement,rr=document.body,Bt={value:0,offset:0};function Bi(t){return t===window||t===gt||t===rr?window:t}function Mt(t){return t===window?t.pageXOffset:t.scrollLeft}function Nt(t){return t===window?t.pageYOffset:t.scrollTop}function Vi(t){return t===window?gt.scrollWidth-gt.clientWidth:t.scrollWidth-t.clientWidth}function Wi(t){return t===window?gt.scrollHeight-gt.clientHeight:t.scrollHeight-t.clientHeight}function Gi(t,e){if(e=e||{},t===window)e.width=gt.clientWidth,e.height=gt.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),s=t.clientLeft||U(t,"border-left-width"),r=t.clientTop||U(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+s,e.right=e.left+e.width,e.top=i.top+r,e.bottom=e.top+e.height}return e}function zt(t){return t._drag._getGrid()._settings.dragAutoScroll}function nr(t){t._drag&&t._drag._prepareScroll()}function or(t){if(!(!t._drag||!t._isActive)){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._left,e._top)}}function ye(t,e,i,s){return Bt.value=Math.min(s/2,t),Bt.offset=Math.max(0,i+Bt.value*2+s*e-s)/2,Bt}function st(){this.reset()}st.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null};st.prototype.hasReachedEnd=function(){return At&this.direction?this.value>=this.maxValue:this.value<=0};st.prototype.computeCurrentScrollValue=function(){return this.value===null?N&this.direction?Mt(this.element):Nt(this.element):Math.max(0,Math.min(this.value,this.maxValue))};st.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=At&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))};st.prototype.computeSpeed=function(){var t={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1};return function(e){var i=this.item,s=zt(i).speed;return R(s)?(t.direction=this.direction,t.threshold=this.threshold,t.distance=this.distance,t.value=this.value,t.maxValue=this.maxValue,t.duration=this.duration,t.speed=this.speed,t.deltaTime=e,t.isEnding=this.isEnding,s(i,this.element,t)):s}}();st.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value};st.prototype.onStart=function(){var t=this.item,e=zt(t).onStart;R(e)&&e(t,this.element,this.direction)};st.prototype.onStop=function(){var t=this.item,e=zt(t).onStop;R(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()};function Rt(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}Rt.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0};Rt.prototype.addRequest=function(t){N&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this};Rt.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))};Rt.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:Mt(this.element),this.scrollTop=this.requestY?this.requestY.value:Nt(this.element)};Rt.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scrollTop=this.scrollTop))};function Yt(t,e){this.pool=[],this.createItem=t,this.releaseItem=e}Yt.prototype.pick=function(){return this.pool.pop()||this.createItem()};Yt.prototype.release=function(t){this.releaseItem(t),this.pool.indexOf(t)===-1&&this.pool.push(t)};Yt.prototype.reset=function(){this.pool.length=0};function ar(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function lr(t,e){if(!ar(t,e))return 0;var i=Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left),s=Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top);return i*s}function Qt(t,e){var i=lr(t,e);if(!i)return 0;var s=Math.min(t.width,e.width)*Math.min(t.height,e.height);return i/s*100}var $i={width:0,height:0,left:0,right:0,top:0,bottom:0},Ui={width:0,height:0,left:0,right:0,top:0,bottom:0};function C(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[N]={},this._requests[F]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Yt(function(){return new st},function(t){t.reset()}),this._actionPool=new Yt(function(){return new Rt},function(t){t.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}C.AXIS_X=N;C.AXIS_Y=F;C.FORWARD=At;C.BACKWARD=Ae;C.LEFT=Ct;C.RIGHT=Pt;C.UP=Ot;C.DOWN=Zt;C.smoothSpeed=function(t,e,i){return function(s,r,n){var o=0;if(!n.isEnding)if(n.threshold>0){var a=n.threshold-Math.max(0,n.distance);o=t/n.threshold*a}else o=t;var l=n.speed,h=o;return l===o?h:l<o?(h=l+e*(n.deltaTime/1e3),Math.min(o,h)):(h=l-i*(n.deltaTime/1e3),Math.max(o,h))}};C.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(s,r,n,o,a,l,h){return e.left=l-i*.5,e.top=h-i*.5,e.width=i,e.height=i,e}};C.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))};C.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),qi(this._readTick,this._writeTick))};C.prototype._startTicking=function(){this._isTicking=!0,qi(this._readTick,this._writeTick)};C.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,tr()};C.prototype._getItemHandleRect=function(t,e,i){var s=t._drag;if(e){var r=s._dragMoveEvent||s._dragStartEvent,n=e(t,s._clientX,s._clientY,t._width,t._height,r.clientX,r.clientY);i.left=n.left,i.top=n.top,i.width=n.width,i.height=n.height}else i.left=s._clientX,i.top=s._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i};C.prototype._requestItemScroll=function(t,e,i,s,r,n,o){var a=this._requests[e],l=a[t._id];l?(l.element!==i||l.direction!==s)&&l.reset():l=this._requestPool.pick(),l.item=t,l.element=i,l.direction=s,l.threshold=r,l.distance=n,l.maxValue=o,a[t._id]=l};C.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],s=i[t._id];s&&(s.action&&s.action.removeRequest(s),this._requestPool.release(s),delete i[t._id])};C.prototype._checkItemOverlap=function(t,e,i){var s=zt(t),r=R(s.targets)?s.targets(t):s.targets,n=s.threshold,o=s.safeZone;if(!r||!r.length){e&&this._cancelItemScroll(t,N),i&&this._cancelItemScroll(t,F);return}var a=this._dragDirections[t._id],l=a[0],h=a[1];if(!l&&!h){e&&this._cancelItemScroll(t,N),i&&this._cancelItemScroll(t,F);return}for(var d=this._getItemHandleRect(t,s.handle,$i),v=Ui,E=null,y=null,w=!0,u=!0,c=0,m=0,f=null,g=null,p=0,T=0,x=0,O=null,P=-1/0,A=0,Z=0,Y=null,H=0,Q=0,X=null,Ht=-1/0,ke=0,Ce=0,Pe=null,Oe=0,Me=0,ce=0;ce<r.length;ce++)E=r[ce],w=e&&l&&E.axis!==F,u=i&&h&&E.axis!==N,m=E.priority||0,!((!w||m<P)&&(!u||m<Ht))&&(y=Bi(E.element||E),T=w?Vi(y):-1,x=u?Wi(y):-1,!(!T&&!x)&&(v=Gi(y,v),c=Qt(d,v),!(c<=0)&&(w&&m>=P&&T>0&&(m>P||c>Z)&&(g=null,f=ye(typeof E.threshold=="number"?E.threshold:n,o,d.width,v.width),l===Pt?(p=v.right+f.offset-d.right,p<=f.value&&Mt(y)<T&&(g=Pt)):l===Ct&&(p=d.left-(v.left-f.offset),p<=f.value&&Mt(y)>0&&(g=Ct)),g!==null&&(O=y,P=m,A=f.value,Z=c,Y=g,H=p,Q=T)),u&&m>=Ht&&x>0&&(m>Ht||c>Ce)&&(g=null,f=ye(typeof E.threshold=="number"?E.threshold:n,o,d.height,v.height),h===Zt?(p=v.bottom+f.offset-d.bottom,p<=f.value&&Nt(y)<x&&(g=Zt)):h===Ot&&(p=d.top-(v.top-f.offset),p<=f.value&&Nt(y)>0&&(g=Ot)),g!==null&&(X=y,Ht=m,ke=f.value,Ce=c,Pe=g,Oe=p,Me=x)))));e&&(O?this._requestItemScroll(t,N,O,Y,A,H,Q):this._cancelItemScroll(t,N)),i&&(X?this._requestItemScroll(t,F,X,Pe,ke,Oe,Me):this._cancelItemScroll(t,F))};C.prototype._updateScrollRequest=function(t){for(var e=t.item,i=zt(e),s=R(i.targets)?i.targets(e):i.targets,r=s&&s.length||0,n=i.threshold,o=i.safeZone,a=this._getItemHandleRect(e,i.handle,$i),l=Ui,h=null,d=null,v=!1,E=null,y=null,w=null,u=null,c=null,m=null,f=0;f<r;f++)if(h=s[f],d=Bi(h.element||h),d===t.element){if(v=!!(N&t.direction),v){if(h.axis===F)continue}else if(h.axis===N)continue;if(c=v?Vi(d):Wi(d),c<=0||(l=Gi(d,l),E=Qt(a,l),E<=0)||(y=ye(typeof h.threshold=="number"?h.threshold:n,o,v?a.width:a.height,v?l.width:l.height),t.direction===Ct?w=a.left-(l.left-y.offset):t.direction===Pt?w=l.right+y.offset-a.right:t.direction===Ot?w=a.top-(l.top-y.offset):w=l.bottom+y.offset-a.bottom,w>y.value)||(u=v?Mt(d):Nt(d),m=At&t.direction?u>=c:u<=0,m))break;return t.maxValue=c,t.threshold=y.value,t.distance=w,t.isEnding=!1,!0}return i.smoothStop===!0&&t.speed>0?(m===null&&(m=t.hasReachedEnd()),t.isEnding=!m):t.isEnding=!1,t.isEnding};C.prototype._updateRequests=function(){for(var t=this._items,e=this._requests[N],i=this._requests[F],s,r,n,o,a,l,h,d=0;d<t.length;d++)s=t[d],o=this._requestOverlapCheck[s._id],a=o>0&&this._tickTime-o>this._overlapCheckInterval,l=!0,r=e[s._id],r&&r.isActive&&(l=!this._updateScrollRequest(r),l&&(a=!0,this._cancelItemScroll(s,N))),h=!0,n=i[s._id],n&&n.isActive&&(h=!this._updateScrollRequest(n),h&&(a=!0,this._cancelItemScroll(s,F))),a&&(this._requestOverlapCheck[s._id]=0,this._checkItemOverlap(s,l,h))};C.prototype._requestAction=function(t,e){for(var i=this._actions,s=e===N,r=null,n=0;n<i.length;n++){if(r=i[n],t.element!==r.element){r=null;continue}if(s?r.requestX:r.requestY){this._cancelItemScroll(t.item,e);return}break}r||(r=this._actionPool.pick()),r.element=t.element,r.addRequest(t),t.tick(this._tickDeltaTime),i.push(r)};C.prototype._updateActions=function(){var t=this._items,e=this._requests,i=this._actions,s,r,n,o;for(o=0;o<t.length;o++)s=t[o]._id,r=e[N][s],n=e[F][s],r&&this._requestAction(r,N),n&&this._requestAction(n,F);for(o=0;o<i.length;o++)i[o].computeScrollValues()};C.prototype._applyActions=function(){var t=this._actions,e=this._items,i;if(t.length){for(i=0;i<t.length;i++)t[i].scroll(),this._actionPool.release(t[i]);for(t.length=0,i=0;i<e.length;i++)nr(e[i]);for(i=0;i<e.length;i++)or(e[i])}};C.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],s=t._drag._left,r=t._drag._top;if(e.length){var n=e[0],o=e[1];i[0]=s>n?Pt:s<n?Ct:i[0]||0,i[1]=r>o?Zt:r<o?Ot:i[1]||0}e[0]=s,e[1]=r};C.prototype.addItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);e===-1&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())}};C.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))};C.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(e!==-1){var i=t._id,s=this._requests[N][i];s&&(this._cancelItemScroll(t,N),delete this._requests[N][i]);var r=this._requests[F][i];r&&(this._cancelItemScroll(t,F),delete this._requests[F][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}};C.prototype.isItemScrollingX=function(t){var e=this._requests[N][t._id];return!!(e&&e.isActive)};C.prototype.isItemScrollingY=function(t){var e=this._requests[F][t._id];return!!(e&&e.isActive)};C.prototype.isItemScrolling=function(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)};C.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var yt=window.Element.prototype,hr=yt.matches||yt.matchesSelector||yt.webkitMatchesSelector||yt.mozMatchesSelector||yt.msMatchesSelector||yt.oMatchesSelector||function(){return!1};function ae(t,e){return hr.call(t,e)}function $(t,e){e&&(t.classList?t.classList.add(e):ae(t,"."+e)||(t.className+=" "+e))}var je=[],cr="number";function Re(t,e,i){var s=typeof i===cr?i:-1;s<0&&(s=t.length-s+1),t.splice.apply(t,je.concat(s,0,e)),je.length=0}function Tt(t,e,i){var s=Math.max(0,t.length-1+(i||0));return e>s?s:e<0?Math.max(s+e+1,0):e}function ji(t,e,i){if(!(t.length<2)){var s=Tt(t,e),r=Tt(t,i);s!==r&&t.splice(r,0,t.splice(s,1)[0])}}function Zi(t,e,i){if(!(t.length<2)){var s=Tt(t,e),r=Tt(t,i),n;s!==r&&(n=t[s],t[s]=t[r],t[r]=n)}}var tt=se(document.documentElement.style,"transform")||"transform",dr=/([A-Z])/g,ur=/^(webkit-|moz-|ms-|o-)/,fr=/^(-m-s-)/;function Se(t){var e=t.replace(dr,"-$1").toLowerCase();return e=e.replace(ur,"-$1"),e=e.replace(fr,"-ms-"),e}var Qi=Se(tt),_r="none",vr="inline",pr="none",mr="display";function gr(t){var e=G(t,Qi);if(!e||e===_r)return!1;var i=G(t,mr);return!(i===vr||i===pr)}function Ee(t){for(var e=document,i=t||e;i&&i!==e&&G(i,"position")==="static"&&!gr(i);)i=i.parentElement||e;return i}var fe={},_e={},_t={};function Ze(t,e){var i=e||{},s;return i.left=0,i.top=0,t===document||(i.left=window.pageXOffset||0,i.top=window.pageYOffset||0,t.self===window.self)||(s=t.getBoundingClientRect(),i.left+=s.left,i.top+=s.top,i.left+=U(t,"border-left-width"),i.top+=U(t,"border-top-width")),i}function It(t,e,i){return _t.left=0,_t.top=0,t===e||i&&(t=Ee(t),e=Ee(e),t===e)||(Ze(t,fe),Ze(e,_e),_t.left=_e.left-fe.left,_t.top=_e.top-fe.top),_t}function ve(t){return t==="auto"||t==="scroll"||t==="overlay"}function yr(t){return ve(G(t,"overflow"))||ve(G(t,"overflow-x"))||ve(G(t,"overflow-y"))}function Qe(t,e){for(e=e||[];t&&t!==document;){if(t.getRootNode&&t instanceof DocumentFragment){t=t.getRootNode().host;continue}yr(t)&&e.push(t),t=t.parentNode}return e.push(window),e}var St={},Sr="none",Er=/^matrix3d/,wr=/([^,]*,){4}/,br=/([^,]*,){12}/,Tr=/[^,]*,/;function it(t){St.x=0,St.y=0;var e=G(t,Qi);if(!e||e===Sr)return St;var i=Er.test(e),s=e.replace(i?br:wr,""),r=s.replace(Tr,"");return St.x=parseFloat(s)||0,St.y=parseFloat(r)||0,St}function q(t,e){e&&(t.classList?t.classList.remove(e):ae(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()))}var Ir=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,Kt=0,we=1,Jt=2,Ki=pi()?{passive:!0}:!1;function I(t){var e=t._element,i=t.getGrid(),s=i._settings;this._item=t,this._gridId=i._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=R(s.dragStartPredicate)?s.dragStartPredicate:I.defaultStartPredicate,this._startPredicateState=Kt,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=s.dragHandle&&e.querySelector(s.dragHandle)||e,this._dragger=new _(this._handle,s.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}I.autoScroller=new C;I.defaultStartPredicate=function(t,e,i){var s=t._drag;if(e.isFirst&&e.srcEvent.button||!Ir&&e.isFirst&&e.srcEvent.isTrusted===!0&&e.srcEvent.defaultPrevented===!1&&e.srcEvent.cancelable===!1)return!1;if(e.isFinal){s._finishStartPredicate(e);return}var r=s._startPredicateData;if(!r){var n=i||s._getGrid()._settings.dragStartPredicate||{};s._startPredicateData=r={distance:Math.max(n.distance,0)||0,delay:Math.max(n.delay,0)||0}}return r.delay&&(r.event=e,r.delayTimer||(r.delayTimer=window.setTimeout(function(){r.delay=0,s._resolveStartPredicate(r.event)&&(s._forceResolveStartPredicate(r.event),s._resetStartPredicate())},r.delay))),s._resolveStartPredicate(e)};I.defaultSortPredicate=function(){var t={},e={},i={},s=[],r=1,n=100;function o(a,l,h){var d=null,v=l._settings.dragSort,E=-1,y,w,u,c,m,f,g,p,T,x;if(v===!0?(s[0]=l,w=s):R(v)&&(w=v.call(l,a)),!w||!Array.isArray(w)||!w.length)return d;for(x=0;x<w.length;x++)if(u=w[x],!u._isDestroyed){for(u._updateBoundingRect(),f=Math.max(0,u._left),g=Math.max(0,u._top),p=Math.min(window.innerWidth,u._right),T=Math.min(window.innerHeight,u._bottom),c=u._element.parentNode;c&&c!==document&&c!==document.documentElement&&c!==document.body;){if(c.getRootNode&&c instanceof DocumentFragment){c=c.getRootNode().host;continue}if(G(c,"overflow")!=="visible"&&(m=c.getBoundingClientRect(),f=Math.max(f,m.left),g=Math.max(g,m.top),p=Math.min(p,m.right),T=Math.min(T,m.bottom)),G(c,"position")==="fixed")break;c=c.parentNode}f>=p||g>=T||(e.left=f,e.top=g,e.width=p-f,e.height=T-g,y=Qt(t,e),y>h&&y>E&&(E=y,d=u))}return s.length=0,d}return function(a,l){var h=a._drag,d=h._getGrid(),v=l&&typeof l.threshold=="number"?l.threshold:50,E=l&&l.action===J?J:mt,y=l&&l.migrateAction===J?J:mt;v=Math.min(Math.max(v,r),n),t.width=a._width,t.height=a._height,t.left=h._clientX,t.top=h._clientY;var w=o(a,d,v);if(!w)return null;var u=a.getGrid()!==w,c=0,m=0,f=0,g=-1,p=!1,T,x,O;for(w===d?(t.left=h._gridX+a._marginLeft,t.top=h._gridY+a._marginTop):(w._updateBorders(1,0,1,0),c=w._left+w._borderLeft,m=w._top+w._borderTop),O=0;O<w._items.length;O++)T=w._items[O],!(!T._isActive||T===a)&&(p=!0,e.width=T._width,e.height=T._height,e.left=T._left+T._marginLeft+c,e.top=T._top+T._marginTop+m,x=Qt(t,e),x>f&&(g=O,f=x));return u&&f<v&&(g=p?g:0,f=v),f>=v?(i.grid=w,i.index=g,i.action=u?y:E,i):null}}();I.prototype.stop=function(){if(this._isActive){if(this._isMigrating){this._finishMigration();return}var t=this._item,e=t._id;if(I.autoScroller.removeItem(t),zi(e),Fi(e),Hi(e),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var i=t._element,s=this._getGrid(),r=s._settings.itemDraggingClass;i.parentNode!==s._element&&(s._element.appendChild(i),t._setTranslate(this._gridX,this._gridY),r&&i.clientWidth),q(i,r)}this._reset()}};I.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(t===!0?this._handleSort():oe(e._id,this._handleSort))};I.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),I.autoScroller.removeItem(this._item),this._isDestroyed=!0)};I.prototype._getGrid=function(){return ee[this._gridId]||null};I.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0};I.prototype._bindScrollListeners=function(){var t=this._getGrid()._element,e=this._container,i=this._scrollers,s,r;if(i.length=0,Qe(this._item._element.parentNode,i),e!==t)for(s=[],Qe(t,s),r=0;r<s.length;r++)i.indexOf(s[r])<0&&i.push(s[r]);for(r=0;r<i.length;r++)i[r].addEventListener("scroll",this._onScroll,Ki)};I.prototype._unbindScrollListeners=function(){var t=this._scrollers,e;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,Ki);t.length=0};I.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0};I.prototype._forceResolveStartPredicate=function(t){!this._isDestroyed&&this._startPredicateState===we&&(this._startPredicateState=Jt,this._onStart(t))};I.prototype._finishStartPredicate=function(t){var e=this._item._element,i=Math.abs(t.deltaX)<2&&Math.abs(t.deltaY)<2&&t.deltaTime<200;this._resetStartPredicate(),i&&Dr(e)};I.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e};I.prototype._checkHeuristics=function(t,e){var i=this._getGrid()._settings.dragSortHeuristics,s=i.minDragDistance;if(s<=0)return this._blockedSortIndex=null,!0;var r=t-this._sortX2,n=e-this._sortY2,o=s>3&&i.minBounceBackAngle>0;if(o||(this._blockedSortIndex=null),Math.abs(r)>s||Math.abs(n)>s){if(o){var a=Math.atan2(r,n),l=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),h=Math.atan2(Math.sin(a-l),Math.cos(a-l));Math.abs(h)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1};I.prototype._resetStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)};I.prototype._handleSort=function(){if(this._isActive){var t=this._getGrid()._settings;if(!t.dragSort||!t.dragAutoScroll.sortDuringScroll&&I.autoScroller.isItemScrolling(this._item)){this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer));return}var e=this._checkHeuristics(this._gridX,this._gridY);if(!(!this._isSortNeeded&&!e)){var i=t.dragSortHeuristics.sortInterval;i<=0||this._isSortNeeded?(this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):this._sortTimer===void 0&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,i))}}};I.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,oe(this._item._id,this._handleSort)};I.prototype._cancelSort=function(){this._isSortNeeded=!1,this._sortTimer!==void 0&&(this._sortTimer=window.clearTimeout(this._sortTimer)),Zs(this._item._id)};I.prototype._finishSort=function(){var t=this._getGrid()._settings.dragSort,e=t&&(this._isSortNeeded||this._sortTimer!==void 0);this._cancelSort(),e&&this._checkOverlap()};I.prototype._checkOverlap=function(){if(this._isActive){var t=this._item,e=this._getGrid()._settings,i,s,r,n,o,a,l,h;R(e.dragSortPredicate)?i=e.dragSortPredicate(t,this._dragMoveEvent):i=I.defaultSortPredicate(t,e.dragSortPredicate),!(!i||typeof i.index!="number")&&(l=i.action===J?J:mt,s=t.getGrid(),n=i.grid||s,h=s!==n,r=s._items.indexOf(t),o=Tt(n._items,i.index,h&&l===mt?1:0),!(!h&&o===this._blockedSortIndex)&&(h?(this._blockedSortIndex=null,a=n._items[o],s._hasListeners(ct)&&s._emit(ct,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),n._hasListeners(jt)&&n._emit(jt,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),t._gridId=n._id,this._isMigrating=t._gridId!==this._gridId,s._items.splice(r,1),Re(n._items,t,o),t._sortData=null,s._hasListeners($t)&&s._emit($t,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),n._hasListeners(Ut)&&n._emit(Ut,{item:t,fromGrid:s,fromIndex:r,toGrid:n,toIndex:o}),l===J&&a&&a.isActive()&&n._items.indexOf(a)>-1&&n.send(a,s,r,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),s.layout(),n.layout()):r!==o&&(this._blockedSortIndex=r,(l===J?Zi:ji)(s._items,r,o),s._hasListeners(Gt)&&s._emit(Gt,{item:t,fromIndex:r,toIndex:o,action:l}),s.layout())))}};I.prototype._finishMigration=function(){var t=this._item,e=t._dragRelease,i=t._element,s=t._isActive,r=t.getGrid(),n=r._element,o=r._settings,a=o.dragContainer||n,l=this._getGrid()._settings,h=i.parentNode,d=s?l.itemVisibleClass:l.itemHiddenClass,v=s?o.itemVisibleClass:o.itemHiddenClass,E,y;this._isMigrating=!1,this.destroy(),l.itemClass!==o.itemClass&&(q(i,l.itemClass),$(i,o.itemClass)),d!==v&&(q(i,d),$(i,v)),a!==h&&(a.appendChild(i),y=It(h,a,!0),E=it(i),E.x-=y.left,E.y-=y.top),t._refreshDimensions(),y=It(a,n,!0),e._containerDiffX=y.left,e._containerDiffY=y.top,t._drag=o.dragEnabled?new I(t):null,a!==h&&t._setTranslate(E.x,E.y),t._visibility.setStyles(s?o.visibleStyles:o.hiddenStyles),e.start()};I.prototype._preStartCheck=function(t){this._startPredicateState===Kt&&(this._startPredicateState=we),this._startPredicateState===we?(this._startPredicateResult=this._startPredicate(this._item,t),this._startPredicateResult===!0?(this._startPredicateState=Jt,this._onStart(t)):this._startPredicateResult===!1&&(this._resetStartPredicate(t),this._dragger._reset(),this._startPredicateState=Kt)):this._startPredicateState===Jt&&this._isActive&&this._onMove(t)};I.prototype._preEndCheck=function(t){var e=this._startPredicateState===Jt;this._startPredicate(this._item,t),this._startPredicateState=Kt,!(!e||!this._isActive)&&(this._isStarted?this._onEnd(t):this.stop())};I.prototype._onStart=function(t){var e=this._item;e._isActive&&(this._isActive=!0,this._dragStartEvent=t,I.autoScroller.addItem(e),$s(e._id,this._prepareStart,this._applyStart))};I.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._settings,r=i._element,n=s.dragContainer||r,o=Ee(n),a=it(e),l=e.getBoundingClientRect(),h=n!==r;if(this._container=n,this._containingBlock=o,this._clientX=l.left,this._clientY=l.top,this._left=this._gridX=a.x,this._top=this._gridY=a.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),h){var d=It(o,r);this._containerDiffX=d.left,this._containerDiffY=d.top}}}};I.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid(),i=t._element,s=t._dragRelease,r=t._migrate,n=this._container!==e._element;t.isPositioning()&&t._layout.stop(!0,this._left,this._top),r._isActive&&(this._left-=r._containerDiffX,this._top-=r._containerDiffY,this._gridX-=r._containerDiffX,this._gridY-=r._containerDiffY,r.stop(!0,this._left,this._top)),t.isReleasing()&&s._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit(Ls,t,this._dragStartEvent),n&&(i.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._left,this._top))),$(i,e._settings.itemDraggingClass),this._bindScrollListeners(),e._emit(xs,t,this._dragStartEvent)}}};I.prototype._onMove=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._dragMoveEvent=t,Us(e._id,this._prepareMove,this._applyMove),oe(e._id,this._handleSort)};I.prototype._prepareMove=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid()._settings,i=e.dragAxis,s=this._dragMoveEvent,r=this._dragPrevMoveEvent||this._dragStartEvent||s;if(i!=="y"){var n=s.clientX-r.clientX;this._left=this._left-this._moveDiffX+n,this._gridX=this._gridX-this._moveDiffX+n,this._clientX=this._clientX-this._moveDiffX+n,this._moveDiffX=n}if(i!=="x"){var o=s.clientY-r.clientY;this._top=this._top-this._moveDiffY+o,this._gridY=this._gridY-this._moveDiffY+o,this._clientY=this._clientY-this._moveDiffY+o,this._moveDiffY=o}this._dragPrevMoveEvent=s}}};I.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(ks,t,this._dragMoveEvent),I.autoScroller.updateItem(t))}};I.prototype._onScroll=function(t){var e=this._item;if(!e._isActive){this.stop();return}this._scrollEvent=t,js(e._id,this._prepareScroll,this._applyScroll),oe(e._id,this._handleSort)};I.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),s=i._element,r=e.getBoundingClientRect();if(this._container!==s){var n=It(this._containingBlock,s);this._containerDiffX=n.left,this._containerDiffY=n.top}var o=this._clientX-this._moveDiffX-r.left;this._left=this._left-this._scrollDiffX+o,this._scrollDiffX=o;var a=this._clientY-this._moveDiffY-r.top;this._top=this._top-this._scrollDiffY+a,this._scrollDiffY=a,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}};I.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit(Cs,t,this._scrollEvent))}};I.prototype._onEnd=function(t){var e=this._item,i=e._element,s=this._getGrid(),r=s._settings,n=e._dragRelease;if(!e._isActive){this.stop();return}zi(e._id),Fi(e._id),Hi(e._id),this._finishSort(),this._unbindScrollListeners(),n._containerDiffX=this._containerDiffX,n._containerDiffY=this._containerDiffY,this._reset(),q(i,r.itemDraggingClass),I.autoScroller.removeItem(e),s._emit(Ps,e,t),this._isMigrating?this._finishMigration():n.start()};function Dr(t){if(t.tagName.toLowerCase()==="a"){var e=t.getAttribute("href");if(e){var i=t.getAttribute("target");i&&i!=="_self"?window.open(e,i):window.location.href=e}}}function Ji(t,e){var i={},s,r;if(Array.isArray(e))for(r=0;r<e.length;r++)s=e[r],i[s]=G(t,Se(s));else for(s in e)i[s]=G(t,Se(s));return i}var Ar=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,Ke={};function Rr(t){var e=Ke[t];return e||(e=t.replace(Ar,""),e!==t&&(e=e[0].toLowerCase()+e.slice(1)),Ke[t]=e,e)}var Lr="[native code]";function xr(t){var e=window.Symbol;return!!(t&&R(e)&&R(e.toString)&&e(t).toString().indexOf(Lr)>-1)}function Dt(t,e){for(var i in e)t.style[i]=e[i]}var kr=!!(Element&&R(Element.prototype.animate)),Je=!!(Element&&xr(Element.prototype.animate));function et(t){this._element=t,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}et.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._element,r=i||{};if(!kr){Dt(s,e),this._callback=R(r.onFinish)?r.onFinish:null,this._onFinish();return}var n=this._animation,o=this._props,a=this._values,l=r.duration||300,h=r.easing||"ease",d=!1,v,E,y;if(n&&(E=0,(l!==this._duration||h!==this._easing)&&(d=!0),!d)){for(v in e)if(++E,y=o.indexOf(v),y===-1||e[v]!==a[y]){d=!0;break}E!==o.length&&(d=!0)}if(d&&n.cancel(),this._callback=R(r.onFinish)?r.onFinish:null,!(n&&!d)){o.length=a.length=0;for(v in e)o.push(v),a.push(e[v]);this._duration=l,this._easing=h,this._animation=s.animate([ti(t,Je),ti(e,Je)],{duration:l,easing:h}),this._animation.onfinish=this._onFinish,Dt(s,e)}}};et.prototype.stop=function(){this._isDestroyed||!this._animation||(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)};et.prototype.getCurrentStyles=function(){return Ji(element,currentProps)};et.prototype.isAnimating=function(){return!!this._animation};et.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)};et.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,t&&t()};function ti(t,e){var i={};for(var s in t)i[e?s:Rr(s)]=t[s];return i}function lt(t,e){return"translateX("+t+"px) translateY("+e+"px)"}function W(t){this._item=t,this._animation=new et,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}W.prototype._updateDimensions=function(){this.isActive()&&Dt(this._element,{width:this._item._width+"px",height:this._item._height+"px"})};W.prototype._onLayoutStart=function(t,e){var i=this._item;if(t.indexOf(i)===-1){this.reset();return}var s=i._left,r=i._top,n=this._left,o=this._top;if(this._left=s,this._top=r,!(!e&&!this._didMigrate&&n===s&&o===r)){var a=s+i._marginLeft,l=r+i._marginTop,h=i.getGrid(),d=!e&&h._settings.layoutDuration>0;if(!d||this._didMigrate){Xi(i._id),this._element.style[tt]=lt(a,l),this._animation.stop(),this._didMigrate&&(h.getElement().appendChild(this._element),this._didMigrate=!1);return}this._nextTransX=a,this._nextTransY=l,Qs(i._id,this._setupAnimation,this._startAnimation)}};W.prototype._setupAnimation=function(){if(this.isActive()){var t=it(this._element);this._transX=t.x,this._transY=t.y}};W.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,s=this._nextTransX,r=this._nextTransY;if(e===s&&i===r){t.isAnimating()&&(this._element.style[tt]=lt(s,r),t.stop());return}var n=this._item.getGrid()._settings,o={},a={};o[tt]=lt(e,i),a[tt]=lt(s,r),t.start(o,a,{duration:n.layoutDuration,easing:n.layoutEasing,onFinish:this._onLayoutEnd})}};W.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()};W.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating()){this.reset();return}this._resetAfterLayout=!0}};W.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(kt,this._onReleaseEnd),e.off(ht,this._onLayoutStart),e.off(ct,this._onMigrate),e.off(xt,this._onHide),i.on(kt,this._onReleaseEnd),i.on(ht,this._onLayoutStart),i.on(ct,this._onMigrate),i.on(xt,this._onHide),this._didMigrate=!0}};W.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()};W.prototype.create=function(){if(this.isActive()){this._resetAfterLayout=!1;return}var t=this._item,e=t.getGrid(),i=e._settings,s=this._animation;this._left=t._left,this._top=t._top;var r;R(i.dragPlaceholder.createElement)?r=i.dragPlaceholder.createElement(t):r=document.createElement("div"),this._element=r,s._element=r,this._className=i.itemPlaceholderClass||"",this._className&&$(r,this._className),Dt(r,{position:"absolute",left:"0px",top:"0px",width:t._width+"px",height:t._height+"px"}),r.style[tt]=lt(t._left+t._marginLeft,t._top+t._marginTop),e.on(ht,this._onLayoutStart),e.on(kt,this._onReleaseEnd),e.on(ct,this._onMigrate),e.on(xt,this._onHide),R(i.dragPlaceholder.onCreate)&&i.dragPlaceholder.onCreate(t,r),e.getElement().appendChild(r)};W.prototype.reset=function(){if(this.isActive()){var t=this._element,e=this._item,i=e.getGrid(),s=i._settings,r=this._animation;this._resetAfterLayout=!1,Xi(e._id),Js(e._id),r.stop(),r._element=null,i.off(kt,this._onReleaseEnd),i.off(ht,this._onLayoutStart),i.off(ct,this._onMigrate),i.off(xt,this._onHide),this._className&&(q(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,R(s.dragPlaceholder.onRemove)&&s.dragPlaceholder.onRemove(e,t)}};W.prototype.isActive=function(){return!!this._element};W.prototype.getElement=function(){return this._element};W.prototype.updateDimensions=function(){this.isActive()&&Ks(this._item._id,this._updateDimensions)};W.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null};function ft(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}ft.prototype.start=function(){if(!(this._isDestroyed||this._isActive)){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,$(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer||this._placeToGrid(),e._emit(Os,t),e._nextLayoutData||t._layout.start(!1)}};ft.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item,r=s.getGrid();!t&&(e===void 0||i===void 0)&&(e=s._left,i=s._top);var n=this._placeToGrid(e,i);this._reset(n),t||r._emit(kt,s)}};ft.prototype.isJustReleased=function(){return this._isActive&&this._isPositioningStarted===!1};ft.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};ft.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=i.getGrid()._element,n=!1;if(s.parentNode!==r){if(t===void 0||e===void 0){var o=it(s);t=o.x-this._containerDiffX,e=o.y-this._containerDiffY}r.appendChild(s),i._setTranslate(t,e),n=!0}return this._containerDiffX=0,this._containerDiffY=0,n}};ft.prototype._reset=function(t){if(!this._isDestroyed){var e=this._item,i=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,i&&(t&&e._element.clientWidth,q(e._element,i))}};var ei=2;function rt(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},i.left="0px",i.top="0px",t._setTranslate(0,0),this._animation=new et(e),this._queue="layout-"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}rt.prototype.start=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._dragRelease,r=i.getGrid()._settings,n=this._isActive,o=s.isJustReleased(),a=o?r.dragRelease.duration:r.layoutDuration,l=o?r.dragRelease.easing:r.layoutEasing,h=!t&&!this._skipNextAnimation&&a>0;if(n&&(Ni(i._id),i._emitter.burst(this._queue,!0,i)),o&&(s._isPositioningStarted=!0),R(e)&&i._emitter.on(this._queue,e),this._skipNextAnimation=!1,!h){this._updateOffsets(),i._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=l,this._animOptions.duration=a,this._isInterrupted=n,Ws(i._id,this._setupAnimation,this._startAnimation)}};rt.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item;if(Ni(s._id),this._animation.isAnimating()){if(e===void 0||i===void 0){var r=it(s._element);e=r.x,i=r.y}s._setTranslate(e,i),this._animation.stop()}q(s._element,s.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&s._emitter.burst(this._queue,!0,s)}};rt.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[tt]="",t.left="",t.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}};rt.prototype._updateOffsets=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;this._offsetLeft=i._isActive?i._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=i._isActive?i._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}};rt.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._tX=this._nextLeft,t._tY=this._nextTop,this._isActive&&(this._isActive=!1,q(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}};rt.prototype._setupAnimation=function(){var t=this._item;if(t._tX===void 0||t._tY===void 0){var e=it(t._element);t._tX=e.x,t._tY=e.y}};rt.prototype._startAnimation=function(){var t=this._item,e=t.getGrid()._settings,i=this._animOptions.duration<=0;this._updateOffsets();var s=Math.abs(t._left-(t._tX-this._offsetLeft)),r=Math.abs(t._top-(t._tY-this._offsetTop));if(i||s<ei&&r<ei){(s||r||this._isInterrupted)&&t._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),this._finish();return}this._isInterrupted||$(t._element,e.itemPositioningClass),this._currentStyles[tt]=lt(t._tX,t._tY),this._targetStyles[tt]=lt(this._nextLeft,this._nextTop),t._tX=t._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)};function Ft(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}Ft.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._item,r=s._element,n=s.isActive(),o=s.isVisible(),a=s.getGrid(),l=a._settings,h=t._settings,d=t._element,v=t._items,E=a._items.indexOf(s),y=i||document.body,w,u,c,m,f,g,p,T,x,O;if(typeof e=="number")w=Tt(v,e,1);else{if(u=t.getItem(e),!u)return;w=v.indexOf(u)}(s.isPositioning()||this._isActive||s.isReleasing())&&(g=it(r),p=g.x,T=g.y),s.isPositioning()&&s._layout.stop(!0,p,T),this._isActive&&(p-=this._containerDiffX,T-=this._containerDiffY,this.stop(!0,p,T)),s.isReleasing()&&(p-=s._dragRelease._containerDiffX,T-=s._dragRelease._containerDiffY,s._dragRelease.stop(!0,p,T)),s._visibility.stop(!0),s._drag&&s._drag.destroy(),a._hasListeners(ct)&&a._emit(ct,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w}),t._hasListeners(jt)&&t._emit(jt,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w}),l.itemClass!==h.itemClass&&(q(r,l.itemClass),$(r,h.itemClass)),x=o?l.itemVisibleClass:l.itemHiddenClass,O=o?h.itemVisibleClass:h.itemHiddenClass,x!==O&&(q(r,x),$(r,O)),a._items.splice(E,1),Re(v,s,w),s._gridId=t._id,n?(c=r.parentNode,y!==c&&(y.appendChild(r),m=It(y,c,!0),g||(g=it(r),p=g.x,T=g.y),s._setTranslate(p+m.left,T+m.top))):d.appendChild(r),s._visibility.setStyles(o?h.visibleStyles:h.hiddenStyles),n&&(f=It(y,d,!0)),s._refreshDimensions(),s._sortData=null,s._drag=h.dragEnabled?new I(s):null,n?(this._isActive=!0,this._container=y,this._containerDiffX=f.left,this._containerDiffY=f.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),a._hasListeners($t)&&a._emit($t,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w}),t._hasListeners(Ut)&&t._emit(Ut,{item:s,fromGrid:a,fromIndex:E,toGrid:t,toIndex:w})}};Ft.prototype.stop=function(t,e,i){if(!(this._isDestroyed||!this._isActive)){var s=this._item,r=s._element,n=s.getGrid(),o=n._element,a;this._container!==o&&((e===void 0||i===void 0)&&(t?(a=it(r),e=a.x-this._containerDiffX,i=a.y-this._containerDiffY):(e=s._left,i=s._top)),o.appendChild(r),s._setTranslate(e,i)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}};Ft.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)};function K(t){var e=t._isActive,i=t._element,s=i.children[0],r=t.getGrid()._settings;if(!s)throw new Error("No valid child element found within item element.");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=s,this._currentStyleProps=[],this._animation=new et(s),this._queue="visibility-"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?"":"none",$(i,e?r.itemVisibleClass:r.itemHiddenClass),this.setStyles(e?r.visibleStyles:r.hiddenStyles)}K.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=R(e)?e:null,n=i.getGrid(),o=n._settings;if(!this._isShowing&&!this._isHidden){r&&r(!1,i);return}if(this._isShowing&&!t){r&&i._emitter.on(this._queue,r);return}this._isShowing||(i._emitter.burst(this._queue,!0,i),q(s,o.itemHiddenClass),$(s,o.itemVisibleClass),this._isHiding||(s.style.display="")),r&&i._emitter.on(this._queue,r),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)}};K.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,r=R(e)?e:null,n=i.getGrid(),o=n._settings;if(!this._isHiding&&this._isHidden){r&&r(!1,i);return}if(this._isHiding&&!t){r&&i._emitter.on(this._queue,r);return}this._isHiding||(i._emitter.burst(this._queue,!0,i),$(s,o.itemHiddenClass),q(s,o.itemVisibleClass)),r&&i._emitter.on(this._queue,r),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)}};K.prototype.stop=function(t){if(!this._isDestroyed&&!(!this._isHiding&&!this._isShowing)){var e=this._item;Yi(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}};K.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;this._removeCurrentStyles();for(var s in t)i.push(s),e.style[s]=t[s]};K.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid(),s=i._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),q(e,s.itemVisibleClass),q(e,s.itemHiddenClass),e.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}};K.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var s=this._item,r=this._animation,n=this._childElement,o=s.getGrid()._settings,a=t?o.visibleStyles:o.hiddenStyles,l=t?o.showDuration:o.hideDuration,h=t?o.showEasing:o.hideEasing,d=e||l<=0,v;if(!a){i&&i();return}if(Yi(s._id),d){Dt(n,a),r.stop(),i&&i();return}r.isAnimating()&&(r._animation.onfinish=null),Gs(s._id,function(){v=Ji(n,a)},function(){r.start(v,a,{duration:l,easing:h,onFinish:i})})}};K.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))};K.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display="none",t._emitter.burst(this._queue,!1,t)}};K.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;i++)t.style[e[i]]="";e.length=0};var Cr=0;function ts(){return++Cr}function M(t,e,i){var s=t._settings;if(vt){if(vt.has(e))throw new Error("You can only create one Muuri Item per element!");vt.set(e,this)}this._id=ts(),this._gridId=t._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new j,e.parentNode!==t._element&&t._element.appendChild(e),$(e,s.itemClass),typeof i!="boolean"&&(i=G(e,"display")!=="none"),this._isActive=i,this._visibility=new K(this),this._layout=new rt(this),this._migrate=new Ft(this),this._drag=s.dragEnabled?new I(this):null,this._dragRelease=new ft(this),this._dragPlaceholder=new W(this)}M.prototype.getGrid=function(){return ee[this._gridId]};M.prototype.getElement=function(){return this._element};M.prototype.getWidth=function(){return this._width};M.prototype.getHeight=function(){return this._height};M.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}};M.prototype.getPosition=function(){return{left:this._left,top:this._top}};M.prototype.isActive=function(){return this._isActive};M.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden};M.prototype.isShowing=function(){return!!(this._visibility&&this._visibility._isShowing)};M.prototype.isHiding=function(){return!!(this._visibility&&this._visibility._isHiding)};M.prototype.isPositioning=function(){return!!(this._layout&&this._layout._isActive)};M.prototype.isDragging=function(){return!!(this._drag&&this._drag._isActive)};M.prototype.isReleasing=function(){return!!(this._dragRelease&&this._dragRelease._isActive)};M.prototype.isDestroyed=function(){return this._isDestroyed};M.prototype._refreshDimensions=function(t){if(!this._isDestroyed&&!(t!==!0&&this._visibility._isHidden)){var e=this._element,i=this._dragPlaceholder,s=e.getBoundingClientRect();this._width=s.width,this._height=s.height,this._marginLeft=Math.max(0,U(e,"margin-left")),this._marginRight=Math.max(0,U(e,"margin-right")),this._marginTop=Math.max(0,U(e,"margin-top")),this._marginBottom=Math.max(0,U(e,"margin-bottom")),i&&i.updateDimensions()}};M.prototype._refreshSortData=function(){if(!this._isDestroyed){var t=this._sortData={},e=this.getGrid()._settings.sortData,i;for(i in e)t[i]=e[i](this,this._element)}};M.prototype._addToLayout=function(t,e){this._isActive!==!0&&(this._isActive=!0,this._left=t||0,this._top=e||0)};M.prototype._removeFromLayout=function(){this._isActive!==!1&&(this._isActive=!1,this._left=0,this._top=0)};M.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()};M.prototype._setTranslate=function(t,e){return this._tX===t&&this._tY===e?!1:(this._tX=t,this._tY=e,this._element.style[tt]=lt(t,e),!0)};M.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,i=this.getGrid(),s=i._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),q(e,s.itemClass),t&&e.parentNode.removeChild(e),vt&&vt.delete(e),this._isActive=!1,this._isDestroyed=!0}};function es(t){var e=1,i=2,s=4,r=8,n=16,o=.001,a=.5;function l(u){return((u*1e3+.5<<0)/10<<0)/100}function h(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(h.prototype.computeLayout=function(u,c){var m=u.items,f=u.slots,g=!!(c&e),p=!!(c&i),T=!!(c&s),x=!!(c&r),O=!!(c&n),P=typeof m[0]=="number",A,Z,Y,H,Q,X;if(!m.length)return u;for(Z=P?2:1,A=0;A<m.length;A+=Z)P?(H=m[A],Q=m[A+1]):(Y=m[A],H=Y._width+Y._marginLeft+Y._marginRight,Q=Y._height+Y._marginTop+Y._marginBottom),O&&(H=l(H),Q=l(Q)),X=this.computeNextSlot(u,H,Q,g,p),p?X.left+X.width>u.width&&(u.width=X.left+X.width):X.top+X.height>u.height&&(u.height=X.top+X.height),f[++this.slotIndex]=X.left,f[++this.slotIndex]=X.top,(T||x)&&this.slotSizes.push(X.width,X.height);if(T)for(A=0;A<f.length;A+=2)f[A]=u.width-(f[A]+this.slotSizes[A]);if(x)for(A=1;A<f.length;A+=2)f[A]=u.height-(f[A]+this.slotSizes[A]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,u},h.prototype.computeNextSlot=function(u,c,m,f,g){var p=this.slotData,T=this.currentRects,x=this.nextRects,O=!1,P,A,Z,Y,H;for(x.length=0,p.left=null,p.top=null,p.width=c,p.height=m,Y=0;Y<T.length;Y++)if(A=T[Y],!!A&&(P=this.getRect(A),p.width<=P.width+o&&p.height<=P.height+o)){p.left=P.left,p.top=P.top;break}if(p.left===null&&(g?(p.left=u.width,p.top=0):(p.left=0,p.top=u.height),f||(O=!0)),!g&&p.top+p.height>u.height+o&&(p.left>a&&x.push(this.addRect(0,u.height,p.left,1/0)),p.left+p.width<u.width-a&&x.push(this.addRect(p.left+p.width,u.height,u.width-p.left-p.width,1/0)),u.height=p.top+p.height),g&&p.left+p.width>u.width+o&&(p.top>a&&x.push(this.addRect(u.width,0,1/0,p.top)),p.top+p.height<u.height-a&&x.push(this.addRect(u.width,p.top+p.height,1/0,u.height-p.top-p.height)),u.width=p.left+p.width),!O){for(f&&(Y=0);Y<T.length;Y++)if(A=T[Y],!!A)for(P=this.getRect(A),Z=this.splitRect(P,p),H=0;H<Z.length;H++)A=Z[H],P=this.getRect(A),(g?P.left+o<u.width-o:P.top+o<u.height-o)&&x.push(A)}return x.length>1&&this.purgeRects(x).sort(g?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=x,this.nextRects=T,p},h.prototype.addRect=function(u,c,m,f){var g=++this.rectId;return this.rectStore[g]=u||0,this.rectStore[++this.rectId]=c||0,this.rectStore[++this.rectId]=m||0,this.rectStore[++this.rectId]=f||0,g},h.prototype.getRect=function(u,c){return c||(c=this.rectTarget),c.left=this.rectStore[u]||0,c.top=this.rectStore[++u]||0,c.width=this.rectStore[++u]||0,c.height=this.rectStore[++u]||0,c},h.prototype.splitRect=function(){var u=[],c=0,m=0;return function(f,g){return u.length=0,f.left+f.width<=g.left+o||g.left+g.width<=f.left+o||f.top+f.height<=g.top+o||g.top+g.height<=f.top+o?(u.push(this.addRect(f.left,f.top,f.width,f.height)),u):(c=g.left-f.left,c>=a&&u.push(this.addRect(f.left,f.top,c,f.height)),c=f.left+f.width-(g.left+g.width),c>=a&&u.push(this.addRect(g.left+g.width,f.top,c,f.height)),m=g.top-f.top,m>=a&&u.push(this.addRect(f.left,f.top,f.width,m)),m=f.top+f.height-(g.top+g.height),m>=a&&u.push(this.addRect(f.left,g.top+g.height,f.width,m)),u)}}(),h.prototype.isRectAWithinRectB=function(u,c){return u.left+o>=c.left&&u.top+o>=c.top&&u.left+u.width-o<=c.left+c.width&&u.top+u.height-o<=c.top+c.height},h.prototype.purgeRects=function(){var u={},c={};return function(m){for(var f=m.length,g;f--;)if(g=m.length,!!m[f]){for(this.getRect(m[f],u);g--;)if(!(!m[g]||f===g)&&(this.getRect(m[g],c),this.isRectAWithinRectB(u,c))){m[f]=0;break}}return m}}(),h.prototype.sortRectsTopLeft=function(){var u={},c={};return function(m,f){return this.getRect(m,u),this.getRect(f,c),u.top<c.top&&u.top+o<c.top?-1:u.top>c.top&&u.top-o>c.top?1:u.left<c.left&&u.left+o<c.left?-1:u.left>c.left&&u.left-o>c.left?1:0}}(),h.prototype.sortRectsLeftTop=function(){var u={},c={};return function(m,f){return this.getRect(m,u),this.getRect(f,c),u.left<c.left&&u.left+o<c.left?-1:u.left>c.left&&u.left-o<c.left?1:u.top<c.top&&u.top+o<c.top?-1:u.top>c.top&&u.top-o>c.top?1:0}}(),t){var d=1,v=2,E=3,y=4,w=new h;self.onmessage=function(u){var c=new Float32Array(u.data),m=c.subarray(y,c.length),f=new Float32Array(m.length),g=c[E],p={items:m,slots:f,width:c[d],height:c[v]};w.computeLayout(p,g),c[d]=p.width,c[v]=p.height,c.set(p.slots,y),postMessage(c.buffer,[c.buffer])}}return h}var ii=es(),wt=null,Wt=[];function Pr(t,e){var i=[];if(t>0){wt||(wt=URL.createObjectURL(new Blob(["("+es.toString()+")(true)"],{type:"application/javascript"})));for(var s=0,r;s<t;s++)r=new Worker(wt),e&&(r.onmessage=e),i.push(r),Wt.push(r)}return i}function Or(t){for(var e,i,s=0;s<t.length;s++)e=t[s],e.onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),i=Wt.indexOf(e),i>-1&&Wt.splice(i,1);wt&&!Wt.length&&(URL.revokeObjectURL(wt),wt=null)}function Mr(){return!!(window.Worker&&window.URL&&window.Blob)}var si=1,te=2,ri=4,ni=8,oi=16,is=0,ss=1,rs=2,Nr=3,be=4;function nt(t,e){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(e),t=typeof t=="number"?Math.max(0,t):0,t&&Mr())try{this._workers=Pr(t,this._onWorkerMessage)}catch(i){this._processor=new ii}else this._processor=new ii}nt.prototype._sendToWorker=function(){if(!(!this._layoutQueue.length||!this._workers.length)){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}};nt.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[is],s=this._layouts[i],r=this._layoutCallbacks[i],n=this._layoutWorkers[i];s&&delete this._layouts[i],r&&delete this._layoutCallbacks[i],n&&delete this._layoutWorkers[i],s&&r&&(s.width=e[ss],s.height=e[rs],s.slots=e.subarray(be,e.length),this._finalizeLayout(s),r(s)),n&&(this._workers.push(n),this._sendToWorker())};nt.prototype._finalizeLayout=function(t){var e=t._grid,i=t._settings&te,s=e._boxSizing==="border-box";return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(s?t.width+e._borderLeft+e._borderRight:t.width)+"px":t.styles.height=(s?t.height+e._borderTop+e._borderBottom:t.height)+"px",t};nt.prototype.setOptions=function(t){if(t){var e;typeof t.fillGaps=="boolean"?e=t.fillGaps?si:0:e=this._options&si;var i;typeof t.horizontal=="boolean"?i=t.horizontal?te:0:i=this._options&te;var s;typeof t.alignRight=="boolean"?s=t.alignRight?ri:0:s=this._options&ri;var r;typeof t.alignBottom=="boolean"?r=t.alignBottom?ni:0:r=this._options&ni;var n;typeof t.rounding=="boolean"?n=t.rounding?oi:0:n=this._options&oi,this._options=e|i|s|r|n}};nt.prototype.createLayout=function(t,e,i,s,r,n){if(this._layouts[e])throw new Error("A layout with the provided id is currently being processed.");var o=this._options&te,a={id:e,items:i,slots:null,width:o?0:s,height:o?r:0,_grid:t,_settings:this._options};if(!i.length){a.slots=[],this._finalizeLayout(a),n(a);return}if(this._processor){a.slots=window.Float32Array?new Float32Array(i.length*2):new Array(i.length*2),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),n(a);return}var l=new Float32Array(be+i.length*2);l[is]=e,l[ss]=a.width,l[rs]=a.height,l[Nr]=a._settings;var h,d,v;for(h=0,d=be-1,v;h<i.length;h++)v=i[h],l[++d]=v._width+v._marginLeft+v._marginRight,l[++d]=v._height+v._marginTop+v._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=n,this._layoutWorkerData[e]=l,this._sendToWorker(),this.cancelLayout.bind(this,e)};nt.prototype.cancelLayout=function(t){var e=this._layouts[t];if(e&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var i=this._layoutQueue.indexOf(t);i>-1&&this._layoutQueue.splice(i,1)}};nt.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);Or(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var Yr=0;function zr(t,e){var i=++Yr,s=0,r=0,n=!1,o=function(a){n||(r&&(s-=a-r),r=a,s>0?er(i,o):(s=r=0,t()))};return function(a){if(!n){if(e<=0){a!==!0&&t();return}if(a===!0){n=!0,s=r=0,o=void 0,ir(i);return}s<=0?(s=e,o(0)):s=e}}}var Fr="[object HTMLCollection]",Hr="[object NodeList]";function Le(t){var e=Object.prototype.toString.call(t);return e===Fr||e===Hr}var Xr="object",qr="[object Object]",Br=Object.prototype.toString;function ai(t){return typeof t===Xr&&Br.call(t)===qr}function Vr(){}function Wr(t){return Le(t)?Array.prototype.slice.call(t):Array.prototype.concat(t)}var ns="number",le="string",dt="instant",pe=0;function D(t,e){typeof t===le&&(t=document.querySelector(t));var i=t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t);if(!i||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var s=Gr(D.defaultOptions,e);s.visibleStyles=li(s.visibleStyles),s.hiddenStyles=li(s.hiddenStyles),R(s.dragSort)||(s.dragSort=!!s.dragSort),this._id=ts(),this._element=t,this._settings=s,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new j,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),ee[this._id]=this,$(t,s.containerClass),Ur(this,s.layoutOnResize),this.add($r(t,s.items),{layout:!1}),s.layoutOnInit&&this.layout(!0)}D.Item=M;D.ItemLayout=rt;D.ItemVisibility=K;D.ItemMigrate=Ft;D.ItemDrag=I;D.ItemDragRelease=ft;D.ItemDragPlaceholder=W;D.Emitter=j;D.Animator=et;D.Dragger=_;D.Packer=nt;D.AutoScroller=C;D.defaultPacker=new nt(2);D.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:mt,migrateAction:mt},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:C.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"};D.prototype.on=function(t,e){return this._emitter.on(t,e),this};D.prototype.off=function(t,e){return this._emitter.off(t,e),this};D.prototype.getElement=function(){return this._element};D.prototype.getItem=function(t){if(this._isDestroyed||!t&&t!==0)return null;if(typeof t===ns)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof M)return t._gridId===this._id?t:null;if(vt){var e=vt.get(t);return e&&e._gridId===this._id?e:null}else for(var i=0;i<this._items.length;i++)if(this._items[i]._element===t)return this._items[i];return null};D.prototype.getItems=function(t){if(this._isDestroyed||t===void 0)return this._items.slice(0);var e=[],i,s;if(Array.isArray(t)||Le(t))for(i=0;i<t.length;i++)s=this.getItem(t[i]),s&&e.push(s);else s=this.getItem(t),s&&e.push(s);return e};D.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i=t||this._items,s,r,n,o;if(e===!0)for(o=[],s=0;s<i.length;s++)r=i[s],!r.isVisible()&&!r.isHiding()&&(n=r.getElement().style,n.visibility="hidden",n.display="",o.push(n));for(s=0;s<i.length;s++)i[s]._refreshDimensions(e);if(e===!0){for(s=0;s<o.length;s++)n=o[s],n.visibility="",n.display="none";o.length=0}return this};D.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this};D.prototype.synchronize=function(){if(this._isDestroyed)return this;var t=this._items;if(!t.length)return this;for(var e,i,s=0;s<t.length;s++)i=t[s]._element,i.parentNode===this._element&&(e=e||document.createDocumentFragment(),e.appendChild(i));return e?(this._element.appendChild(e),this._emit(Is),this):this};D.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&R(i.cancel)&&i.cancel(),pe=pe%Ns+1;var s=pe;this._nextLayoutData={id:s,instant:t,onFinish:e,cancel:null};for(var r=this._items,n=[],o=0;o<r.length;o++)r[o]._isActive&&n.push(r[o]);this._refreshDimensions();var a=this._width-this._borderLeft-this._borderRight,l=this._height-this._borderTop-this._borderBottom,h=this._settings.layout,d;return R(h)?d=h(this,s,n,a,l,this._onLayoutDataReceived):(D.defaultPacker.setOptions(h),d=D.defaultPacker.createLayout(this,s,n,a,l,this._onLayoutDataReceived)),R(d)&&this._nextLayoutData&&this._nextLayoutData.id===s&&(this._nextLayoutData.cancel=d),this};D.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i=Wr(t);if(!i.length)return i;var s=e||{},r=s.layout?s.layout:s.layout===void 0,n=this._items,o=!1,a,l,h,d;for(d=0;d<i.length;d++)l=i[d],l.parentNode!==this._element&&(a=a||document.createDocumentFragment(),a.appendChild(l));for(a&&this._element.appendChild(a),d=0;d<i.length;d++)l=i[d],h=i[d]=new M(this,l,s.active),h._isActive&&(o=!0,h._layout._skipNextAnimation=!0);for(d=0;d<i.length;d++)h=i[d],h._refreshDimensions(),h._refreshSortData();return Re(n,i,s.index),this._hasListeners(Ve)&&this._emit(Ve,i.slice(0)),o&&r&&this.layout(r===dt,R(r)?r:void 0),i};D.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i=e||{},s=i.layout?i.layout:i.layout===void 0,r=!1,n=this.getItems(),o=[],a=[],l,h,d;for(d=0;d<t.length;d++)h=t[d],!h._isDestroyed&&(l=this._items.indexOf(h),l!==-1&&(h._isActive&&(r=!0),o.push(h),a.push(n.indexOf(h)),h._destroy(i.removeElements),this._items.splice(l,1)));return this._hasListeners(We)&&this._emit(We,o.slice(0),a),r&&s&&this.layout(s===dt,R(s)?s:void 0),o};D.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this};D.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this};D.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i=[],s=[],r=typeof t===le,n=R(t),o=e||{},a=o.instant===!0,l=o.syncWithLayout,h=o.layout?o.layout:o.layout===void 0,d=R(o.onFinish)?o.onFinish:null,v=-1,E=Vr,y,w;if(d&&(E=function(){++v&&d(i.slice(0),s.slice(0))}),n||r)for(w=0;w<this._items.length;w++)y=this._items[w],(n?t(y):ae(y._element,t))?i.push(y):s.push(y);return i.length?this.show(i,{instant:a,syncWithLayout:l,onFinish:E,layout:!1}):E(),s.length?this.hide(s,{instant:a,syncWithLayout:l,onFinish:E,layout:!1}):E(),(i.length||s.length)&&(this._hasListeners(Ge)&&this._emit(Ge,i.slice(0),s.slice(0)),h&&this.layout(h===dt,R(h)?h:void 0)),this};D.prototype.sort=function(){var t,e,i,s;function r(o,a){for(var l=0,h,d,v,E,y=0;y<t.length;y++)if(h=t[y][0],d=t[y][1],v=(o._sortData?o:o._refreshSortData())._sortData[h],E=(a._sortData?a:a._refreshSortData())._sortData[h],d==="desc"||!d&&e?l=E<v?-1:E>v?1:0:l=v<E?-1:v>E?1:0,l)return l;return l||(s||(s=hi(i)),l=e?Vt(s,a,o):Vt(s,o,a)),l}function n(o,a){var l=e?-t(o,a):t(o,a);return l||(s||(s=hi(i)),l=e?Vt(s,a,o):Vt(s,o,a)),l}return function(o,a){if(this._isDestroyed||this._items.length<2)return this;var l=this._items,h=a||{},d=h.layout?h.layout:h.layout===void 0;if(e=!!h.descending,i=l.slice(0),s=null,R(o))t=o,l.sort(n);else if(typeof o===le)t=o.trim().split(" ").filter(function(v){return v}).map(function(v){return v.split(":")}),l.sort(r);else if(Array.isArray(o))l.length=0,l.push.apply(l,o);else throw t=e=i=s=null,new Error("Invalid comparer argument provided.");return this._hasListeners($e)&&this._emit($e,l.slice(0),i),d&&this.layout(d===dt,R(d)?d:void 0),t=e=i=s=null,this}}();D.prototype.move=function(t,e,i){if(this._isDestroyed||this._items.length<2)return this;var s=this._items,r=i||{},n=r.layout?r.layout:r.layout===void 0,o=r.action===J,a=o?J:mt,l=this.getItem(t),h=this.getItem(e),d,v;return l&&h&&l!==h&&(d=s.indexOf(l),v=s.indexOf(h),o?Zi(s,d,v):ji(s,d,v),this._hasListeners(Gt)&&this._emit(Gt,{item:l,fromIndex:d,toIndex:v,action:a}),n&&this.layout(n===dt,R(n)?n:void 0)),this};D.prototype.send=function(t,e,i,s){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(t=this.getItem(t),!t)return this;var r=s||{},n=r.appendTo||document.body,o=r.layoutSender?r.layoutSender:r.layoutSender===void 0,a=r.layoutReceiver?r.layoutReceiver:r.layoutReceiver===void 0;return t._migrate.start(e,i,n),t._migrate._isActive&&t._isActive&&(o&&this.layout(o===dt,R(o)?o:void 0),a&&e.layout(a===dt,R(a)?a:void 0)),this};D.prototype.destroy=function(t){if(this._isDestroyed)return this;var e=this._element,i=this._items.slice(0),s=this._layout&&this._layout.styles||{},r,n;for(jr(this),r=0;r<i.length;r++)i[r]._destroy(t);this._items.length=0,q(e,this._settings.containerClass);for(n in s)e.style[n]="";return this._emit(Ms),this._emitter.destroy(),delete ee[this._id],this._isDestroyed=!0,this};D.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)};D.prototype._hasListeners=function(t){return this._isDestroyed?!1:this._emitter.countListeners(t)>0};D.prototype._updateBoundingRect=function(){var t=this._element,e=t.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom};D.prototype._updateBorders=function(t,e,i,s){var r=this._element;t&&(this._borderLeft=U(r,"border-left-width")),e&&(this._borderRight=U(r,"border-right-width")),i&&(this._borderTop=U(r,"border-top-width")),s&&(this._borderBottom=U(r,"border-bottom-width"))};D.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=G(this._element,"box-sizing")};D.prototype._onLayoutDataReceived=function(){var t=[];return function(e){if(!(this._isDestroyed||!this._nextLayoutData||this._nextLayoutData.id!==e.id)){var i=this,s=this._nextLayoutData.instant,r=this._nextLayoutData.onFinish,n=e.items.length,o=n,a,l,h,d;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(Be)&&this._emit(Be,this._layout.items.slice(0)),this._layout=e,t.length=0,d=0;d<n;d++){if(a=e.items[d],!a){--o;continue}if(l=e.slots[d*2],h=e.slots[d*2+1],a._canSkipLayout(l,h)){--o;continue}a._left=l,a._top=h,a.isActive()&&!a.isDragging()?t.push(a):--o}if(e.styles&&Dt(this._element,e.styles),!(this._hasListeners(ht)&&(this._emit(ht,e.items.slice(0),s===!0),this._layout.id!==e.id))){var v=function(){if(!(--o>0)){var E=i._layout.id!==e.id,y=R(s)?s:r;E||(i._isLayoutFinished=!0),R(y)&&y(e.items.slice(0),E),!E&&i._hasListeners(qe)&&i._emit(qe,e.items.slice(0))}};if(!t.length)return v(),this;for(this._isLayoutFinished=!1,d=0;d<t.length&&this._layout.id===e.id;d++)t[d]._layout.start(s===!0,v);return this._layout.id===e.id&&(t.length=0),this}}}}();D.prototype._setItemsVisibility=function(t,e,i){var s=this,r=t.slice(0),n=i||{},o=n.instant===!0,a=n.onFinish,l=n.layout?n.layout:n.layout===void 0,h=r.length,d=e?Ds:xt,v=e?As:Rs,E=e?"show":"hide",y=!1,w=[],u=[],c,m;if(!h){R(a)&&a(r);return}for(m=0;m<r.length;m++)c=r[m],(e&&!c._isActive||!e&&c._isActive)&&(y=!0),c._layout._skipNextAnimation=!!(e&&!c._isActive),e&&c._visibility._isHidden&&u.push(c),e?c._addToLayout():c._removeFromLayout();u.length&&(this.refreshItems(u,!0),u.length=0);function f(){for(y&&n.syncWithLayout!==!1&&s.off(ht,f),s._hasListeners(d)&&s._emit(d,r.slice(0)),m=0;m<r.length;m++){if(r[m]._gridId!==s._id){--h<1&&(R(a)&&a(w.slice(0)),s._hasListeners(v)&&s._emit(v,w.slice(0)));continue}r[m]._visibility[E](o,function(g,p){g||w.push(p),--h<1&&(R(a)&&a(w.slice(0)),s._hasListeners(v)&&s._emit(v,w.slice(0)))})}}y&&n.syncWithLayout!==!1?this.on(ht,f):f(),y&&l&&this.layout(l===dt,R(l)?l:void 0)};function Gr(t,e){var i=Lt({},t);return e&&(i=Lt(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}function Lt(t,e){var i=Object.keys(e),s=i.length,r,n,o;for(o=0;o<s;o++){if(n=i[o],r=ai(e[n]),ai(t[n])&&r){t[n]=Lt(Lt({},t[n]),e[n]);continue}if(r){t[n]=Lt({},e[n]);continue}if(Array.isArray(e[n])){t[n]=e[n].slice(0);continue}t[n]=e[n]}return t}function $r(t,e){if(e==="*")return t.children;if(typeof e===le){for(var i=[],s=t.children,r=0;r<s.length;r++)ae(s[r],e)&&i.push(s[r]);return i}return Array.isArray(e)||Le(e)?e:[]}function Ur(t,e){typeof e!==ns&&(e=e===!0?0:-1),e>=0&&(t._resizeHandler=zr(function(){t.refreshItems().layout()},e),window.addEventListener("resize",t._resizeHandler))}function jr(t){t._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener("resize",t._resizeHandler),t._resizeHandler=null)}function li(t){var e={},i=document.documentElement.style,s,r;for(s in t)t[s]&&(r=se(i,s),r&&(e[r]=t[s]));return e}function hi(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function Vt(t,e,i){var s=t[e._id],r=t[i._id];return s-r}function Zr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var me,ci;function Qr(){if(ci)return me;ci=1;var t=4,e=.001,i=1e-7,s=10,r=11,n=1/(r-1),o=typeof Float32Array=="function";function a(u,c){return 1-3*c+3*u}function l(u,c){return 3*c-6*u}function h(u){return 3*u}function d(u,c,m){return((a(c,m)*u+l(c,m))*u+h(c))*u}function v(u,c,m){return 3*a(c,m)*u*u+2*l(c,m)*u+h(c)}function E(u,c,m,f,g){var p,T,x=0;do T=c+(m-c)/2,p=d(T,f,g)-u,p>0?m=T:c=T;while(Math.abs(p)>i&&++x<s);return T}function y(u,c,m,f){for(var g=0;g<t;++g){var p=v(c,m,f);if(p===0)return c;var T=d(c,m,f)-u;c-=T/p}return c}function w(u){return u}return me=function(c,m,f,g){if(!(0<=c&&c<=1&&0<=f&&f<=1))throw new Error("bezier x values must be in [0, 1] range");if(c===m&&f===g)return w;for(var p=o?new Float32Array(r):new Array(r),T=0;T<r;++T)p[T]=d(T*n,c,f);function x(O){for(var P=0,A=1,Z=r-1;A!==Z&&p[A]<=O;++A)P+=n;--A;var Y=(O-p[A])/(p[A+1]-p[A]),H=P+Y*n,Q=v(H,c,f);return Q>=e?y(O,H,c,f):Q===0?H:E(O,P,P+n,c,f)}return function(P){return P===0?0:P===1?1:d(x(P),m,g)}},me}var Kr=Qr();const Jr=Zr(Kr),z=document.documentElement,he={viewportSize:()=>[window.innerWidth||z.clientWidth||document.body.clientWidth,window.innerHeight||z.clientHeight||document.body.clientHeight],elementCenterPos:t=>{const e=t.getBoundingClientRect();return[e.left+e.width/2,e.top+e.height/2]},scrollbarWidth:()=>{const t=window.innerWidth-z.clientWidth;return z.style.setProperty("--scrollbar-width",(t>0?t:0)+"px"),t}};function di(t,e,i){return(1-i)*t+i*e}let xe={};xe.vpSize=he.viewportSize();window.addEventListener("resize",()=>{xe.vpSize=he.viewportSize()});let bt;const pt={options:{scroll:{lenisOptions:{smoothWheel:!0,smoothTouch:!1,wheelMultiplier:.9,duration:1,easing:t=>Math.min(1,1.001-Math.pow(5,-7*t)),orientation:"vertical",gestureOrientation:"vertical"},triggerRootMargin:"-1px -1px -1px -1px",rafRootMargin:"100% 100% 100% 100%",autoResize:!0},scrollTo:{offset:0,duration:.9,immediate:!1,lock:!1,easing:t=>Jr(.45,0,.05,1)(t)}},resize:(t,e=200)=>{setTimeout(()=>{t.resize()},e)},initEvents:()=>{window.addEventListener("scrollHit",t=>{if(t.detail.progress>=1){t.detail.target.classList.add("is-scroll-hit");return}else t.detail.target.classList.remove("is-scroll-hit")})}};let S={options:{dragIntensity:[.5,.6],angleDamping:.025,look:{maxDistance:10,damping:[20,15]}},data:{dragPos:[0,0],look:{}},elements:{dragContainer:document.querySelector("main"),contentContainer:document.querySelector(".section-home-head"),main:document.querySelector(".interactive-chara-thalia svg.thalia-chara"),mainEyes:document.querySelector(".interactive-chara-thalia svg.thalia-chara g[data-name='eyes']"),hands:document.querySelectorAll(".chara-thalia--hands svg.thalia-chara"),socialBtns:document.querySelectorAll(".section-home-head .socials .social-btn")},interactions:{init:()=>{S.elements.main&&!S.data.activated&&(S.data.activated=!0,S.data.state="resting",z.setAttribute("thalia-chara-state","resting"),S.interactions.updateEyesPosition(),window.addEventListener("resize",S.interactions.updateEyesPosition),S.elements.contentContainer.addEventListener("mouseenter",S.interactions.updateEyesPosition),S.interactions.look(),S.elements.dragContainer.addEventListener("mouseenter",S.interactions.look),S.elements.dragContainer.addEventListener("mouseleave",S.interactions.unlook),S.elements.dragContainer.addEventListener("mouseleave",S.interactions.pointerStop),S.elements.dragContainer.addEventListener("mouseup",S.interactions.pointerStop),S.elements.main.addEventListener("mousedown",S.interactions.pointerActive),S.elements.dragContainer.addEventListener("mousemove",S.interactions.following),S.elements.socialBtns.length>0&&(S.interactions.socialBtnHover=t=>{z.setAttribute("thalia-social-hover","true")},S.interactions.socialBtnOut=t=>{z.setAttribute("thalia-social-hover","false")},S.elements.socialBtns.forEach(t=>{t.addEventListener("mouseenter",S.interactions.socialBtnHover),t.addEventListener("mouseleave",S.interactions.socialBtnOut)})))},updateEyesPosition:t=>{pt.resize(bt),S.data.look.center=he.elementCenterPos(S.elements.mainEyes)},look:t=>{S.elements.main.classList.add("looking")},unlook:t=>{S.elements.main.classList.remove("looking")},pointerStop:t=>{const e=Math.abs(S.data.dragPos[0]);z.setAttribute("thalia-chara-drag-strength",e>xe.vpSize[0]/8?"strong":e>15?"weak":"none"),z.style.setProperty("--thalia-chara-drag-direction",S.data.dragPos[0]>0?1:-1),S.data.state="resting",z.setAttribute("thalia-chara-state","resting"),S.elements.main.classList.remove("grabbing")},pointerActive:t=>{S.data.pointerPosStart=[t.clientX,t.clientY],S.data.state="grabbing",S.interactions.following(t),z.setAttribute("thalia-chara-state","grabbing"),S.elements.main.classList.add("grabbing")},following:t=>{S.data.pointerPos=[t.clientX,t.clientY],S.data.state=="grabbing"?(S.data.dragPos=[di(0,S.data.pointerPos[0]-S.data.pointerPosStart[0],S.options.dragIntensity[0]),di(0,S.data.pointerPos[1]-S.data.pointerPosStart[1],S.options.dragIntensity[1])],z.style.setProperty("--thalia-chara-drag-x",S.data.dragPos[0]+"px"),z.style.setProperty("--thalia-chara-drag-y",S.data.dragPos[1]+"px"),z.style.setProperty("--thalia-chara-drag-rotate",S.data.dragPos[0]*S.options.angleDamping+"deg")):(S.data.look.posFromCenter=[(S.data.pointerPos[0]-S.data.look.center[0])/S.options.look.damping[0],(S.data.pointerPos[1]-S.data.look.center[1])/S.options.look.damping[1]],S.data.look.distanceFactor=S.options.look.maxDistance/Math.sqrt(S.data.look.posFromCenter[0]*S.data.look.posFromCenter[0]+S.data.look.posFromCenter[1]*S.data.look.posFromCenter[1]),S.data.look.distanceFactor>1?S.data.look.posFromCenter=[S.data.look.posFromCenter[0],S.data.look.posFromCenter[1]]:S.data.look.posFromCenter=[S.data.look.posFromCenter[0]*S.data.look.distanceFactor,S.data.look.posFromCenter[1]*S.data.look.distanceFactor],S.elements.main.style.setProperty("--pointer-follow-look-x",S.data.look.posFromCenter[0]+"px"),S.elements.main.style.setProperty("--pointer-follow-look-y",S.data.look.posFromCenter[1]+"px"))}}},Et;const ui={target:".grid-muuri",gallery:{items:".grid-muuri--item",sortData:null,showDuration:600,showEasing:"cubic-bezier(0.4, 0, 0, 1)",visibleStyles:{opacity:"1",transform:"scale(1)"},hideDuration:400,hideEasing:"cubic-bezier(0.7, 0, 0.4, 1)",hiddenStyles:{opacity:"0",transform:"scale(0.6)"},layout:{fillGaps:!0,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnInit:!0,layoutOnResize:150,layoutDuration:800,layoutEasing:"cubic-bezier(0.5, 0.05, 0, 1)",dragEnabled:!1}};let L={itemsShiftValue:140,data:{currentFilter:null},elements:{gallerySectionScrollToAnchor:document.querySelector(".section-home-gallery .scroll-to-anchor"),galleryItemsFiltersContainers:document.querySelectorAll(".gallery-grid .item-gallery .filters"),filtersBar:document.querySelectorAll(".sticky-filters"),filtersBarBtns:document.querySelectorAll(".sticky-filters .btn-filter"),filtersClearBtn:document.querySelectorAll("*[thalia-gallery-filter-btn-clear]"),filtersBtns:void 0,shiftItemsMuuri:void 0,shiftItemsContent:[]},galleryFilter:(t,e)=>!!t.getElement().getAttribute("thalia-gallery-item-filters").match(e),onClickFilter:t=>{z.setAttribute("thalia-gallery-filter-previous",z.getAttribute("thalia-gallery-filter")),t.getAttribute("thalia-gallery-filter-btn-id")==L.data.currentFilter?(L.onUnfilter(),pt.resize(bt)):(L.onFilter(t),pt.resize(bt)),L.scrollToTop()},onFilter:t=>{L.data.currentFilter=t.getAttribute("thalia-gallery-filter-btn-id"),L.setShiftItemsSize(),z.setAttribute("thalia-gallery-filter",L.data.currentFilter),Et.refreshItems(),Et.filter(e=>(e.getElement().setAttribute("thalia-gallery-item-was-hidden",!e.isVisible()),L.galleryFilter(e,L.data.currentFilter))),L.elements.filtersBarBtns.forEach(e=>{e.getAttribute("thalia-gallery-filter-btn-id").match(L.data.currentFilter)?e.classList.add("active"):e.classList.remove("active")})},onUnfilter:()=>{L.data.currentFilter=null,L.setShiftItemsSize(),z.setAttribute("thalia-gallery-filter","false"),Et.refreshItems(),Et.filter(t=>(t.getElement().setAttribute("thalia-gallery-item-was-hidden",!t.isVisible()),!0)),L.elements.filtersBarBtns.forEach(t=>{t.classList.remove("active")})},createItemsFiltersBtns:()=>{Et.getItems().forEach(t=>{let e="";t.getElement().getAttribute("thalia-gallery-item-filters").split(";").forEach(i=>{e+="<span thalia-gallery-filter-btn-id="+i+">"+i+"</span>"}),t.getElement().querySelector(".filters").innerHTML=e})},initFiltersBtns:()=>{L.onUnfilter(),L.elements.filtersBtns=document.querySelectorAll("*[thalia-gallery-filter-btn-id]"),L.elements.filtersBtns.length>0&&(L.elements.filtersBtns.forEach(t=>{t.addEventListener("click",()=>{L.onClickFilter(t)})}),L.elements.filtersClearBtn.forEach(t=>{t.addEventListener("click",L.onUnfilter)}))},getShiftItemsSize:t=>{L.elements.shiftItemsMuuri.forEach(e=>{e.style.display="block",e.setAttribute("thalia-gallery-item-height",e.firstElementChild.firstElementChild.offsetHeight),setTimeout(()=>{e.style.display=null},5)}),t&&t()},setShiftItemsSize:()=>{L.elements.shiftItemsMuuri.forEach(t=>{t.style.height=(L.data.currentFilter===null?L.itemsShiftValue:0)+parseFloat(t.getAttribute("thalia-gallery-item-height"))+"px"})},initShiftItems:()=>{z.style.setProperty("--thalia-gallery-item-shift",L.itemsShiftValue+"px"),L.elements.shiftItemsMuuri=document.querySelectorAll(".gallery-grid .grid-muuri--item.item-shift"),L.elements.shiftItemsMuuri.forEach(t=>{L.elements.shiftItemsContent.push(t.querySelectorAll(".item-gallery"))}),L.getShiftItemsSize(),L.setShiftItemsSize(),window.addEventListener("resize",()=>{L.getShiftItemsSize(L.setShiftItemsSize)})},scrollToTop:()=>{L.elements.gallerySectionScrollToAnchor.getBoundingClientRect().top<0&&bt.scrollTo(L.elements.gallerySectionScrollToAnchor,pt.options.scrollTo)}};window.addEventListener("load",()=>{he.scrollbarWidth(),bt=new Ts(pt.options.scroll),pt.initEvents(),S.interactions.init(),Et=new D(ui.target,ui.gallery),L.initShiftItems(),L.createItemsFiltersBtns(),L.initFiltersBtns(),pt.resize(bt)});
